// Appbase Javascript Library v2.2.14
!function e(t,r,n){function o(a,s){if(!r[a]){if(!t[a]){var c="function"==typeof require&&require;if(!s&&c)return c(a,!0);if(i)return i(a,!0);var u=new Error("Cannot find module '"+a+"'");throw u.code="MODULE_NOT_FOUND",u}var f=r[a]={exports:{}};t[a][0].call(f.exports,function(e){var r=t[a][1][e];return o(r?r:e)},f,f.exports,e,t,r,n)}return r[a].exports}for(var i="function"==typeof require&&require,a=0;a<n.length;a++)o(n[a]);return o}({1:[function(){},{}],2:[function(e,t,r){function n(e,t,r){if(!(this instanceof n))return new n(e,t,r);var o,i=typeof e;if("number"===i)o=e>0?e>>>0:0;else if("string"===i)"base64"===t&&(e=E(e)),o=n.byteLength(e,t);else{if("object"!==i||null===e)throw new TypeError("must start with number, buffer, array or string");"Buffer"===e.type&&B(e.data)&&(e=e.data),o=+e.length>0?Math.floor(+e.length):0}if(this.length>I)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+I.toString(16)+" bytes");var a;n.TYPED_ARRAY_SUPPORT?a=n._augment(new Uint8Array(o)):(a=this,a.length=o,a._isBuffer=!0);var s;if(n.TYPED_ARRAY_SUPPORT&&"number"==typeof e.byteLength)a._set(e);else if(A(e))if(n.isBuffer(e))for(s=0;o>s;s++)a[s]=e.readUInt8(s);else for(s=0;o>s;s++)a[s]=(e[s]%256+256)%256;else if("string"===i)a.write(e,0,t);else if("number"===i&&!n.TYPED_ARRAY_SUPPORT&&!r)for(s=0;o>s;s++)a[s]=0;return a}function o(e,t,r,n){r=Number(r)||0;var o=e.length-r;n?(n=Number(n),n>o&&(n=o)):n=o;var i=t.length;if(i%2!==0)throw new Error("Invalid hex string");n>i/2&&(n=i/2);for(var a=0;n>a;a++){var s=parseInt(t.substr(2*a,2),16);if(isNaN(s))throw new Error("Invalid hex string");e[r+a]=s}return a}function i(e,t,r,n){var o=L(T(t),e,r,n);return o}function a(e,t,r,n){var o=L(C(t),e,r,n);return o}function s(e,t,r,n){return a(e,t,r,n)}function c(e,t,r,n){var o=L(R(t),e,r,n);return o}function u(e,t,r,n){var o=L(S(t),e,r,n,2);return o}function f(e,t,r){return P.fromByteArray(0===t&&r===e.length?e:e.slice(t,r))}function p(e,t,r){var n="",o="";r=Math.min(e.length,r);for(var i=t;r>i;i++)e[i]<=127?(n+=U(o)+String.fromCharCode(e[i]),o=""):o+="%"+e[i].toString(16);return n+U(o)}function l(e,t,r){var n="";r=Math.min(e.length,r);for(var o=t;r>o;o++)n+=String.fromCharCode(e[o]);return n}function h(e,t,r){return l(e,t,r)}function d(e,t,r){var n=e.length;(!t||0>t)&&(t=0),(!r||0>r||r>n)&&(r=n);for(var o="",i=t;r>i;i++)o+=j(e[i]);return o}function v(e,t,r){for(var n=e.slice(t,r),o="",i=0;i<n.length;i+=2)o+=String.fromCharCode(n[i]+256*n[i+1]);return o}function g(e,t,r){if(e%1!==0||0>e)throw new RangeError("offset is not uint");if(e+t>r)throw new RangeError("Trying to access beyond buffer length")}function y(e,t,r,o,i,a){if(!n.isBuffer(e))throw new TypeError("buffer must be a Buffer instance");if(t>i||a>t)throw new TypeError("value is out of bounds");if(r+o>e.length)throw new TypeError("index out of range")}function m(e,t,r,n){0>t&&(t=65535+t+1);for(var o=0,i=Math.min(e.length-r,2);i>o;o++)e[r+o]=(t&255<<8*(n?o:1-o))>>>8*(n?o:1-o)}function b(e,t,r,n){0>t&&(t=4294967295+t+1);for(var o=0,i=Math.min(e.length-r,4);i>o;o++)e[r+o]=t>>>8*(n?o:3-o)&255}function w(e,t,r,n,o,i){if(t>o||i>t)throw new TypeError("value is out of bounds");if(r+n>e.length)throw new TypeError("index out of range")}function k(e,t,r,n,o){return o||w(e,t,r,4,3.4028234663852886e38,-3.4028234663852886e38),O.write(e,t,r,n,23,4),r+4}function x(e,t,r,n,o){return o||w(e,t,r,8,1.7976931348623157e308,-1.7976931348623157e308),O.write(e,t,r,n,52,8),r+8}function E(e){for(e=_(e).replace(D,"");e.length%4!==0;)e+="=";return e}function _(e){return e.trim?e.trim():e.replace(/^\s+|\s+$/g,"")}function A(e){return B(e)||n.isBuffer(e)||e&&"object"==typeof e&&"number"==typeof e.length}function j(e){return 16>e?"0"+e.toString(16):e.toString(16)}function T(e){for(var t=[],r=0;r<e.length;r++){var n=e.charCodeAt(r);if(127>=n)t.push(n);else{var o=r;n>=55296&&57343>=n&&r++;for(var i=encodeURIComponent(e.slice(o,r+1)).substr(1).split("%"),a=0;a<i.length;a++)t.push(parseInt(i[a],16))}}return t}function C(e){for(var t=[],r=0;r<e.length;r++)t.push(255&e.charCodeAt(r));return t}function S(e){for(var t,r,n,o=[],i=0;i<e.length;i++)t=e.charCodeAt(i),r=t>>8,n=t%256,o.push(n),o.push(r);return o}function R(e){return P.toByteArray(e)}function L(e,t,r,n,o){o&&(n-=n%o);for(var i=0;n>i&&!(i+r>=t.length||i>=e.length);i++)t[i+r]=e[i];return i}function U(e){try{return decodeURIComponent(e)}catch(t){return String.fromCharCode(65533)}}var P=e("base64-js"),O=e("ieee754"),B=e("is-array");r.Buffer=n,r.SlowBuffer=n,r.INSPECT_MAX_BYTES=50,n.poolSize=8192;var I=1073741823;n.TYPED_ARRAY_SUPPORT=function(){try{var e=new ArrayBuffer(0),t=new Uint8Array(e);return t.foo=function(){return 42},42===t.foo()&&"function"==typeof t.subarray&&0===new Uint8Array(1).subarray(1,1).byteLength}catch(r){return!1}}(),n.isBuffer=function(e){return!(null==e||!e._isBuffer)},n.compare=function(e,t){if(!n.isBuffer(e)||!n.isBuffer(t))throw new TypeError("Arguments must be Buffers");for(var r=e.length,o=t.length,i=0,a=Math.min(r,o);a>i&&e[i]===t[i];i++);return i!==a&&(r=e[i],o=t[i]),o>r?-1:r>o?1:0},n.isEncoding=function(e){switch(String(e).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"binary":case"base64":case"raw":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},n.concat=function(e,t){if(!B(e))throw new TypeError("Usage: Buffer.concat(list[, length])");if(0===e.length)return new n(0);if(1===e.length)return e[0];var r;if(void 0===t)for(t=0,r=0;r<e.length;r++)t+=e[r].length;var o=new n(t),i=0;for(r=0;r<e.length;r++){var a=e[r];a.copy(o,i),i+=a.length}return o},n.byteLength=function(e,t){var r;switch(e+="",t||"utf8"){case"ascii":case"binary":case"raw":r=e.length;break;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":r=2*e.length;break;case"hex":r=e.length>>>1;break;case"utf8":case"utf-8":r=T(e).length;break;case"base64":r=R(e).length;break;default:r=e.length}return r},n.prototype.length=void 0,n.prototype.parent=void 0,n.prototype.toString=function(e,t,r){var n=!1;if(t>>>=0,r=void 0===r||1/0===r?this.length:r>>>0,e||(e="utf8"),0>t&&(t=0),r>this.length&&(r=this.length),t>=r)return"";for(;;)switch(e){case"hex":return d(this,t,r);case"utf8":case"utf-8":return p(this,t,r);case"ascii":return l(this,t,r);case"binary":return h(this,t,r);case"base64":return f(this,t,r);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return v(this,t,r);default:if(n)throw new TypeError("Unknown encoding: "+e);e=(e+"").toLowerCase(),n=!0}},n.prototype.equals=function(e){if(!n.isBuffer(e))throw new TypeError("Argument must be a Buffer");return 0===n.compare(this,e)},n.prototype.inspect=function(){var e="",t=r.INSPECT_MAX_BYTES;return this.length>0&&(e=this.toString("hex",0,t).match(/.{2}/g).join(" "),this.length>t&&(e+=" ... ")),"<Buffer "+e+">"},n.prototype.compare=function(e){if(!n.isBuffer(e))throw new TypeError("Argument must be a Buffer");return n.compare(this,e)},n.prototype.get=function(e){return console.log(".get() is deprecated. Access using array indexes instead."),this.readUInt8(e)},n.prototype.set=function(e,t){return console.log(".set() is deprecated. Access using array indexes instead."),this.writeUInt8(e,t)},n.prototype.write=function(e,t,r,n){if(isFinite(t))isFinite(r)||(n=r,r=void 0);else{var f=n;n=t,t=r,r=f}t=Number(t)||0;var p=this.length-t;r?(r=Number(r),r>p&&(r=p)):r=p,n=String(n||"utf8").toLowerCase();var l;switch(n){case"hex":l=o(this,e,t,r);break;case"utf8":case"utf-8":l=i(this,e,t,r);break;case"ascii":l=a(this,e,t,r);break;case"binary":l=s(this,e,t,r);break;case"base64":l=c(this,e,t,r);break;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":l=u(this,e,t,r);break;default:throw new TypeError("Unknown encoding: "+n)}return l},n.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}},n.prototype.slice=function(e,t){var r=this.length;if(e=~~e,t=void 0===t?r:~~t,0>e?(e+=r,0>e&&(e=0)):e>r&&(e=r),0>t?(t+=r,0>t&&(t=0)):t>r&&(t=r),e>t&&(t=e),n.TYPED_ARRAY_SUPPORT)return n._augment(this.subarray(e,t));for(var o=t-e,i=new n(o,void 0,!0),a=0;o>a;a++)i[a]=this[a+e];return i},n.prototype.readUInt8=function(e,t){return t||g(e,1,this.length),this[e]},n.prototype.readUInt16LE=function(e,t){return t||g(e,2,this.length),this[e]|this[e+1]<<8},n.prototype.readUInt16BE=function(e,t){return t||g(e,2,this.length),this[e]<<8|this[e+1]},n.prototype.readUInt32LE=function(e,t){return t||g(e,4,this.length),(this[e]|this[e+1]<<8|this[e+2]<<16)+16777216*this[e+3]},n.prototype.readUInt32BE=function(e,t){return t||g(e,4,this.length),16777216*this[e]+(this[e+1]<<16|this[e+2]<<8|this[e+3])},n.prototype.readInt8=function(e,t){return t||g(e,1,this.length),128&this[e]?-1*(255-this[e]+1):this[e]},n.prototype.readInt16LE=function(e,t){t||g(e,2,this.length);var r=this[e]|this[e+1]<<8;return 32768&r?4294901760|r:r},n.prototype.readInt16BE=function(e,t){t||g(e,2,this.length);var r=this[e+1]|this[e]<<8;return 32768&r?4294901760|r:r},n.prototype.readInt32LE=function(e,t){return t||g(e,4,this.length),this[e]|this[e+1]<<8|this[e+2]<<16|this[e+3]<<24},n.prototype.readInt32BE=function(e,t){return t||g(e,4,this.length),this[e]<<24|this[e+1]<<16|this[e+2]<<8|this[e+3]},n.prototype.readFloatLE=function(e,t){return t||g(e,4,this.length),O.read(this,e,!0,23,4)},n.prototype.readFloatBE=function(e,t){return t||g(e,4,this.length),O.read(this,e,!1,23,4)},n.prototype.readDoubleLE=function(e,t){return t||g(e,8,this.length),O.read(this,e,!0,52,8)},n.prototype.readDoubleBE=function(e,t){return t||g(e,8,this.length),O.read(this,e,!1,52,8)},n.prototype.writeUInt8=function(e,t,r){return e=+e,t>>>=0,r||y(this,e,t,1,255,0),n.TYPED_ARRAY_SUPPORT||(e=Math.floor(e)),this[t]=e,t+1},n.prototype.writeUInt16LE=function(e,t,r){return e=+e,t>>>=0,r||y(this,e,t,2,65535,0),n.TYPED_ARRAY_SUPPORT?(this[t]=e,this[t+1]=e>>>8):m(this,e,t,!0),t+2},n.prototype.writeUInt16BE=function(e,t,r){return e=+e,t>>>=0,r||y(this,e,t,2,65535,0),n.TYPED_ARRAY_SUPPORT?(this[t]=e>>>8,this[t+1]=e):m(this,e,t,!1),t+2},n.prototype.writeUInt32LE=function(e,t,r){return e=+e,t>>>=0,r||y(this,e,t,4,4294967295,0),n.TYPED_ARRAY_SUPPORT?(this[t+3]=e>>>24,this[t+2]=e>>>16,this[t+1]=e>>>8,this[t]=e):b(this,e,t,!0),t+4},n.prototype.writeUInt32BE=function(e,t,r){return e=+e,t>>>=0,r||y(this,e,t,4,4294967295,0),n.TYPED_ARRAY_SUPPORT?(this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=e):b(this,e,t,!1),t+4},n.prototype.writeInt8=function(e,t,r){return e=+e,t>>>=0,r||y(this,e,t,1,127,-128),n.TYPED_ARRAY_SUPPORT||(e=Math.floor(e)),0>e&&(e=255+e+1),this[t]=e,t+1},n.prototype.writeInt16LE=function(e,t,r){return e=+e,t>>>=0,r||y(this,e,t,2,32767,-32768),n.TYPED_ARRAY_SUPPORT?(this[t]=e,this[t+1]=e>>>8):m(this,e,t,!0),t+2},n.prototype.writeInt16BE=function(e,t,r){return e=+e,t>>>=0,r||y(this,e,t,2,32767,-32768),n.TYPED_ARRAY_SUPPORT?(this[t]=e>>>8,this[t+1]=e):m(this,e,t,!1),t+2},n.prototype.writeInt32LE=function(e,t,r){return e=+e,t>>>=0,r||y(this,e,t,4,2147483647,-2147483648),n.TYPED_ARRAY_SUPPORT?(this[t]=e,this[t+1]=e>>>8,this[t+2]=e>>>16,this[t+3]=e>>>24):b(this,e,t,!0),t+4},n.prototype.writeInt32BE=function(e,t,r){return e=+e,t>>>=0,r||y(this,e,t,4,2147483647,-2147483648),0>e&&(e=4294967295+e+1),n.TYPED_ARRAY_SUPPORT?(this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=e):b(this,e,t,!1),t+4},n.prototype.writeFloatLE=function(e,t,r){return k(this,e,t,!0,r)},n.prototype.writeFloatBE=function(e,t,r){return k(this,e,t,!1,r)},n.prototype.writeDoubleLE=function(e,t,r){return x(this,e,t,!0,r)},n.prototype.writeDoubleBE=function(e,t,r){return x(this,e,t,!1,r)},n.prototype.copy=function(e,t,r,o){var i=this;if(r||(r=0),o||0===o||(o=this.length),t||(t=0),o!==r&&0!==e.length&&0!==i.length){if(r>o)throw new TypeError("sourceEnd < sourceStart");if(0>t||t>=e.length)throw new TypeError("targetStart out of bounds");if(0>r||r>=i.length)throw new TypeError("sourceStart out of bounds");if(0>o||o>i.length)throw new TypeError("sourceEnd out of bounds");o>this.length&&(o=this.length),e.length-t<o-r&&(o=e.length-t+r);var a=o-r;if(1e3>a||!n.TYPED_ARRAY_SUPPORT)for(var s=0;a>s;s++)e[s+t]=this[s+r];else e._set(this.subarray(r,r+a),t)}},n.prototype.fill=function(e,t,r){if(e||(e=0),t||(t=0),r||(r=this.length),t>r)throw new TypeError("end < start");if(r!==t&&0!==this.length){if(0>t||t>=this.length)throw new TypeError("start out of bounds");if(0>r||r>this.length)throw new TypeError("end out of bounds");var n;if("number"==typeof e)for(n=t;r>n;n++)this[n]=e;else{var o=T(e.toString()),i=o.length;for(n=t;r>n;n++)this[n]=o[n%i]}return this}},n.prototype.toArrayBuffer=function(){if("undefined"!=typeof Uint8Array){if(n.TYPED_ARRAY_SUPPORT)return new n(this).buffer;for(var e=new Uint8Array(this.length),t=0,r=e.length;r>t;t+=1)e[t]=this[t];return e.buffer}throw new TypeError("Buffer.toArrayBuffer not supported in this browser")};var N=n.prototype;n._augment=function(e){return e.constructor=n,e._isBuffer=!0,e._get=e.get,e._set=e.set,e.get=N.get,e.set=N.set,e.write=N.write,e.toString=N.toString,e.toLocaleString=N.toString,e.toJSON=N.toJSON,e.equals=N.equals,e.compare=N.compare,e.copy=N.copy,e.slice=N.slice,e.readUInt8=N.readUInt8,e.readUInt16LE=N.readUInt16LE,e.readUInt16BE=N.readUInt16BE,e.readUInt32LE=N.readUInt32LE,e.readUInt32BE=N.readUInt32BE,e.readInt8=N.readInt8,e.readInt16LE=N.readInt16LE,e.readInt16BE=N.readInt16BE,e.readInt32LE=N.readInt32LE,e.readInt32BE=N.readInt32BE,e.readFloatLE=N.readFloatLE,e.readFloatBE=N.readFloatBE,e.readDoubleLE=N.readDoubleLE,e.readDoubleBE=N.readDoubleBE,e.writeUInt8=N.writeUInt8,e.writeUInt16LE=N.writeUInt16LE,e.writeUInt16BE=N.writeUInt16BE,e.writeUInt32LE=N.writeUInt32LE,e.writeUInt32BE=N.writeUInt32BE,e.writeInt8=N.writeInt8,e.writeInt16LE=N.writeInt16LE,e.writeInt16BE=N.writeInt16BE,e.writeInt32LE=N.writeInt32LE,e.writeInt32BE=N.writeInt32BE,e.writeFloatLE=N.writeFloatLE,e.writeFloatBE=N.writeFloatBE,e.writeDoubleLE=N.writeDoubleLE,e.writeDoubleBE=N.writeDoubleBE,e.fill=N.fill,e.inspect=N.inspect,e.toArrayBuffer=N.toArrayBuffer,e};var D=/[^+\/0-9A-z]/g},{"base64-js":3,ieee754:4,"is-array":5}],3:[function(e,t,r){var n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/";!function(e){"use strict";function t(e){var t=e.charCodeAt(0);return t===a?62:t===s?63:c>t?-1:c+10>t?t-c+26+26:f+26>t?t-f:u+26>t?t-u+26:void 0}function r(e){function r(e){u[p++]=e}var n,o,a,s,c,u;if(e.length%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var f=e.length;c="="===e.charAt(f-2)?2:"="===e.charAt(f-1)?1:0,u=new i(3*e.length/4-c),a=c>0?e.length-4:e.length;var p=0;for(n=0,o=0;a>n;n+=4,o+=3)s=t(e.charAt(n))<<18|t(e.charAt(n+1))<<12|t(e.charAt(n+2))<<6|t(e.charAt(n+3)),r((16711680&s)>>16),r((65280&s)>>8),r(255&s);return 2===c?(s=t(e.charAt(n))<<2|t(e.charAt(n+1))>>4,r(255&s)):1===c&&(s=t(e.charAt(n))<<10|t(e.charAt(n+1))<<4|t(e.charAt(n+2))>>2,r(s>>8&255),r(255&s)),u}function o(e){function t(e){return n.charAt(e)}function r(e){return t(e>>18&63)+t(e>>12&63)+t(e>>6&63)+t(63&e)}var o,i,a,s=e.length%3,c="";for(o=0,a=e.length-s;a>o;o+=3)i=(e[o]<<16)+(e[o+1]<<8)+e[o+2],c+=r(i);switch(s){case 1:i=e[e.length-1],c+=t(i>>2),c+=t(i<<4&63),c+="==";break;case 2:i=(e[e.length-2]<<8)+e[e.length-1],c+=t(i>>10),c+=t(i>>4&63),c+=t(i<<2&63),c+="="}return c}var i="undefined"!=typeof Uint8Array?Uint8Array:Array,a="+".charCodeAt(0),s="/".charCodeAt(0),c="0".charCodeAt(0),u="a".charCodeAt(0),f="A".charCodeAt(0);e.toByteArray=r,e.fromByteArray=o}("undefined"==typeof r?this.base64js={}:r)},{}],4:[function(e,t,r){r.read=function(e,t,r,n,o){var i,a,s=8*o-n-1,c=(1<<s)-1,u=c>>1,f=-7,p=r?o-1:0,l=r?-1:1,h=e[t+p];for(p+=l,i=h&(1<<-f)-1,h>>=-f,f+=s;f>0;i=256*i+e[t+p],p+=l,f-=8);for(a=i&(1<<-f)-1,i>>=-f,f+=n;f>0;a=256*a+e[t+p],p+=l,f-=8);if(0===i)i=1-u;else{if(i===c)return a?0/0:1/0*(h?-1:1);a+=Math.pow(2,n),i-=u}return(h?-1:1)*a*Math.pow(2,i-n)},r.write=function(e,t,r,n,o,i){var a,s,c,u=8*i-o-1,f=(1<<u)-1,p=f>>1,l=23===o?Math.pow(2,-24)-Math.pow(2,-77):0,h=n?0:i-1,d=n?1:-1,v=0>t||0===t&&0>1/t?1:0;for(t=Math.abs(t),isNaN(t)||1/0===t?(s=isNaN(t)?1:0,a=f):(a=Math.floor(Math.log(t)/Math.LN2),t*(c=Math.pow(2,-a))<1&&(a--,c*=2),t+=a+p>=1?l/c:l*Math.pow(2,1-p),t*c>=2&&(a++,c/=2),a+p>=f?(s=0,a=f):a+p>=1?(s=(t*c-1)*Math.pow(2,o),a+=p):(s=t*Math.pow(2,p-1)*Math.pow(2,o),a=0));o>=8;e[r+h]=255&s,h+=d,s/=256,o-=8);for(a=a<<o|s,u+=o;u>0;e[r+h]=255&a,h+=d,a/=256,u-=8);e[r+h-d]|=128*v}},{}],5:[function(e,t){var r=Array.isArray,n=Object.prototype.toString;t.exports=r||function(e){return!!e&&"[object Array]"==n.call(e)}},{}],6:[function(e){!function t(r,n,o){function i(s,c){if(!n[s]){if(!r[s]){var u="function"==typeof e&&e;if(!c&&u)return u(s,!0);if(a)return a(s,!0);throw new Error("Cannot find module '"+s+"'")}var f=n[s]={exports:{}};r[s][0].call(f.exports,function(e){var t=r[s][1][e];return i(t?t:e)},f,f.exports,t,r,n,o)}return n[s].exports}for(var a="function"==typeof e&&e,s=0;s<o.length;s++)i(o[s]);return i}({1:[function(e,t){t.exports={oauthd_url:"https://oauth.io",oauthd_api:"https://oauth.io/api",version:"web-0.4.0",options:{}}},{}],2:[function(e,t){"use strict";t.exports=function(e){var t;return t=e.getJquery(),{get:function(){return function(r,n){var o;return o=e.getOAuthdURL(),t.ajax({url:o+r,type:"get",data:n})}}(this),post:function(){return function(r,n){var o;return o=e.getOAuthdURL(),t.ajax({url:o+r,type:"post",data:n})}}(this),put:function(){return function(r,n){var o;return o=e.getOAuthdURL(),t.ajax({url:o+r,type:"put",data:n})}}(this),del:function(){return function(r,n){var o;return o=e.getOAuthdURL(),t.ajax({url:o+r,type:"delete",data:n})}}(this)}}},{}],3:[function(e,t){"use strict";var r,n,o,i,a;i=e("../config"),n=e("../tools/url"),r=e("../tools/location_operations"),a=e("../tools/cookies"),o=e("../tools/cache"),t.exports=function(e,t,s,c){var u,f;return n=n(t),a.init(i,t),f=r(t),o.init(a,i),u={initialize:function(e,t){var r;if(i.key=e,t)for(r in t)i.options[r]=t[r]},setOAuthdURL:function(e){i.oauthd_url=e,i.oauthd_base=n.getAbsUrl(i.oauthd_url).match(/^.{2,5}:\/\/[^/]+/)[0]},getOAuthdURL:function(){return i.oauthd_url},getVersion:function(){return i.version},extend:function(e,t){return this[e]=t(this)},getConfig:function(){return i},getWindow:function(){return e},getDocument:function(){return t},getNavigator:function(){return c},getJquery:function(){return s},getUrl:function(){return n},getCache:function(){return o},getCookies:function(){return a},getLocationOperations:function(){return f}}}},{"../config":1,"../tools/cache":9,"../tools/cookies":10,"../tools/location_operations":12,"../tools/url":14}],4:[function(e,t){"use strict";var r,n,o;r=e("../tools/cookies"),n=e("./request"),o=e("../tools/sha1"),t.exports=function(t){var i,a,s,c,u,f,p,l,h,d,v,g,y;return a=t.getUrl(),u=t.getConfig(),f=t.getDocument(),y=t.getWindow(),i=t.getJquery(),s=t.getCache(),g=e("./providers")(t),u.oauthd_base=a.getAbsUrl(u.oauthd_url).match(/^.{2,5}:\/\/[^/]+/)[0],c=[],h=void 0,(v=function(){var e,t;t=/[\\#&]oauthio=([^&]*)/.exec(f.location.hash),t&&(f.location.hash=f.location.hash.replace(/&?oauthio=[^&]*/,""),h=decodeURIComponent(t[1].replace(/\+/g," ")),e=r.readCookie("oauthio_state"),e&&(c.push(e),r.eraseCookie("oauthio_state")))})(),p=t.getLocationOperations(),d={request:n(t,c,g)},l={initialize:function(e,r){return t.initialize(e,r)},setOAuthdURL:function(e){u.oauthd_url=e,u.oauthd_base=a.getAbsUrl(u.oauthd_url).match(/^.{2,5}:\/\/[^/]+/)[0]},create:function(e,t,r){var n,o,i,a;if(!t)return s.tryCache(l,e,!0);"object"!=typeof r&&g.fetchDescription(e),o=function(n){return d.request.mkHttp(e,t,r,n)},i=function(n,o){return d.request.mkHttpEndpoint(e,t,r,n,o)},a={};for(n in t)a[n]=t[n];return a.get=o("GET"),a.post=o("POST"),a.put=o("PUT"),a.patch=o("PATCH"),a.del=o("DELETE"),a.me=d.request.mkHttpMe(e,t,r,"GET"),a},popup:function(e,t,r){var n,p,h,v,g,m,b,w,k,x,E;return v=!1,h=function(e){if(!v){if(e.origin!==u.oauthd_base)return;try{w.close()}catch(r){}return t.data=e.data,d.request.sendCallback(t,n),v=!0}},w=void 0,p=void 0,k=void 0,n=i.Deferred(),t=t||{},u.key?(2===arguments.length&&"function"==typeof t&&(r=t,t={}),s.cacheEnabled(t.cache)&&(m=s.tryCache(l,e,t.cache))?(null!=n&&n.resolve(m),r?r(null,m):n.promise()):(t.state||(t.state=o.create_hash(),t.state_type="client"),c.push(t.state),b=u.oauthd_url+"/auth/"+e+"?k="+u.key,b+="&d="+encodeURIComponent(a.getAbsUrl("/")),t&&(b+="&opts="+encodeURIComponent(JSON.stringify(t))),t.wnd_settings?(E=t.wnd_settings,delete t.wnd_settings):E={width:Math.floor(.8*y.outerWidth),height:Math.floor(.5*y.outerHeight)},null==E.height&&(E.height=E.height<350?350:void 0),null==E.width&&(E.width=E.width<800?800:void 0),null==E.left&&(E.left=y.screenX+(y.outerWidth-E.width)/2),null==E.top&&(E.top=y.screenY+(y.outerHeight-E.height)/8),x="width="+E.width+",height="+E.height,x+=",toolbar=0,scrollbars=1,status=1,resizable=1,location=1,menuBar=0",x+=",left="+E.left+",top="+E.top,t={provider:e,cache:t.cache},t.callback=function(e,n){return y.removeEventListener?y.removeEventListener("message",h,!1):y.detachEvent?y.detachEvent("onmessage",h):f.detachEvent&&f.detachEvent("onmessage",h),t.callback=function(){},k&&(clearTimeout(k),k=void 0),r?r(e,n):void 0},y.attachEvent?y.attachEvent("onmessage",h):f.attachEvent?f.attachEvent("onmessage",h):y.addEventListener&&y.addEventListener("message",h,!1),"undefined"!=typeof chrome&&chrome.runtime&&chrome.runtime.onMessageExternal&&chrome.runtime.onMessageExternal.addListener(function(e,t){return e.origin=t.url.match(/^.{2,5}:\/\/[^/]+/)[0],null!=n&&n.resolve(),h(e)}),!p&&(-1!==navigator.userAgent.indexOf("MSIE")||navigator.appVersion.indexOf("Trident/")>0)&&(p=f.createElement("iframe"),p.src=u.oauthd_url+"/auth/iframe?d="+encodeURIComponent(a.getAbsUrl("/")),p.width=0,p.height=0,p.frameBorder=0,p.style.visibility="hidden",f.body.appendChild(p)),k=setTimeout(function(){null!=n&&n.reject(new Error("Authorization timed out")),t.callback&&"function"==typeof t.callback&&t.callback(new Error("Authorization timed out"));try{w.close()}catch(e){}},12e5),w=y.open(b,"Authorization",x),w?(w.focus(),g=y.setInterval(function(){return null!==w&&!w.closed||(y.clearInterval(g),v||(null!=n&&n.reject(new Error("The popup was closed")),!t.callback||"function"!=typeof t.callback))?void 0:t.callback(new Error("The popup was closed"))},500)):(null!=n&&n.reject(new Error("Could not open a popup")),t.callback&&"function"==typeof t.callback&&t.callback(new Error("Could not open a popup"))),null!=n?n.promise():void 0)):(null!=n&&n.reject(new Error("OAuth object must be initialized")),null==r?n.promise():r(new Error("OAuth object must be initialized")))},redirect:function(e,t,n){var i,c;return 2===arguments.length&&(n=t,t={}),s.cacheEnabled(t.cache)&&(c=s.tryCache(l,e,t.cache))?(n=a.getAbsUrl(n)+(-1===n.indexOf("#")?"#":"&")+"oauthio=cache",p.changeHref(n),void p.reload()):(t.state||(t.state=o.create_hash(),t.state_type="client"),r.createCookie("oauthio_state",t.state),i=encodeURIComponent(a.getAbsUrl(n)),n=u.oauthd_url+"/auth/"+e+"?k="+u.key,n+="&redirect_uri="+i,t&&(n+="&opts="+encodeURIComponent(JSON.stringify(t))),void p.changeHref(n))},callback:function(e,t,r){var n,o;if(n=i.Deferred(),1===arguments.length&&"function"==typeof e&&(r=e,e=void 0,t={}),1===arguments.length&&"string"==typeof e&&(t={}),2===arguments.length&&"function"==typeof t&&(r=t,t={}),s.cacheEnabled(t.cache)||"cache"===h){if(o=s.tryCache(l,e,t.cache),"cache"===h&&("string"!=typeof e||!e))return null!=n&&n.reject(new Error("You must set a provider when using the cache")),r?r(new Error("You must set a provider when using the cache")):null!=n?n.promise():void 0;if(o){if(!r)return null!=n&&n.resolve(o),null!=n?n.promise():void 0;if(o)return r(null,o)}}return h?(d.request.sendCallback({data:h,provider:e,cache:t.cache,callback:r},n),null!=n?n.promise():void 0):void 0},clearCache:function(e){r.eraseCookie("oauthio_provider_"+e)},http_me:function(e){d.request.http_me&&d.request.http_me(e)},http:function(e){d.request.http&&d.request.http(e)},getVersion:function(){return t.getVersion.apply(this)}}}},{"../tools/cookies":10,"../tools/sha1":13,"./providers":5,"./request":6}],5:[function(e,t){"use strict";var r;r=e("../config"),t.exports=function(e){var t,n,o,i;return t=e.getJquery(),i={},o={},n={execProvidersCb:function(e,t,r){var n,i;if(o[e]){n=o[e],delete o[e];for(i in n)n[i](t,r)}},fetchDescription:function(e){i[e]||(i[e]=!0,t.ajax({url:r.oauthd_api+"/providers/"+e,data:{extend:!0},dataType:"json"}).done(function(t){i[e]=t.data,n.execProvidersCb(e,null,t.data)}).always(function(){"object"!=typeof i[e]&&(delete i[e],n.execProvidersCb(e,new Error("Unable to fetch request description")))}))},getDescription:function(e,t,r){return t=t||{},"object"==typeof i[e]?r(null,i[e]):(i[e]||n.fetchDescription(e),t.wait?(o[e]=o[e]||[],void o[e].push(r)):r(null,{}))}}}},{"../config":1}],6:[function(e,t){"use strict";var r,n,o=[].indexOf||function(e){for(var t=0,r=this.length;r>t;t++)if(t in this&&this[t]===e)return t;return-1};n=e("../tools/url")(),r=e("q"),t.exports=function(e,t,i){var a,s,c,u,f;return a=e.getJquery(),c=e.getConfig(),s=e.getCache(),u=[],f=!1,{retrieveMethods:function(){var e;return e=r.defer(),f?e.resolve(u):a.ajax(c.oauthd_url+"/api/extended-endpoints").then(function(t){return u=t.data,f=!0,e.resolve()}).fail(function(t){return f=!0,e.reject(t)}),e.promise},generateMethods:function(e,t,r){var n,o,i,a,s,c,f;if(null!=u){f=[];for(n in u)s=u[n],i=s.name.split("."),a=e,f.push(function(){var e;e=[];for(o in i)c=i[o],o<i.length-1?(null==a[c]&&(a[c]={}),e.push(a=a[c])):e.push(a[c]=this.mkHttpAll(r,t,s,arguments));return e}.apply(this,arguments));return f}},http:function(e){var t,r,s,u,f;s=function(){var e,t,r,i;if(i=f.oauthio.request||{},!i.cors){f.url=encodeURIComponent(f.url),"/"!==f.url[0]&&(f.url="/"+f.url),f.url=c.oauthd_url+"/request/"+f.oauthio.provider+f.url,f.headers=f.headers||{},f.headers.oauthio="k="+c.key,f.oauthio.tokens.oauth_token&&f.oauthio.tokens.oauth_token_secret&&(f.headers.oauthio+="&oauthv=1");for(t in f.oauthio.tokens)f.headers.oauthio+="&"+encodeURIComponent(t)+"="+encodeURIComponent(f.oauthio.tokens[t]);return delete f.oauthio,a.ajax(f)}if(f.oauthio.tokens){if(f.oauthio.tokens.access_token&&(f.oauthio.tokens.token=f.oauthio.tokens.access_token),f.url.match(/^[a-z]{2,16}:\/\//)||("/"!==f.url[0]&&(f.url="/"+f.url),f.url=i.url+f.url),f.url=n.replaceParam(f.url,f.oauthio.tokens,i.parameters),i.query){r=[];for(e in i.query)r.push(encodeURIComponent(e)+"="+encodeURIComponent(n.replaceParam(i.query[e],f.oauthio.tokens,i.parameters)));f.url+=o.call(f.url,"?")>=0?"&"+r:"?"+r}if(i.headers){f.headers=f.headers||{};for(e in i.headers)f.headers[e]=n.replaceParam(i.headers[e],f.oauthio.tokens,i.parameters)}return delete f.oauthio,a.ajax(f)}},f={},u=void 0;for(u in e)f[u]=e[u];return f.oauthio.request&&f.oauthio.request!==!0?s():(r={wait:!!f.oauthio.request},t=a.Deferred(),i.getDescription(f.oauthio.provider,r,function(e,r){return e?t.reject(e):(f.oauthio.request=f.oauthio.tokens.oauth_token&&f.oauthio.tokens.oauth_token_secret?r.oauth1&&r.oauth1.request:r.oauth2&&r.oauth2.request,void t.resolve())}),t.then(s))},http_me:function(e){var t,r,n,o,s;n=function(){var e,t,r,n;e=a.Deferred(),n=s.oauthio.request||{},s.url=c.oauthd_url+"/auth/"+s.oauthio.provider+"/me",s.headers=s.headers||{},s.headers.oauthio="k="+c.key,s.oauthio.tokens.oauth_token&&s.oauthio.tokens.oauth_token_secret&&(s.headers.oauthio+="&oauthv=1");for(t in s.oauthio.tokens)s.headers.oauthio+="&"+encodeURIComponent(t)+"="+encodeURIComponent(s.oauthio.tokens[t]);return delete s.oauthio,r=a.ajax(s),a.when(r).done(function(t){e.resolve(t.data)}).fail(function(t){e.reject(t.responseJSON?t.responseJSON.data:new Error("An error occured while trying to access the resource"))}),e.promise()},s={};for(o in e)s[o]=e[o];return s.oauthio.request&&s.oauthio.request!==!0?n():(r={wait:!!s.oauthio.request},t=a.Deferred(),i.getDescription(s.oauthio.provider,r,function(e,r){return e?t.reject(e):(s.oauthio.request=s.oauthio.tokens.oauth_token&&s.oauthio.tokens.oauth_token_secret?r.oauth1&&r.oauth1.request:r.oauth2&&r.oauth2.request,void t.resolve())}),t.then(n))},http_all:function(e){var t;return(t=function(){var t,r,n,o;t=a.Deferred(),o=e.oauthio.request||{},e.headers=e.headers||{},e.headers.oauthio="k="+c.key,e.oauthio.tokens.oauth_token&&e.oauthio.tokens.oauth_token_secret&&(e.headers.oauthio+="&oauthv=1");for(r in e.oauthio.tokens)e.headers.oauthio+="&"+encodeURIComponent(r)+"="+encodeURIComponent(e.oauthio.tokens[r]);return delete e.oauthio,n=a.ajax(e),a.when(n).done(function(e){var r;if("string"==typeof e.data)try{e.data=JSON.parse(e.data)}catch(n){r=n,e.data=e.data}finally{t.resolve(e.data)}}).fail(function(e){t.reject(e.responseJSON?e.responseJSON.data:new Error("An error occured while trying to access the resource"))}),t.promise()})()},mkHttp:function(e,t,r,n){var o;return o=this,function(i,a){var s,c;if(c={},"string"==typeof i){if("object"==typeof a)for(s in a)c[s]=a[s];c.url=i}else if("object"==typeof i)for(s in i)c[s]=i[s];return c.type=c.type||n,c.oauthio={provider:e,tokens:t,request:r},o.http(c)}},mkHttpMe:function(e,t,r,n){var o;return o=this,function(i){var a;return a={},a.type=a.type||n,a.oauthio={provider:e,tokens:t,request:r},a.data=a.data||{},a.data.filter=i?i.join(","):void 0,o.http_me(a)}},mkHttpAll:function(e,t,r){var n;return n=this,function(){var o,i,a,s;i={},i.type=r.method,i.url=c.oauthd_url+r.endpoint.replace(":provider",e),i.oauthio={provider:e,tokens:t},i.data={};for(o in arguments)s=arguments[o],a=r.params[o],null!=a&&(i.data[a.name]=s);return i.data=i.data||{},n.http_all(i,r,arguments)}},sendCallback:function(e,r){var n,o,i,a,c,u,f,p,l,h,d;n=this,o=void 0,a=void 0;try{o=JSON.parse(e.data)}catch(v){return i=v,r.reject(new Error("Error while parsing result")),e.callback(new Error("Error while parsing result"))}if(o&&o.provider){if(e.provider&&o.provider.toLowerCase()!==e.provider.toLowerCase())return a=new Error("Returned provider name does not match asked provider"),r.reject(a),e.callback&&"function"==typeof e.callback?e.callback(a):void 0;if("error"===o.status||"fail"===o.status)return a=new Error(o.message),a.body=o.data,r.reject(a),e.callback&&"function"==typeof e.callback?e.callback(a):void 0;if("success"!==o.status||!o.data)return a=new Error,a.body=o.data,r.reject(a),e.callback&&"function"==typeof e.callback?e.callback(a):void 0;o.state=o.state.replace(/\s+/g,"");for(u in t)d=t[u],t[u]=d.replace(/\s+/g,"");if(!o.state||-1===t.indexOf(o.state))return r.reject(new Error("State is not matching")),e.callback&&"function"==typeof e.callback?e.callback(new Error("State is not matching")):void 0;if(e.provider||(o.data.provider=o.provider),l=o.data,l.provider=o.provider.toLowerCase(),s.cacheEnabled(e.cache)&&l&&s.storeCache(o.provider,l),p=l.request,delete l.request,h=void 0,l.access_token?h={access_token:l.access_token}:l.oauth_token&&l.oauth_token_secret&&(h={oauth_token:l.oauth_token,oauth_token_secret:l.oauth_token_secret}),!p)return r.resolve(l),e.callback&&"function"==typeof e.callback?e.callback(null,l):void 0;if(p.required)for(c in p.required)h[p.required[c]]=l[p.required[c]];return f=function(e){return n.mkHttp(o.provider,h,p,e)},l.toJson=function(){var e;return e={},null!=l.access_token&&(e.access_token=l.access_token),null!=l.oauth_token&&(e.oauth_token=l.oauth_token),null!=l.oauth_token_secret&&(e.oauth_token_secret=l.oauth_token_secret),null!=l.expires_in&&(e.expires_in=l.expires_in),null!=l.token_type&&(e.token_type=l.token_type),null!=l.id_token&&(e.id_token=l.id_token),null!=l.provider&&(e.provider=l.provider),null!=l.email&&(e.email=l.email),e},l.get=f("GET"),l.post=f("POST"),l.put=f("PUT"),l.patch=f("PATCH"),l.del=f("DELETE"),l.me=n.mkHttpMe(o.provider,h,p,"GET"),this.retrieveMethods().then(function(t){return function(){return t.generateMethods(l,h,o.provider),r.resolve(l),e.callback&&"function"==typeof e.callback?e.callback(null,l):void 0}}(this)).fail(function(){return function(t){return console.log("Could not retrieve methods",t),r.resolve(l),e.callback&&"function"==typeof e.callback?e.callback(null,l):void 0
}}(this))}}}}},{"../tools/url":14,q:16}],7:[function(e,t){"use strict";t.exports=function(e){var t,r,n,o,i;return t=e.getJquery(),n=e.getConfig(),o=e.getCookies(),i=null,r=function(){function r(e){this.token=e.token,this.data=e.user,this.providers=e.providers,i=this.getEditableData()}return r.prototype.getEditableData=function(){var e,t;e=[];for(t in this.data)-1===["id","email"].indexOf(t)&&e.push({key:t,value:this.data[t]});return e},r.prototype.save=function(){var t,r,o,a,s,c,u,f;for(r={},a=0,c=i.length;c>a;a++)t=i[a],this.data[t.key]!==t.value&&(r[t.key]=this.data[t.key]),null===this.data[t.key]&&delete this.data[t.key];for(o=function(e){var t,r,n;for(r=0,n=i.length;n>r;r++)if(t=i[r],t.key===e)return!0;return!1},f=this.getEditableData(),s=0,u=f.length;u>s;s++)t=f[s],o(t.key)||(r[t.key]=this.data[t.key]);return this.saveLocal(),e.API.put("/api/usermanagement/user?k="+n.key+"&token="+this.token,r)},r.prototype.select=function(){var e;return e=null},r.prototype.saveLocal=function(){var e;return e={token:this.token,user:this.data,providers:this.providers},o.eraseCookie("oio_auth"),o.createCookie("oio_auth",JSON.stringify(e),21600)},r.prototype.hasProvider=function(e){var t;return-1!==(null!=(t=this.providers)?t.indexOf(e):void 0)},r.prototype.getProviders=function(){var r;return r=t.Deferred(),e.API.get("/api/usermanagement/user/providers?k="+n.key+"&token="+this.token).done(function(e){return function(t){return e.providers=t.data,e.saveLocal(),r.resolve(e.providers)}}(this)).fail(function(e){return r.reject(e)}),r.promise()},r.prototype.addProvider=function(r){var o;return o=t.Deferred(),"function"==typeof r.toJson&&(r=r.toJson()),r.email=this.data.email,this.providers.push(r.provider),e.API.post("/api/usermanagement/user/providers?k="+n.key+"&token="+this.token,r).done(function(e){return function(t){return e.data=t.data,e.saveLocal(),o.resolve()}}(this)).fail(function(e){return function(t){return e.providers.splice(e.providers.indexOf(r.provider),1),o.reject(t)}}(this)),o.promise()},r.prototype.removeProvider=function(r){var o;return o=t.Deferred(),this.providers.splice(this.providers.indexOf(r),1),e.API.del("/api/usermanagement/user/providers/"+r+"?k="+n.key+"&token="+this.token).done(function(e){return function(t){return e.saveLocal(),o.resolve(t)}}(this)).fail(function(e){return function(t){return e.providers.push(r),o.reject(t)}}(this)),o.promise()},r.prototype.changePassword=function(t,r){return e.API.post("/api/usermanagement/user/password?k="+n.key+"&token="+this.token,{password:r})},r.prototype.isLoggued=function(){return e.User.isLogged()},r.prototype.logout=function(){var r;return r=t.Deferred(),o.eraseCookie("oio_auth"),e.API.post("/api/usermanagement/user/logout?k="+n.key+"&token="+this.token).done(function(){return r.resolve()}).fail(function(e){return r.reject(e)}),r.promise()},r}(),{initialize:function(t,r){return e.initialize(t,r)},setOAuthdURL:function(t){return e.setOAuthdURL(t)},signup:function(i){var a;return a=t.Deferred(),"function"==typeof i.toJson&&(i=i.toJson()),e.API.post("/api/usermanagement/signup?k="+n.key,i).done(function(e){return o.createCookie("oio_auth",JSON.stringify(e.data),e.data.expires_in||21600),a.resolve(new r(e.data))}).fail(function(e){return a.reject(e)}),a.promise()},signin:function(i,a){var s,c;return s=t.Deferred(),"string"==typeof i||a?e.API.post("/api/usermanagement/signin?k="+n.key,{email:i,password:a}).done(function(e){return o.createCookie("oio_auth",JSON.stringify(e.data),e.data.expires_in||21600),s.resolve(new r(e.data))}).fail(function(e){return s.reject(e)}):(c=i,"function"==typeof c.toJson&&(c=c.toJson()),e.API.post("/api/usermanagement/signin?k="+n.key,c).done(function(e){return o.createCookie("oio_auth",JSON.stringify(e.data),e.data.expires_in||21600),s.resolve(new r(e.data))}).fail(function(e){return s.reject(e)})),s.promise()},confirmResetPassword:function(t,r){return e.API.post("/api/usermanagement/user/password?k="+n.key+"&token="+this.token,{password:t,passwordKey:r})},resetPassword:function(t){return e.API.post("/api/usermanagement/password/reset?k="+n.key,{email:t})},refreshIdentity:function(){var i;return i=t.Deferred(),e.API.get("/api/usermanagement/user?k="+n.key+"&token="+o.readCookie("oio_auth")).done(function(e){return i.resolve(new r(e.data))}).fail(function(e){return i.reject(e)}),i.promise()},getIdentity:function(){return new r(JSON.parse(o.readCookie("oio_auth")))},isLogged:function(){var e;return e=o.readCookie("oio_auth"),e?!0:!1}}}},{}],8:[function(e){!function(){var t,r;return r=e("./tools/jquery-lite.js"),t=e("./lib/core")(window,document,r,navigator),t.extend("OAuth",e("./lib/oauth")),t.extend("API",e("./lib/api")),t.extend("User",e("./lib/user")),"undefined"!=typeof angular&&null!==angular&&angular.module("oauthio",[]).factory("Materia",[function(){return t}]).factory("OAuth",[function(){return t.OAuth}]).factory("User",[function(){return t.User}]),window.Materia=t,window.User=window.Materia.User,window.OAuth=window.Materia.OAuth}()},{"./lib/api":2,"./lib/core":3,"./lib/oauth":4,"./lib/user":7,"./tools/jquery-lite.js":11}],9:[function(e,t){"use strict";t.exports={init:function(e,t){return this.config=t,this.cookies=e},tryCache:function(e,t,r){var n,o,i;if(this.cacheEnabled(r)){if(r=this.cookies.readCookie("oauthio_provider_"+t),!r)return!1;r=decodeURIComponent(r)}if("string"==typeof r)try{r=JSON.parse(r)}catch(a){return n=a,!1}if("object"==typeof r){i={};for(o in r)"request"!==o&&"function"!=typeof r[o]&&(i[o]=r[o]);return e.create(t,i,r.request)}return!1},storeCache:function(e,t){this.cookies.createCookie("oauthio_provider_"+e,encodeURIComponent(JSON.stringify(t)),t.expires_in-10||3600)},cacheEnabled:function(e){return"undefined"==typeof e?this.config.options.cache:e}}},{}],10:[function(e,t){"use strict";t.exports={init:function(e,t){return this.config=e,this.document=t},createCookie:function(e,t,r){var n;this.eraseCookie(e),n=new Date,n.setTime(n.getTime()+1e3*(r||1200)),r="; expires="+n.toGMTString(),this.document.cookie=e+"="+t+r+"; path=/"},readCookie:function(e){var t,r,n,o;for(o=e+"=",r=this.document.cookie.split(";"),n=0;n<r.length;){for(t=r[n];" "===t.charAt(0);)t=t.substring(1,t.length);if(0===t.indexOf(o))return t.substring(o.length,t.length);n++}return null},eraseCookie:function(e){var t;t=new Date,t.setTime(t.getTime()-864e5),this.document.cookie=e+"=; expires="+t.toGMTString()+"; path=/"}}},{}],11:[function(e,t){!function(e,r){"object"==typeof t&&"object"==typeof t.exports?t.exports=e.document?r(e,!0):function(e){if(!e.document)throw new Error("jQuery requires a window with a document");return r(e)}:r(e)}("undefined"!=typeof window?window:this,function(e){function t(e){var t=e.length,r=j.type(e);return"function"===r||j.isWindow(e)?!1:1===e.nodeType&&t?!0:"array"===r||0===t||"number"==typeof t&&t>0&&t-1 in e}function r(e){var t=I[e]={};return j.each(e.match(B)||[],function(e,r){t[r]=!0}),t}function n(){_.removeEventListener("DOMContentLoaded",n,!1),e.removeEventListener("load",n,!1),j.ready()}function o(){Object.defineProperty(this.cache={},0,{get:function(){return{}}}),this.expando=j.expando+Math.random()}function i(e,t,r){var n;if(void 0===r&&1===e.nodeType)if(n="data-"+t.replace(F,"-$1").toLowerCase(),r=e.getAttribute(n),"string"==typeof r){try{r="true"===r?!0:"false"===r?!1:"null"===r?null:+r+""===r?+r:M.test(r)?j.parseJSON(r):r}catch(o){}data_user.set(e,t,r)}else r=void 0;return r}function a(){return!0}function s(){return!1}function c(){try{return _.activeElement}catch(e){}}function u(e){return function(t,r){"string"!=typeof t&&(r=t,t="*");var n,o=0,i=t.toLowerCase().match(B)||[];if(j.isFunction(r))for(;n=i[o++];)"+"===n[0]?(n=n.slice(1)||"*",(e[n]=e[n]||[]).unshift(r)):(e[n]=e[n]||[]).push(r)}}function f(e,t,r,n){function o(s){var c;return i[s]=!0,j.each(e[s]||[],function(e,s){var u=s(t,r,n);return"string"!=typeof u||a||i[u]?a?!(c=u):void 0:(t.dataTypes.unshift(u),o(u),!1)}),c}var i={},a=e===it;return o(t.dataTypes[0])||!i["*"]&&o("*")}function p(e,t){var r,n,o=j.ajaxSettings.flatOptions||{};for(r in t)void 0!==t[r]&&((o[r]?e:n||(n={}))[r]=t[r]);return n&&j.extend(!0,e,n),e}function l(e,t,r){for(var n,o,i,a,s=e.contents,c=e.dataTypes;"*"===c[0];)c.shift(),void 0===n&&(n=e.mimeType||t.getResponseHeader("Content-Type"));if(n)for(o in s)if(s[o]&&s[o].test(n)){c.unshift(o);break}if(c[0]in r)i=c[0];else{for(o in r){if(!c[0]||e.converters[o+" "+c[0]]){i=o;break}a||(a=o)}i=i||a}return i?(i!==c[0]&&c.unshift(i),r[i]):void 0}function h(e,t,r,n){var o,i,a,s,c,u={},f=e.dataTypes.slice();if(f[1])for(a in e.converters)u[a.toLowerCase()]=e.converters[a];for(i=f.shift();i;)if(e.responseFields[i]&&(r[e.responseFields[i]]=t),!c&&n&&e.dataFilter&&(t=e.dataFilter(t,e.dataType)),c=i,i=f.shift())if("*"===i)i=c;else if("*"!==c&&c!==i){if(a=u[c+" "+i]||u["* "+i],!a)for(o in u)if(s=o.split(" "),s[1]===i&&(a=u[c+" "+s[0]]||u["* "+s[0]])){a===!0?a=u[o]:u[o]!==!0&&(i=s[0],f.unshift(s[1]));break}if(a!==!0)if(a&&e["throws"])t=a(t);else try{t=a(t)}catch(p){return{state:"parsererror",error:a?p:"No conversion from "+c+" to "+i}}}return{state:"success",data:t}}function d(e,t,r,n){var o;if(j.isArray(t))j.each(t,function(t,o){r||ut.test(e)?n(e,o):d(e+"["+("object"==typeof o?t:"")+"]",o,r,n)});else if(r||"object"!==j.type(t))n(e,t);else for(o in t)d(e+"["+o+"]",t[o],r,n)}var v=[],g=v.slice,y=v.concat,m=v.push,b=v.indexOf,w={},k=w.toString,x=w.hasOwnProperty,E={},_=e.document,A="2.1.1 -attributes,-attributes/attr,-attributes/classes,-attributes/prop,-attributes/support,-attributes/val,-css/addGetHookIf,-css/curCSS,-css/defaultDisplay,-css/hiddenVisibleSelectors,-css/support,-css/swap,-css/var,-css/var/cssExpand,-css/var/getStyles,-css/var/isHidden,-css/var/rmargin,-css/var/rnumnonpx,-css,-effects,-effects/Tween,-effects/animatedSelector,-dimensions,-offset,-data/var/data_user,-deprecated,-event/alias,-event/support,-intro,-manipulation/_evalUrl,-manipulation/support,-manipulation/var,-manipulation/var/rcheckableType,-manipulation,-outro,-queue,-queue/delay,-selector-native,-selector-sizzle,-sizzle/dist,-sizzle/dist/sizzle,-sizzle/dist/min,-sizzle/test,-sizzle/test/jquery,-traversing,-traversing/findFilter,-traversing/var/rneedsContext,-traversing/var,-wrap,-exports,-exports/amd",j=function(e,t){return new j.fn.init(e,t)},T=/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,C=/^-ms-/,S=/-([\da-z])/gi,R=function(e,t){return t.toUpperCase()};j.fn=j.prototype={jquery:A,constructor:j,selector:"",length:0,toArray:function(){return g.call(this)},get:function(e){return null!=e?0>e?this[e+this.length]:this[e]:g.call(this)},pushStack:function(e){var t=j.merge(this.constructor(),e);return t.prevObject=this,t.context=this.context,t},each:function(e,t){return j.each(this,e,t)},map:function(e){return this.pushStack(j.map(this,function(t,r){return e.call(t,r,t)}))},slice:function(){return this.pushStack(g.apply(this,arguments))},first:function(){return this.eq(0)},last:function(){return this.eq(-1)},eq:function(e){var t=this.length,r=+e+(0>e?t:0);return this.pushStack(r>=0&&t>r?[this[r]]:[])},end:function(){return this.prevObject||this.constructor(null)},push:m,sort:v.sort,splice:v.splice},j.extend=j.fn.extend=function(){var e,t,r,n,o,i,a=arguments[0]||{},s=1,c=arguments.length,u=!1;for("boolean"==typeof a&&(u=a,a=arguments[s]||{},s++),"object"==typeof a||j.isFunction(a)||(a={}),s===c&&(a=this,s--);c>s;s++)if(null!=(e=arguments[s]))for(t in e)r=a[t],n=e[t],a!==n&&(u&&n&&(j.isPlainObject(n)||(o=j.isArray(n)))?(o?(o=!1,i=r&&j.isArray(r)?r:[]):i=r&&j.isPlainObject(r)?r:{},a[t]=j.extend(u,i,n)):void 0!==n&&(a[t]=n));return a},j.extend({expando:"jQuery"+(A+Math.random()).replace(/\D/g,""),isReady:!0,error:function(e){throw new Error(e)},noop:function(){},isFunction:function(e){return"function"===j.type(e)},isArray:Array.isArray,isWindow:function(e){return null!=e&&e===e.window},isNumeric:function(e){return!j.isArray(e)&&e-parseFloat(e)>=0},isPlainObject:function(e){return"object"!==j.type(e)||e.nodeType||j.isWindow(e)?!1:e.constructor&&!x.call(e.constructor.prototype,"isPrototypeOf")?!1:!0},isEmptyObject:function(e){var t;for(t in e)return!1;return!0},type:function(e){return null==e?e+"":"object"==typeof e||"function"==typeof e?w[k.call(e)]||"object":typeof e},globalEval:function(e){var t,r=eval;e=j.trim(e),e&&(1===e.indexOf("use strict")?(t=_.createElement("script"),t.text=e,_.head.appendChild(t).parentNode.removeChild(t)):r(e))},camelCase:function(e){return e.replace(C,"ms-").replace(S,R)},nodeName:function(e,t){return e.nodeName&&e.nodeName.toLowerCase()===t.toLowerCase()},each:function(e,r,n){var o,i=0,a=e.length,s=t(e);if(n){if(s)for(;a>i&&(o=r.apply(e[i],n),o!==!1);i++);else for(i in e)if(o=r.apply(e[i],n),o===!1)break}else if(s)for(;a>i&&(o=r.call(e[i],i,e[i]),o!==!1);i++);else for(i in e)if(o=r.call(e[i],i,e[i]),o===!1)break;return e},trim:function(e){return null==e?"":(e+"").replace(T,"")},makeArray:function(e,r){var n=r||[];return null!=e&&(t(Object(e))?j.merge(n,"string"==typeof e?[e]:e):m.call(n,e)),n},inArray:function(e,t,r){return null==t?-1:b.call(t,e,r)},merge:function(e,t){for(var r=+t.length,n=0,o=e.length;r>n;n++)e[o++]=t[n];return e.length=o,e},grep:function(e,t,r){for(var n,o=[],i=0,a=e.length,s=!r;a>i;i++)n=!t(e[i],i),n!==s&&o.push(e[i]);return o},map:function(e,r,n){var o,i=0,a=e.length,s=t(e),c=[];if(s)for(;a>i;i++)o=r(e[i],i,n),null!=o&&c.push(o);else for(i in e)o=r(e[i],i,n),null!=o&&c.push(o);return y.apply([],c)},guid:1,proxy:function(e,t){var r,n,o;return"string"==typeof t&&(r=e[t],t=e,e=r),j.isFunction(e)?(n=g.call(arguments,2),o=function(){return e.apply(t||this,n.concat(g.call(arguments)))},o.guid=e.guid=e.guid||j.guid++,o):void 0},now:Date.now,support:E}),j.each("Boolean Number String Function Array Date RegExp Object Error".split(" "),function(e,t){w["[object "+t+"]"]=t.toLowerCase()});var L,U=/^<(\w+)\s*\/?>(?:<\/\1>|)$/,P=/^(?:\s*(<[\w\W]+>)[^>]*|#([\w-]*))$/,O=j.fn.init=function(e,t){var r,n;if(!e)return this;if("string"==typeof e){if(r="<"===e[0]&&">"===e[e.length-1]&&e.length>=3?[null,e,null]:P.exec(e),!r||!r[1]&&t)return!t||t.jquery?(t||L).find(e):this.constructor(t).find(e);if(r[1]){if(t=t instanceof j?t[0]:t,j.merge(this,j.parseHTML(r[1],t&&t.nodeType?t.ownerDocument||t:_,!0)),U.test(r[1])&&j.isPlainObject(t))for(r in t)j.isFunction(this[r])?this[r](t[r]):this.attr(r,t[r]);return this}return n=_.getElementById(r[2]),n&&n.parentNode&&(this.length=1,this[0]=n),this.context=_,this.selector=e,this}return e.nodeType?(this.context=this[0]=e,this.length=1,this):j.isFunction(e)?"undefined"!=typeof L.ready?L.ready(e):e(j):(void 0!==e.selector&&(this.selector=e.selector,this.context=e.context),j.makeArray(e,this))};O.prototype=j.fn,L=j(_);var B=/\S+/g,I={};j.Callbacks=function(e){e="string"==typeof e?I[e]||r(e):j.extend({},e);var t,n,o,i,a,s,c=[],u=!e.once&&[],f=function(r){for(t=e.memory&&r,n=!0,s=i||0,i=0,a=c.length,o=!0;c&&a>s;s++)if(c[s].apply(r[0],r[1])===!1&&e.stopOnFalse){t=!1;break}o=!1,c&&(u?u.length&&f(u.shift()):t?c=[]:p.disable())},p={add:function(){if(c){var r=c.length;!function n(t){j.each(t,function(t,r){var o=j.type(r);"function"===o?e.unique&&p.has(r)||c.push(r):r&&r.length&&"string"!==o&&n(r)})}(arguments),o?a=c.length:t&&(i=r,f(t))}return this},remove:function(){return c&&j.each(arguments,function(e,t){for(var r;(r=j.inArray(t,c,r))>-1;)c.splice(r,1),o&&(a>=r&&a--,s>=r&&s--)}),this},has:function(e){return e?j.inArray(e,c)>-1:!(!c||!c.length)},empty:function(){return c=[],a=0,this},disable:function(){return c=u=t=void 0,this},disabled:function(){return!c},lock:function(){return u=void 0,t||p.disable(),this},locked:function(){return!u},fireWith:function(e,t){return!c||n&&!u||(t=t||[],t=[e,t.slice?t.slice():t],o?u.push(t):f(t)),this},fire:function(){return p.fireWith(this,arguments),this},fired:function(){return!!n}};return p},j.extend({Deferred:function(e){var t=[["resolve","done",j.Callbacks("once memory"),"resolved"],["reject","fail",j.Callbacks("once memory"),"rejected"],["notify","progress",j.Callbacks("memory")]],r="pending",n={state:function(){return r},always:function(){return o.done(arguments).fail(arguments),this},then:function(){var e=arguments;return j.Deferred(function(r){j.each(t,function(t,i){var a=j.isFunction(e[t])&&e[t];o[i[1]](function(){var e=a&&a.apply(this,arguments);e&&j.isFunction(e.promise)?e.promise().done(r.resolve).fail(r.reject).progress(r.notify):r[i[0]+"With"](this===n?r.promise():this,a?[e]:arguments)})}),e=null}).promise()},promise:function(e){return null!=e?j.extend(e,n):n}},o={};return n.pipe=n.then,j.each(t,function(e,i){var a=i[2],s=i[3];n[i[1]]=a.add,s&&a.add(function(){r=s},t[1^e][2].disable,t[2][2].lock),o[i[0]]=function(){return o[i[0]+"With"](this===o?n:this,arguments),this},o[i[0]+"With"]=a.fireWith}),n.promise(o),e&&e.call(o,o),o},when:function(e){var t,r,n,o=0,i=g.call(arguments),a=i.length,s=1!==a||e&&j.isFunction(e.promise)?a:0,c=1===s?e:j.Deferred(),u=function(e,r,n){return function(o){r[e]=this,n[e]=arguments.length>1?g.call(arguments):o,n===t?c.notifyWith(r,n):--s||c.resolveWith(r,n)}};if(a>1)for(t=new Array(a),r=new Array(a),n=new Array(a);a>o;o++)i[o]&&j.isFunction(i[o].promise)?i[o].promise().done(u(o,n,i)).fail(c.reject).progress(u(o,r,t)):--s;return s||c.resolveWith(n,i),c.promise()}});var N;j.fn.ready=function(e){return j.ready.promise().done(e),this},j.extend({isReady:!1,readyWait:1,holdReady:function(e){e?j.readyWait++:j.ready(!0)},ready:function(e){(e===!0?--j.readyWait:j.isReady)||(j.isReady=!0,e!==!0&&--j.readyWait>0||(N.resolveWith(_,[j]),j.fn.triggerHandler&&(j(_).triggerHandler("ready"),j(_).off("ready"))))}}),j.ready.promise=function(t){return N||(N=j.Deferred(),"complete"===_.readyState?setTimeout(j.ready):(_.addEventListener("DOMContentLoaded",n,!1),e.addEventListener("load",n,!1))),N.promise(t)},j.ready.promise();var D=j.access=function(e,t,r,n,o,i,a){var s=0,c=e.length,u=null==r;if("object"===j.type(r)){o=!0;for(s in r)j.access(e,t,s,r[s],!0,i,a)}else if(void 0!==n&&(o=!0,j.isFunction(n)||(a=!0),u&&(a?(t.call(e,n),t=null):(u=t,t=function(e,t,r){return u.call(j(e),r)})),t))for(;c>s;s++)t(e[s],r,a?n:n.call(e[s],s,t(e[s],r)));return o?e:u?t.call(e):c?t(e[0],r):i};j.acceptData=function(e){return 1===e.nodeType||9===e.nodeType||!+e.nodeType},o.uid=1,o.accepts=j.acceptData,o.prototype={key:function(e){if(!o.accepts(e))return 0;var t={},r=e[this.expando];if(!r){r=o.uid++;try{t[this.expando]={value:r},Object.defineProperties(e,t)}catch(n){t[this.expando]=r,j.extend(e,t)}}return this.cache[r]||(this.cache[r]={}),r},set:function(e,t,r){var n,o=this.key(e),i=this.cache[o];if("string"==typeof t)i[t]=r;else if(j.isEmptyObject(i))j.extend(this.cache[o],t);else for(n in t)i[n]=t[n];return i},get:function(e,t){var r=this.cache[this.key(e)];return void 0===t?r:r[t]},access:function(e,t,r){var n;return void 0===t||t&&"string"==typeof t&&void 0===r?(n=this.get(e,t),void 0!==n?n:this.get(e,j.camelCase(t))):(this.set(e,t,r),void 0!==r?r:t)},remove:function(e,t){var r,n,o,i=this.key(e),a=this.cache[i];if(void 0===t)this.cache[i]={};else{j.isArray(t)?n=t.concat(t.map(j.camelCase)):(o=j.camelCase(t),t in a?n=[t,o]:(n=o,n=n in a?[n]:n.match(B)||[])),r=n.length;for(;r--;)delete a[n[r]]}},hasData:function(e){return!j.isEmptyObject(this.cache[e[this.expando]]||{})},discard:function(e){e[this.expando]&&delete this.cache[e[this.expando]]}};var q=new o,M=/^(?:\{[\w\W]*\}|\[[\w\W]*\])$/,F=/([A-Z])/g;j.extend({hasData:function(e){return data_user.hasData(e)||q.hasData(e)},data:function(e,t,r){return data_user.access(e,t,r)},removeData:function(e,t){data_user.remove(e,t)},_data:function(e,t,r){return q.access(e,t,r)},_removeData:function(e,t){q.remove(e,t)}}),j.fn.extend({data:function(e,t){var r,n,o,a=this[0],s=a&&a.attributes;if(void 0===e){if(this.length&&(o=data_user.get(a),1===a.nodeType&&!q.get(a,"hasDataAttrs"))){for(r=s.length;r--;)s[r]&&(n=s[r].name,0===n.indexOf("data-")&&(n=j.camelCase(n.slice(5)),i(a,n,o[n])));q.set(a,"hasDataAttrs",!0)}return o}return"object"==typeof e?this.each(function(){data_user.set(this,e)}):D(this,function(t){var r,n=j.camelCase(e);if(a&&void 0===t){if(r=data_user.get(a,e),void 0!==r)return r;if(r=data_user.get(a,n),void 0!==r)return r;if(r=i(a,n,void 0),void 0!==r)return r}else this.each(function(){var r=data_user.get(this,n);data_user.set(this,n,t),-1!==e.indexOf("-")&&void 0!==r&&data_user.set(this,e,t)})},null,t,arguments.length>1,null,!0)},removeData:function(e){return this.each(function(){data_user.remove(this,e)})}});var H=(/[+-]?(?:\d*\.|)\d+(?:[eE][+-]?\d+|)/.source,"undefined"),J=/^key/,Y=/^(?:mouse|pointer|contextmenu)|click/,V=/^(?:focusinfocus|focusoutblur)$/,W=/^([^.]*)(?:\.(.+)|)$/;j.event={global:{},add:function(e,t,r,n,o){var i,a,s,c,u,f,p,l,h,d,v,g=q.get(e);if(g)for(r.handler&&(i=r,r=i.handler,o=i.selector),r.guid||(r.guid=j.guid++),(c=g.events)||(c=g.events={}),(a=g.handle)||(a=g.handle=function(t){return typeof j!==H&&j.event.triggered!==t.type?j.event.dispatch.apply(e,arguments):void 0}),t=(t||"").match(B)||[""],u=t.length;u--;)s=W.exec(t[u])||[],h=v=s[1],d=(s[2]||"").split(".").sort(),h&&(p=j.event.special[h]||{},h=(o?p.delegateType:p.bindType)||h,p=j.event.special[h]||{},f=j.extend({type:h,origType:v,data:n,handler:r,guid:r.guid,selector:o,needsContext:o&&j.expr.match.needsContext.test(o),namespace:d.join(".")},i),(l=c[h])||(l=c[h]=[],l.delegateCount=0,p.setup&&p.setup.call(e,n,d,a)!==!1||e.addEventListener&&e.addEventListener(h,a,!1)),p.add&&(p.add.call(e,f),f.handler.guid||(f.handler.guid=r.guid)),o?l.splice(l.delegateCount++,0,f):l.push(f),j.event.global[h]=!0)},remove:function(e,t,r,n,o){var i,a,s,c,u,f,p,l,h,d,v,g=q.hasData(e)&&q.get(e);if(g&&(c=g.events)){for(t=(t||"").match(B)||[""],u=t.length;u--;)if(s=W.exec(t[u])||[],h=v=s[1],d=(s[2]||"").split(".").sort(),h){for(p=j.event.special[h]||{},h=(n?p.delegateType:p.bindType)||h,l=c[h]||[],s=s[2]&&new RegExp("(^|\\.)"+d.join("\\.(?:.*\\.|)")+"(\\.|$)"),a=i=l.length;i--;)f=l[i],!o&&v!==f.origType||r&&r.guid!==f.guid||s&&!s.test(f.namespace)||n&&n!==f.selector&&("**"!==n||!f.selector)||(l.splice(i,1),f.selector&&l.delegateCount--,p.remove&&p.remove.call(e,f));a&&!l.length&&(p.teardown&&p.teardown.call(e,d,g.handle)!==!1||j.removeEvent(e,h,g.handle),delete c[h])}else for(h in c)j.event.remove(e,h+t[u],r,n,!0);j.isEmptyObject(c)&&(delete g.handle,q.remove(e,"events"))}},trigger:function(t,r,n,o){var i,a,s,c,u,f,p,l=[n||_],h=x.call(t,"type")?t.type:t,d=x.call(t,"namespace")?t.namespace.split("."):[];if(a=s=n=n||_,3!==n.nodeType&&8!==n.nodeType&&!V.test(h+j.event.triggered)&&(h.indexOf(".")>=0&&(d=h.split("."),h=d.shift(),d.sort()),u=h.indexOf(":")<0&&"on"+h,t=t[j.expando]?t:new j.Event(h,"object"==typeof t&&t),t.isTrigger=o?2:3,t.namespace=d.join("."),t.namespace_re=t.namespace?new RegExp("(^|\\.)"+d.join("\\.(?:.*\\.|)")+"(\\.|$)"):null,t.result=void 0,t.target||(t.target=n),r=null==r?[t]:j.makeArray(r,[t]),p=j.event.special[h]||{},o||!p.trigger||p.trigger.apply(n,r)!==!1)){if(!o&&!p.noBubble&&!j.isWindow(n)){for(c=p.delegateType||h,V.test(c+h)||(a=a.parentNode);a;a=a.parentNode)l.push(a),s=a;s===(n.ownerDocument||_)&&l.push(s.defaultView||s.parentWindow||e)}for(i=0;(a=l[i++])&&!t.isPropagationStopped();)t.type=i>1?c:p.bindType||h,f=(q.get(a,"events")||{})[t.type]&&q.get(a,"handle"),f&&f.apply(a,r),f=u&&a[u],f&&f.apply&&j.acceptData(a)&&(t.result=f.apply(a,r),t.result===!1&&t.preventDefault());return t.type=h,o||t.isDefaultPrevented()||p._default&&p._default.apply(l.pop(),r)!==!1||!j.acceptData(n)||u&&j.isFunction(n[h])&&!j.isWindow(n)&&(s=n[u],s&&(n[u]=null),j.event.triggered=h,n[h](),j.event.triggered=void 0,s&&(n[u]=s)),t.result}},dispatch:function(e){e=j.event.fix(e);var t,r,n,o,i,a=[],s=g.call(arguments),c=(q.get(this,"events")||{})[e.type]||[],u=j.event.special[e.type]||{};if(s[0]=e,e.delegateTarget=this,!u.preDispatch||u.preDispatch.call(this,e)!==!1){for(a=j.event.handlers.call(this,e,c),t=0;(o=a[t++])&&!e.isPropagationStopped();)for(e.currentTarget=o.elem,r=0;(i=o.handlers[r++])&&!e.isImmediatePropagationStopped();)(!e.namespace_re||e.namespace_re.test(i.namespace))&&(e.handleObj=i,e.data=i.data,n=((j.event.special[i.origType]||{}).handle||i.handler).apply(o.elem,s),void 0!==n&&(e.result=n)===!1&&(e.preventDefault(),e.stopPropagation()));return u.postDispatch&&u.postDispatch.call(this,e),e.result}},handlers:function(e,t){var r,n,o,i,a=[],s=t.delegateCount,c=e.target;if(s&&c.nodeType&&(!e.button||"click"!==e.type))for(;c!==this;c=c.parentNode||this)if(c.disabled!==!0||"click"!==e.type){for(n=[],r=0;s>r;r++)i=t[r],o=i.selector+" ",void 0===n[o]&&(n[o]=i.needsContext?j(o,this).index(c)>=0:j.find(o,this,null,[c]).length),n[o]&&n.push(i);n.length&&a.push({elem:c,handlers:n})}return s<t.length&&a.push({elem:this,handlers:t.slice(s)}),a},props:"altKey bubbles cancelable ctrlKey currentTarget eventPhase metaKey relatedTarget shiftKey target timeStamp view which".split(" "),fixHooks:{},keyHooks:{props:"char charCode key keyCode".split(" "),filter:function(e,t){return null==e.which&&(e.which=null!=t.charCode?t.charCode:t.keyCode),e}},mouseHooks:{props:"button buttons clientX clientY offsetX offsetY pageX pageY screenX screenY toElement".split(" "),filter:function(e,t){var r,n,o,i=t.button;return null==e.pageX&&null!=t.clientX&&(r=e.target.ownerDocument||_,n=r.documentElement,o=r.body,e.pageX=t.clientX+(n&&n.scrollLeft||o&&o.scrollLeft||0)-(n&&n.clientLeft||o&&o.clientLeft||0),e.pageY=t.clientY+(n&&n.scrollTop||o&&o.scrollTop||0)-(n&&n.clientTop||o&&o.clientTop||0)),e.which||void 0===i||(e.which=1&i?1:2&i?3:4&i?2:0),e}},fix:function(e){if(e[j.expando])return e;var t,r,n,o=e.type,i=e,a=this.fixHooks[o];for(a||(this.fixHooks[o]=a=Y.test(o)?this.mouseHooks:J.test(o)?this.keyHooks:{}),n=a.props?this.props.concat(a.props):this.props,e=new j.Event(i),t=n.length;t--;)r=n[t],e[r]=i[r];return e.target||(e.target=_),3===e.target.nodeType&&(e.target=e.target.parentNode),a.filter?a.filter(e,i):e},special:{load:{noBubble:!0},focus:{trigger:function(){return this!==c()&&this.focus?(this.focus(),!1):void 0},delegateType:"focusin"},blur:{trigger:function(){return this===c()&&this.blur?(this.blur(),!1):void 0},delegateType:"focusout"},click:{trigger:function(){return"checkbox"===this.type&&this.click&&j.nodeName(this,"input")?(this.click(),!1):void 0},_default:function(e){return j.nodeName(e.target,"a")}},beforeunload:{postDispatch:function(e){void 0!==e.result&&e.originalEvent&&(e.originalEvent.returnValue=e.result)}}},simulate:function(e,t,r,n){var o=j.extend(new j.Event,r,{type:e,isSimulated:!0,originalEvent:{}});n?j.event.trigger(o,null,t):j.event.dispatch.call(t,o),o.isDefaultPrevented()&&r.preventDefault()}},j.removeEvent=function(e,t,r){e.removeEventListener&&e.removeEventListener(t,r,!1)},j.Event=function(e,t){return this instanceof j.Event?(e&&e.type?(this.originalEvent=e,this.type=e.type,this.isDefaultPrevented=e.defaultPrevented||void 0===e.defaultPrevented&&e.returnValue===!1?a:s):this.type=e,t&&j.extend(this,t),this.timeStamp=e&&e.timeStamp||j.now(),void(this[j.expando]=!0)):new j.Event(e,t)},j.Event.prototype={isDefaultPrevented:s,isPropagationStopped:s,isImmediatePropagationStopped:s,preventDefault:function(){var e=this.originalEvent;this.isDefaultPrevented=a,e&&e.preventDefault&&e.preventDefault()},stopPropagation:function(){var e=this.originalEvent;this.isPropagationStopped=a,e&&e.stopPropagation&&e.stopPropagation()},stopImmediatePropagation:function(){var e=this.originalEvent;this.isImmediatePropagationStopped=a,e&&e.stopImmediatePropagation&&e.stopImmediatePropagation(),this.stopPropagation()}},j.each({mouseenter:"mouseover",mouseleave:"mouseout",pointerenter:"pointerover",pointerleave:"pointerout"},function(e,t){j.event.special[e]={delegateType:t,bindType:t,handle:function(e){var r,n=this,o=e.relatedTarget,i=e.handleObj;return(!o||o!==n&&!j.contains(n,o))&&(e.type=i.origType,r=i.handler.apply(this,arguments),e.type=t),r}}}),E.focusinBubbles||j.each({focus:"focusin",blur:"focusout"},function(e,t){var r=function(e){j.event.simulate(t,e.target,j.event.fix(e),!0)};j.event.special[t]={setup:function(){var n=this.ownerDocument||this,o=q.access(n,t);o||n.addEventListener(e,r,!0),q.access(n,t,(o||0)+1)},teardown:function(){var n=this.ownerDocument||this,o=q.access(n,t)-1;o?q.access(n,t,o):(n.removeEventListener(e,r,!0),q.remove(n,t))}}}),j.fn.extend({on:function(e,t,r,n,o){var i,a;if("object"==typeof e){"string"!=typeof t&&(r=r||t,t=void 0);for(a in e)this.on(a,t,r,e[a],o);return this}if(null==r&&null==n?(n=t,r=t=void 0):null==n&&("string"==typeof t?(n=r,r=void 0):(n=r,r=t,t=void 0)),n===!1)n=s;else if(!n)return this;return 1===o&&(i=n,n=function(e){return j().off(e),i.apply(this,arguments)},n.guid=i.guid||(i.guid=j.guid++)),this.each(function(){j.event.add(this,e,n,r,t)})},one:function(e,t,r,n){return this.on(e,t,r,n,1)},off:function(e,t,r){var n,o;if(e&&e.preventDefault&&e.handleObj)return n=e.handleObj,j(e.delegateTarget).off(n.namespace?n.origType+"."+n.namespace:n.origType,n.selector,n.handler),this;if("object"==typeof e){for(o in e)this.off(o,t,e[o]);return this}return(t===!1||"function"==typeof t)&&(r=t,t=void 0),r===!1&&(r=s),this.each(function(){j.event.remove(this,e,r,t)})},trigger:function(e,t){return this.each(function(){j.event.trigger(e,t,this)})},triggerHandler:function(e,t){var r=this[0];return r?j.event.trigger(e,t,r,!0):void 0}});var z=j.now(),$=/\?/;j.parseJSON=function(e){return JSON.parse(e+"")},j.parseXML=function(e){var t,r;if(!e||"string"!=typeof e)return null;try{r=new DOMParser,t=r.parseFromString(e,"text/xml")}catch(n){t=void 0}return(!t||t.getElementsByTagName("parsererror").length)&&j.error("Invalid XML: "+e),t};var X,K,G=/#.*$/,Q=/([?&])_=[^&]*/,Z=/^(.*?):[ \t]*([^\r\n]*)$/gm,et=/^(?:about|app|app-storage|.+-extension|file|res|widget):$/,tt=/^(?:GET|HEAD)$/,rt=/^\/\//,nt=/^([\w.+-]+:)(?:\/\/(?:[^\/?#]*@|)([^\/?#:]*)(?::(\d+)|)|)/,ot={},it={},at="*/".concat("*");try{K=location.href}catch(st){K=_.createElement("a"),K.href="",K=K.href}X=nt.exec(K.toLowerCase())||[],j.extend({active:0,lastModified:{},etag:{},ajaxSettings:{url:K,type:"GET",isLocal:et.test(X[1]),global:!0,processData:!0,async:!0,contentType:"application/x-www-form-urlencoded; charset=UTF-8",accepts:{"*":at,text:"text/plain",html:"text/html",xml:"application/xml, text/xml",json:"application/json, text/javascript"},contents:{xml:/xml/,html:/html/,json:/json/},responseFields:{xml:"responseXML",text:"responseText",json:"responseJSON"},converters:{"* text":String,"text html":!0,"text json":j.parseJSON,"text xml":j.parseXML},flatOptions:{url:!0,context:!0}},ajaxSetup:function(e,t){return t?p(p(e,j.ajaxSettings),t):p(j.ajaxSettings,e)},ajaxPrefilter:u(ot),ajaxTransport:u(it),ajax:function(e,t){function r(e,t,r,a){var c,f,p,w,k,E=t;2!==x&&(x=2,s&&clearTimeout(s),n=void 0,i=a||"",_.readyState=e>0?4:0,c=e>=200&&300>e||304===e,r&&(w=l(d,_,r)),w=h(d,w,_,c),c?(d.ifModified&&(k=_.getResponseHeader("Last-Modified"),k&&(j.lastModified[o]=k),k=_.getResponseHeader("etag"),k&&(j.etag[o]=k)),204===e||"HEAD"===d.type?E="nocontent":304===e?E="notmodified":(E=w.state,f=w.data,p=w.error,c=!p)):(p=E,(e||!E)&&(E="error",0>e&&(e=0))),_.status=e,_.statusText=(t||E)+"",c?y.resolveWith(v,[f,E,_]):y.rejectWith(v,[_,E,p]),_.statusCode(b),b=void 0,u&&g.trigger(c?"ajaxSuccess":"ajaxError",[_,d,c?f:p]),m.fireWith(v,[_,E]),u&&(g.trigger("ajaxComplete",[_,d]),--j.active||j.event.trigger("ajaxStop")))}"object"==typeof e&&(t=e,e=void 0),t=t||{};var n,o,i,a,s,c,u,p,d=j.ajaxSetup({},t),v=d.context||d,g=d.context&&(v.nodeType||v.jquery)?j(v):j.event,y=j.Deferred(),m=j.Callbacks("once memory"),b=d.statusCode||{},w={},k={},x=0,E="canceled",_={readyState:0,getResponseHeader:function(e){var t;if(2===x){if(!a)for(a={};t=Z.exec(i);)a[t[1].toLowerCase()]=t[2];t=a[e.toLowerCase()]}return null==t?null:t},getAllResponseHeaders:function(){return 2===x?i:null},setRequestHeader:function(e,t){var r=e.toLowerCase();return x||(e=k[r]=k[r]||e,w[e]=t),this},overrideMimeType:function(e){return x||(d.mimeType=e),this},statusCode:function(e){var t;
if(e)if(2>x)for(t in e)b[t]=[b[t],e[t]];else _.always(e[_.status]);return this},abort:function(e){var t=e||E;return n&&n.abort(t),r(0,t),this}};if(y.promise(_).complete=m.add,_.success=_.done,_.error=_.fail,d.url=((e||d.url||K)+"").replace(G,"").replace(rt,X[1]+"//"),d.type=t.method||t.type||d.method||d.type,d.dataTypes=j.trim(d.dataType||"*").toLowerCase().match(B)||[""],null==d.crossDomain&&(c=nt.exec(d.url.toLowerCase()),d.crossDomain=!(!c||c[1]===X[1]&&c[2]===X[2]&&(c[3]||("http:"===c[1]?"80":"443"))===(X[3]||("http:"===X[1]?"80":"443")))),d.data&&d.processData&&"string"!=typeof d.data&&(d.data=j.param(d.data,d.traditional)),f(ot,d,t,_),2===x)return _;u=d.global,u&&0===j.active++&&j.event.trigger("ajaxStart"),d.type=d.type.toUpperCase(),d.hasContent=!tt.test(d.type),o=d.url,d.hasContent||(d.data&&(o=d.url+=($.test(o)?"&":"?")+d.data,delete d.data),d.cache===!1&&(d.url=Q.test(o)?o.replace(Q,"$1_="+z++):o+($.test(o)?"&":"?")+"_="+z++)),d.ifModified&&(j.lastModified[o]&&_.setRequestHeader("If-Modified-Since",j.lastModified[o]),j.etag[o]&&_.setRequestHeader("If-None-Match",j.etag[o])),(d.data&&d.hasContent&&d.contentType!==!1||t.contentType)&&_.setRequestHeader("Content-Type",d.contentType),_.setRequestHeader("Accept",d.dataTypes[0]&&d.accepts[d.dataTypes[0]]?d.accepts[d.dataTypes[0]]+("*"!==d.dataTypes[0]?", "+at+"; q=0.01":""):d.accepts["*"]);for(p in d.headers)_.setRequestHeader(p,d.headers[p]);if(d.beforeSend&&(d.beforeSend.call(v,_,d)===!1||2===x))return _.abort();E="abort";for(p in{success:1,error:1,complete:1})_[p](d[p]);if(n=f(it,d,t,_)){_.readyState=1,u&&g.trigger("ajaxSend",[_,d]),d.async&&d.timeout>0&&(s=setTimeout(function(){_.abort("timeout")},d.timeout));try{x=1,n.send(w,r)}catch(A){if(!(2>x))throw A;r(-1,A)}}else r(-1,"No Transport");return _},getJSON:function(e,t,r){return j.get(e,t,r,"json")},getScript:function(e,t){return j.get(e,void 0,t,"script")}}),j.each(["get","post"],function(e,t){j[t]=function(e,r,n,o){return j.isFunction(r)&&(o=o||n,n=r,r=void 0),j.ajax({url:e,type:t,dataType:o,data:r,success:n})}}),j.each(["ajaxStart","ajaxStop","ajaxComplete","ajaxError","ajaxSuccess","ajaxSend"],function(e,t){j.fn[t]=function(e){return this.on(t,e)}});var ct=/%20/g,ut=/\[\]$/,ft=/\r?\n/g,pt=/^(?:submit|button|image|reset|file)$/i,lt=/^(?:input|select|textarea|keygen)/i;j.param=function(e,t){var r,n=[],o=function(e,t){t=j.isFunction(t)?t():null==t?"":t,n[n.length]=encodeURIComponent(e)+"="+encodeURIComponent(t)};if(void 0===t&&(t=j.ajaxSettings&&j.ajaxSettings.traditional),j.isArray(e)||e.jquery&&!j.isPlainObject(e))j.each(e,function(){o(this.name,this.value)});else for(r in e)d(r,e[r],t,o);return n.join("&").replace(ct,"+")},j.fn.extend({serialize:function(){return j.param(this.serializeArray())},serializeArray:function(){return this.map(function(){var e=j.prop(this,"elements");return e?j.makeArray(e):this}).filter(function(){var e=this.type;return this.name&&!j(this).is(":disabled")&&lt.test(this.nodeName)&&!pt.test(e)&&(this.checked||!rcheckableType.test(e))}).map(function(e,t){var r=j(this).val();return null==r?null:j.isArray(r)?j.map(r,function(e){return{name:t.name,value:e.replace(ft,"\r\n")}}):{name:t.name,value:r.replace(ft,"\r\n")}}).get()}}),j.ajaxSettings.xhr=function(){try{return new XMLHttpRequest}catch(e){}};var ht=0,dt={},vt={0:200,1223:204},gt=j.ajaxSettings.xhr();e.ActiveXObject&&j(e).on("unload",function(){for(var e in dt)dt[e]()}),E.cors=!!gt&&"withCredentials"in gt,E.ajax=gt=!!gt,j.ajaxTransport(function(e){var t;return E.cors||gt&&!e.crossDomain?{send:function(r,n){var o,i=e.xhr(),a=++ht;if(i.open(e.type,e.url,e.async,e.username,e.password),e.xhrFields)for(o in e.xhrFields)i[o]=e.xhrFields[o];e.mimeType&&i.overrideMimeType&&i.overrideMimeType(e.mimeType),e.crossDomain||r["X-Requested-With"]||(r["X-Requested-With"]="XMLHttpRequest");for(o in r)i.setRequestHeader(o,r[o]);t=function(e){return function(){t&&(delete dt[a],t=i.onload=i.onerror=null,"abort"===e?i.abort():"error"===e?n(i.status,i.statusText):n(vt[i.status]||i.status,i.statusText,"string"==typeof i.responseText?{text:i.responseText}:void 0,i.getAllResponseHeaders()))}},i.onload=t(),i.onerror=t("error"),t=dt[a]=t("abort");try{i.send(e.hasContent&&e.data||null)}catch(s){if(t)throw s}},abort:function(){t&&t()}}:void 0}),j.ajaxSetup({accepts:{script:"text/javascript, application/javascript, application/ecmascript, application/x-ecmascript"},contents:{script:/(?:java|ecma)script/},converters:{"text script":function(e){return j.globalEval(e),e}}}),j.ajaxPrefilter("script",function(e){void 0===e.cache&&(e.cache=!1),e.crossDomain&&(e.type="GET")}),j.ajaxTransport("script",function(e){if(e.crossDomain){var t,r;return{send:function(n,o){t=j("<script>").prop({async:!0,charset:e.scriptCharset,src:e.url}).on("load error",r=function(e){t.remove(),r=null,e&&o("error"===e.type?404:200,e.type)}),_.head.appendChild(t[0])},abort:function(){r&&r()}}}});var yt=[],mt=/(=)\?(?=&|$)|\?\?/;j.ajaxSetup({jsonp:"callback",jsonpCallback:function(){var e=yt.pop()||j.expando+"_"+z++;return this[e]=!0,e}}),j.ajaxPrefilter("json jsonp",function(t,r,n){var o,i,a,s=t.jsonp!==!1&&(mt.test(t.url)?"url":"string"==typeof t.data&&!(t.contentType||"").indexOf("application/x-www-form-urlencoded")&&mt.test(t.data)&&"data");return s||"jsonp"===t.dataTypes[0]?(o=t.jsonpCallback=j.isFunction(t.jsonpCallback)?t.jsonpCallback():t.jsonpCallback,s?t[s]=t[s].replace(mt,"$1"+o):t.jsonp!==!1&&(t.url+=($.test(t.url)?"&":"?")+t.jsonp+"="+o),t.converters["script json"]=function(){return a||j.error(o+" was not called"),a[0]},t.dataTypes[0]="json",i=e[o],e[o]=function(){a=arguments},n.always(function(){e[o]=i,t[o]&&(t.jsonpCallback=r.jsonpCallback,yt.push(o)),a&&j.isFunction(i)&&i(a[0]),a=i=void 0}),"script"):void 0}),j.parseHTML=function(e,t,r){if(!e||"string"!=typeof e)return null;"boolean"==typeof t&&(r=t,t=!1),t=t||_;var n=U.exec(e),o=!r&&[];return n?[t.createElement(n[1])]:(n=j.buildFragment([e],t,o),o&&o.length&&j(o).remove(),j.merge([],n.childNodes))};var bt=j.fn.load;return j.fn.load=function(e,t,r){if("string"!=typeof e&&bt)return bt.apply(this,arguments);var n,o,i,a=this,s=e.indexOf(" ");return s>=0&&(n=j.trim(e.slice(s)),e=e.slice(0,s)),j.isFunction(t)?(r=t,t=void 0):t&&"object"==typeof t&&(o="POST"),a.length>0&&j.ajax({url:e,type:o,dataType:"html",data:t}).done(function(e){i=arguments,a.html(n?j("<div>").append(j.parseHTML(e)).find(n):e)}).complete(r&&function(e,t){a.each(r,i||[e.responseText,t,e])}),this},j.noConflict=function(){},j})},{}],12:[function(e,t){"use strict";t.exports=function(e){return{reload:function(){return e.location.reload()},getHash:function(){return e.location.hash},setHash:function(t){return e.location.hash=t},changeHref:function(t){return e.location.href=t}}}},{}],13:[function(e,t){var r,n;n=0,r="",t.exports={hex_sha1:function(e){return this.rstr2hex(this.rstr_sha1(this.str2rstr_utf8(e)))},b64_sha1:function(e){return this.rstr2b64(this.rstr_sha1(this.str2rstr_utf8(e)))},any_sha1:function(e,t){return this.rstr2any(this.rstr_sha1(this.str2rstr_utf8(e)),t)},hex_hmac_sha1:function(e,t){return this.rstr2hex(this.rstr_hmac_sha1(this.str2rstr_utf8(e),this.str2rstr_utf8(t)))},b64_hmac_sha1:function(e,t){return this.rstr2b64(this.rstr_hmac_sha1(this.str2rstr_utf8(e),this.str2rstr_utf8(t)))},any_hmac_sha1:function(e,t,r){return this.rstr2any(this.rstr_hmac_sha1(this.str2rstr_utf8(e),this.str2rstr_utf8(t)),r)},sha1_vm_test:function(){return"a9993e364706816aba3e25717850c26c9cd0d89d"===thishex_sha1("abc").toLowerCase()},rstr_sha1:function(e){return this.binb2rstr(this.binb_sha1(this.rstr2binb(e),8*e.length))},rstr_hmac_sha1:function(e,t){var r,n,o,i,a;for(r=this.rstr2binb(e),r.length>16&&(r=this.binb_sha1(r,8*e.length)),i=Array(16),a=Array(16),o=0;16>o;)i[o]=909522486^r[o],a[o]=1549556828^r[o],o++;return n=this.binb_sha1(i.concat(this.rstr2binb(t)),512+8*t.length),this.binb2rstr(this.binb_sha1(a.concat(n),672))},rstr2hex:function(e){var t,r,o,i,a;try{}catch(s){t=s,n=0}for(r=n?"0123456789ABCDEF":"0123456789abcdef",i="",a=void 0,o=0;o<e.length;)a=e.charCodeAt(o),i+=r.charAt(a>>>4&15)+r.charAt(15&a),o++;return i},rstr2b64:function(e){var t,n,o,i,a,s,c;try{}catch(u){t=u,r=""}for(s="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",a="",i=e.length,n=0;i>n;){for(c=e.charCodeAt(n)<<16|(i>n+1?e.charCodeAt(n+1)<<8:0)|(i>n+2?e.charCodeAt(n+2):0),o=0;4>o;)a+=8*n+6*o>8*e.length?r:s.charAt(c>>>6*(3-o)&63),o++;n+=3}return a},rstr2any:function(e,t){var r,n,o,i,a,s,c,u,f;for(n=t.length,u=Array(),i=void 0,s=void 0,f=void 0,c=void 0,r=Array(Math.ceil(e.length/2)),i=0;i<r.length;)r[i]=e.charCodeAt(2*i)<<8|e.charCodeAt(2*i+1),i++;for(;r.length>0;){for(c=Array(),f=0,i=0;i<r.length;)f=(f<<16)+r[i],s=Math.floor(f/n),f-=s*n,(c.length>0||s>0)&&(c[c.length]=s),i++;u[u.length]=f,r=c}for(a="",i=u.length-1;i>=0;)a+=t.charAt(u[i]),i--;for(o=Math.ceil(8*e.length/(Math.log(t.length)/Math.log(2))),i=a.length;o>i;)a=t[0]+a,i++;return a},str2rstr_utf8:function(e){var t,r,n,o;for(r="",t=-1,n=void 0,o=void 0;++t<e.length;)n=e.charCodeAt(t),o=t+1<e.length?e.charCodeAt(t+1):0,n>=55296&&56319>=n&&o>=56320&&57343>=o&&(n=65536+((1023&n)<<10)+(1023&o),t++),127>=n?r+=String.fromCharCode(n):2047>=n?r+=String.fromCharCode(192|n>>>6&31,128|63&n):65535>=n?r+=String.fromCharCode(224|n>>>12&15,128|n>>>6&63,128|63&n):2097151>=n&&(r+=String.fromCharCode(240|n>>>18&7,128|n>>>12&63,128|n>>>6&63,128|63&n));return r},str2rstr_utf16le:function(e){var t,r;for(r="",t=0;t<e.length;)r+=String.fromCharCode(255&e.charCodeAt(t),e.charCodeAt(t)>>>8&255),t++;return r},str2rstr_utf16be:function(e){var t,r;for(r="",t=0;t<e.length;)r+=String.fromCharCode(e.charCodeAt(t)>>>8&255,255&e.charCodeAt(t)),t++;return r},rstr2binb:function(e){var t,r;for(r=Array(e.length>>2),t=0;t<r.length;)r[t]=0,t++;for(t=0;t<8*e.length;)r[t>>5]|=(255&e.charCodeAt(t/8))<<24-t%32,t+=8;return r},binb2rstr:function(e){var t,r;for(r="",t=0;t<32*e.length;)r+=String.fromCharCode(e[t>>5]>>>24-t%32&255),t+=8;return r},binb_sha1:function(e,t){var r,n,o,i,a,s,c,u,f,p,l,h,d,v;for(e[t>>5]|=128<<24-t%32,e[(t+64>>9<<4)+15]=t,v=Array(80),r=1732584193,n=-271733879,o=-1732584194,i=271733878,a=-1009589776,s=0;s<e.length;){for(u=r,f=n,p=o,l=i,h=a,c=0;80>c;)v[c]=16>c?e[s+c]:this.bit_rol(v[c-3]^v[c-8]^v[c-14]^v[c-16],1),d=this.safe_add(this.safe_add(this.bit_rol(r,5),this.sha1_ft(c,n,o,i)),this.safe_add(this.safe_add(a,v[c]),this.sha1_kt(c))),a=i,i=o,o=this.bit_rol(n,30),n=r,r=d,c++;r=this.safe_add(r,u),n=this.safe_add(n,f),o=this.safe_add(o,p),i=this.safe_add(i,l),a=this.safe_add(a,h),s+=16}return Array(r,n,o,i,a)},sha1_ft:function(e,t,r,n){return 20>e?t&r|~t&n:40>e?t^r^n:60>e?t&r|t&n|r&n:t^r^n},sha1_kt:function(e){return 20>e?1518500249:40>e?1859775393:60>e?-1894007588:-899497514},safe_add:function(e,t){var r,n;return r=(65535&e)+(65535&t),n=(e>>16)+(t>>16)+(r>>16),n<<16|65535&r},bit_rol:function(e,t){return e<<t|e>>>32-t},create_hash:function(){var e;return e=this.b64_sha1((new Date).getTime()+":"+Math.floor(9999999*Math.random())),e.replace(/\+/g,"-").replace(/\//g,"_").replace(/\=+$/,"")}}},{}],14:[function(e,t){t.exports=function(e){return{getAbsUrl:function(t){var r;return t.match(/^.{2,5}:\/\//)?t:"/"===t[0]?e.location.protocol+"//"+e.location.host+t:(r=e.location.protocol+"//"+e.location.host+e.location.pathname,"/"!==r[r.length-1]&&"#"!==t[0]?r+"/"+t:r+t)},replaceParam:function(e,t,r){return e=e.replace(/\{\{(.*?)\}\}/g,function(e,r){return t[r]||""}),r&&(e=e.replace(/\{(.*?)\}/g,function(e,t){return r[t]||""})),e}}}},{}],15:[function(e,t){var r=t.exports={};r.nextTick=function(){var e="undefined"!=typeof window&&window.setImmediate,t="undefined"!=typeof window&&window.postMessage&&window.addEventListener;if(e)return function(e){return window.setImmediate(e)};if(t){var r=[];return window.addEventListener("message",function(e){var t=e.source;if((t===window||null===t)&&"process-tick"===e.data&&(e.stopPropagation(),r.length>0)){var n=r.shift();n()}},!0),function(e){r.push(e),window.postMessage("process-tick","*")}}return function(e){setTimeout(e,0)}}(),r.title="browser",r.browser=!0,r.env={},r.argv=[],r.binding=function(){throw new Error("process.binding is not supported")},r.cwd=function(){return"/"},r.chdir=function(){throw new Error("process.chdir is not supported")}},{}],16:[function(e,t,r){(function(e){!function(e){"use strict";if("function"==typeof bootstrap)bootstrap("promise",e);else if("object"==typeof r&&"object"==typeof t)t.exports=e();else if("function"==typeof define&&define.amd)define(e);else if("undefined"!=typeof ses){if(!ses.ok())return;ses.makeQ=e}else{if("undefined"==typeof self)throw new Error("This environment was not anticiapted by Q. Please file a bug.");self.Q=e()}}(function(){"use strict";function t(e){return function(){return $.apply(e,arguments)}}function r(e){return e===Object(e)}function n(e){return"[object StopIteration]"===rt(e)||e instanceof Y}function o(e,t){if(F&&t.stack&&"object"==typeof e&&null!==e&&e.stack&&-1===e.stack.indexOf(nt)){for(var r=[],n=t;n;n=n.source)n.stack&&r.unshift(n.stack);r.unshift(e.stack);var o=r.join("\n"+nt+"\n");e.stack=i(o)}}function i(e){for(var t=e.split("\n"),r=[],n=0;n<t.length;++n){var o=t[n];c(o)||a(o)||!o||r.push(o)}return r.join("\n")}function a(e){return-1!==e.indexOf("(module.js:")||-1!==e.indexOf("(node.js:")}function s(e){var t=/at .+ \((.+):(\d+):(?:\d+)\)$/.exec(e);if(t)return[t[1],Number(t[2])];var r=/at ([^ ]+):(\d+):(?:\d+)$/.exec(e);if(r)return[r[1],Number(r[2])];var n=/.*@(.+):(\d+)$/.exec(e);return n?[n[1],Number(n[2])]:void 0}function c(e){var t=s(e);if(!t)return!1;var r=t[0],n=t[1];return r===J&&n>=V&&st>=n}function u(){if(F)try{throw new Error}catch(e){var t=e.stack.split("\n"),r=t[0].indexOf("@")>0?t[1]:t[2],n=s(r);if(!n)return;return J=n[0],n[1]}}function f(e,t,r){return function(){return"undefined"!=typeof console&&"function"==typeof console.warn&&console.warn(t+" is deprecated, use "+r+" instead.",new Error("").stack),e.apply(e,arguments)}}function p(e){return e instanceof v?e:b(e)?C(e):T(e)}function l(){function e(e){t=e,i.source=e,K(r,function(t,r){p.nextTick(function(){e.promiseDispatch.apply(e,r)})},void 0),r=void 0,n=void 0}var t,r=[],n=[],o=Z(l.prototype),i=Z(v.prototype);if(i.promiseDispatch=function(e,o,i){var a=X(arguments);r?(r.push(a),"when"===o&&i[1]&&n.push(i[1])):p.nextTick(function(){t.promiseDispatch.apply(t,a)})},i.valueOf=function(){if(r)return i;var e=y(t);return m(e)&&(t=e),e},i.inspect=function(){return t?t.inspect():{state:"pending"}},p.longStackSupport&&F)try{throw new Error}catch(a){i.stack=a.stack.substring(a.stack.indexOf("\n")+1)}return o.promise=i,o.resolve=function(r){t||e(p(r))},o.fulfill=function(r){t||e(T(r))},o.reject=function(r){t||e(j(r))},o.notify=function(e){t||K(n,function(t,r){p.nextTick(function(){r(e)})},void 0)},o}function h(e){if("function"!=typeof e)throw new TypeError("resolver must be a function.");var t=l();try{e(t.resolve,t.reject,t.notify)}catch(r){t.reject(r)}return t.promise}function d(e){return h(function(t,r){for(var n=0,o=e.length;o>n;n++)p(e[n]).then(t,r)})}function v(e,t,r){void 0===t&&(t=function(e){return j(new Error("Promise does not support operation: "+e))}),void 0===r&&(r=function(){return{state:"unknown"}});var n=Z(v.prototype);if(n.promiseDispatch=function(r,o,i){var a;try{a=e[o]?e[o].apply(n,i):t.call(n,o,i)}catch(s){a=j(s)}r&&r(a)},n.inspect=r,r){var o=r();"rejected"===o.state&&(n.exception=o.reason),n.valueOf=function(){var e=r();return"pending"===e.state||"rejected"===e.state?n:e.value}}return n}function g(e,t,r,n){return p(e).then(t,r,n)}function y(e){if(m(e)){var t=e.inspect();if("fulfilled"===t.state)return t.value}return e}function m(e){return e instanceof v}function b(e){return r(e)&&"function"==typeof e.then}function w(e){return m(e)&&"pending"===e.inspect().state}function k(e){return!m(e)||"fulfilled"===e.inspect().state}function x(e){return m(e)&&"rejected"===e.inspect().state}function E(){ot.length=0,it.length=0,at||(at=!0)}function _(e,t){at&&(it.push(e),ot.push(t&&"undefined"!=typeof t.stack?t.stack:"(no stack) "+t))}function A(e){if(at){var t=G(it,e);-1!==t&&(it.splice(t,1),ot.splice(t,1))}}function j(e){var t=v({when:function(t){return t&&A(this),t?t(e):this}},function(){return this},function(){return{state:"rejected",reason:e}});return _(t,e),t}function T(e){return v({when:function(){return e},get:function(t){return e[t]},set:function(t,r){e[t]=r},"delete":function(t){delete e[t]},post:function(t,r){return null===t||void 0===t?e.apply(void 0,r):e[t].apply(e,r)},apply:function(t,r){return e.apply(t,r)},keys:function(){return tt(e)}},void 0,function(){return{state:"fulfilled",value:e}})}function C(e){var t=l();return p.nextTick(function(){try{e.then(t.resolve,t.reject,t.notify)}catch(r){t.reject(r)}}),t.promise}function S(e){return v({isDef:function(){}},function(t,r){return B(e,t,r)},function(){return p(e).inspect()})}function R(e,t,r){return p(e).spread(t,r)}function L(e){return function(){function t(e,t){var a;if("undefined"==typeof StopIteration){try{a=r[e](t)}catch(s){return j(s)}return a.done?p(a.value):g(a.value,o,i)}try{a=r[e](t)}catch(s){return n(s)?p(s.value):j(s)}return g(a,o,i)}var r=e.apply(this,arguments),o=t.bind(t,"next"),i=t.bind(t,"throw");return o()}}function U(e){p.done(p.async(e)())}function P(e){throw new Y(e)}function O(e){return function(){return R([this,I(arguments)],function(t,r){return e.apply(t,r)})}}function B(e,t,r){return p(e).dispatch(t,r)}function I(e){return g(e,function(e){var t=0,r=l();return K(e,function(n,o,i){var a;m(o)&&"fulfilled"===(a=o.inspect()).state?e[i]=a.value:(++t,g(o,function(n){e[i]=n,0===--t&&r.resolve(e)},r.reject,function(e){r.notify({index:i,value:e})}))},void 0),0===t&&r.resolve(e),r.promise})}function N(e){return g(e,function(e){return e=Q(e,p),g(I(Q(e,function(e){return g(e,W,W)})),function(){return e})})}function D(e){return p(e).allSettled()}function q(e,t){return p(e).then(void 0,void 0,t)}function M(e,t){return p(e).nodeify(t)}var F=!1;try{throw new Error}catch(H){F=!!H.stack}var J,Y,V=u(),W=function(){},z=function(){function t(){for(;r.next;){r=r.next;var e=r.task;r.task=void 0;var n=r.domain;n&&(r.domain=void 0,n.enter());try{e()}catch(i){if(a)throw n&&n.exit(),setTimeout(t,0),n&&n.enter(),i;setTimeout(function(){throw i},0)}n&&n.exit()}o=!1}var r={task:void 0,next:null},n=r,o=!1,i=void 0,a=!1;if(z=function(t){n=n.next={task:t,domain:a&&e.domain,next:null},o||(o=!0,i())},"undefined"!=typeof e&&e.nextTick)a=!0,i=function(){e.nextTick(t)};else if("function"==typeof setImmediate)i="undefined"!=typeof window?setImmediate.bind(window,t):function(){setImmediate(t)};else if("undefined"!=typeof MessageChannel){var s=new MessageChannel;s.port1.onmessage=function(){i=c,s.port1.onmessage=t,t()};var c=function(){s.port2.postMessage(0)};i=function(){setTimeout(t,0),c()}}else i=function(){setTimeout(t,0)};return z}(),$=Function.call,X=t(Array.prototype.slice),K=t(Array.prototype.reduce||function(e,t){var r=0,n=this.length;if(1===arguments.length)for(;;){if(r in this){t=this[r++];break}if(++r>=n)throw new TypeError}for(;n>r;r++)r in this&&(t=e(t,this[r],r));return t}),G=t(Array.prototype.indexOf||function(e){for(var t=0;t<this.length;t++)if(this[t]===e)return t;return-1}),Q=t(Array.prototype.map||function(e,t){var r=this,n=[];return K(r,function(o,i,a){n.push(e.call(t,i,a,r))},void 0),n}),Z=Object.create||function(e){function t(){}return t.prototype=e,new t},et=t(Object.prototype.hasOwnProperty),tt=Object.keys||function(e){var t=[];for(var r in e)et(e,r)&&t.push(r);return t},rt=t(Object.prototype.toString);Y="undefined"!=typeof ReturnValue?ReturnValue:function(e){this.value=e};var nt="From previous event:";p.resolve=p,p.nextTick=z,p.longStackSupport=!1,"object"==typeof e&&e&&e.env&&e.env.Q_DEBUG&&(p.longStackSupport=!0),p.defer=l,l.prototype.makeNodeResolver=function(){var e=this;return function(t,r){t?e.reject(t):e.resolve(arguments.length>2?X(arguments,1):r)}},p.Promise=h,p.promise=h,h.race=d,h.all=I,h.reject=j,h.resolve=p,p.passByCopy=function(e){return e},v.prototype.passByCopy=function(){return this},p.join=function(e,t){return p(e).join(t)},v.prototype.join=function(e){return p([this,e]).spread(function(e,t){if(e===t)return e;throw new Error("Can't join: not the same: "+e+" "+t)})},p.race=d,v.prototype.race=function(){return this.then(p.race)},p.makePromise=v,v.prototype.toString=function(){return"[object Promise]"},v.prototype.then=function(e,t,r){function n(t){try{return"function"==typeof e?e(t):t}catch(r){return j(r)}}function i(e){if("function"==typeof t){o(e,s);try{return t(e)}catch(r){return j(r)}}return j(e)}function a(e){return"function"==typeof r?r(e):e}var s=this,c=l(),u=!1;return p.nextTick(function(){s.promiseDispatch(function(e){u||(u=!0,c.resolve(n(e)))},"when",[function(e){u||(u=!0,c.resolve(i(e)))}])}),s.promiseDispatch(void 0,"when",[void 0,function(e){var t,r=!1;try{t=a(e)}catch(n){if(r=!0,!p.onerror)throw n;p.onerror(n)}r||c.notify(t)}]),c.promise},p.tap=function(e,t){return p(e).tap(t)},v.prototype.tap=function(e){return e=p(e),this.then(function(t){return e.fcall(t).thenResolve(t)})},p.when=g,v.prototype.thenResolve=function(e){return this.then(function(){return e})},p.thenResolve=function(e,t){return p(e).thenResolve(t)},v.prototype.thenReject=function(e){return this.then(function(){throw e})},p.thenReject=function(e,t){return p(e).thenReject(t)},p.nearer=y,p.isPromise=m,p.isPromiseAlike=b,p.isPending=w,v.prototype.isPending=function(){return"pending"===this.inspect().state},p.isFulfilled=k,v.prototype.isFulfilled=function(){return"fulfilled"===this.inspect().state},p.isRejected=x,v.prototype.isRejected=function(){return"rejected"===this.inspect().state};var ot=[],it=[],at=!0;p.resetUnhandledRejections=E,p.getUnhandledReasons=function(){return ot.slice()},p.stopUnhandledRejectionTracking=function(){E(),at=!1},E(),p.reject=j,p.fulfill=T,p.master=S,p.spread=R,v.prototype.spread=function(e,t){return this.all().then(function(t){return e.apply(void 0,t)},t)},p.async=L,p.spawn=U,p["return"]=P,p.promised=O,p.dispatch=B,v.prototype.dispatch=function(e,t){var r=this,n=l();return p.nextTick(function(){r.promiseDispatch(n.resolve,e,t)}),n.promise},p.get=function(e,t){return p(e).dispatch("get",[t])},v.prototype.get=function(e){return this.dispatch("get",[e])},p.set=function(e,t,r){return p(e).dispatch("set",[t,r])},v.prototype.set=function(e,t){return this.dispatch("set",[e,t])},p.del=p["delete"]=function(e,t){return p(e).dispatch("delete",[t])},v.prototype.del=v.prototype["delete"]=function(e){return this.dispatch("delete",[e])},p.mapply=p.post=function(e,t,r){return p(e).dispatch("post",[t,r])},v.prototype.mapply=v.prototype.post=function(e,t){return this.dispatch("post",[e,t])},p.send=p.mcall=p.invoke=function(e,t){return p(e).dispatch("post",[t,X(arguments,2)])},v.prototype.send=v.prototype.mcall=v.prototype.invoke=function(e){return this.dispatch("post",[e,X(arguments,1)])},p.fapply=function(e,t){return p(e).dispatch("apply",[void 0,t])},v.prototype.fapply=function(e){return this.dispatch("apply",[void 0,e])},p["try"]=p.fcall=function(e){return p(e).dispatch("apply",[void 0,X(arguments,1)])},v.prototype.fcall=function(){return this.dispatch("apply",[void 0,X(arguments)])},p.fbind=function(e){var t=p(e),r=X(arguments,1);return function(){return t.dispatch("apply",[this,r.concat(X(arguments))])}},v.prototype.fbind=function(){var e=this,t=X(arguments);return function(){return e.dispatch("apply",[this,t.concat(X(arguments))])}},p.keys=function(e){return p(e).dispatch("keys",[])},v.prototype.keys=function(){return this.dispatch("keys",[])},p.all=I,v.prototype.all=function(){return I(this)},p.allResolved=f(N,"allResolved","allSettled"),v.prototype.allResolved=function(){return N(this)},p.allSettled=D,v.prototype.allSettled=function(){return this.then(function(e){return I(Q(e,function(e){function t(){return e.inspect()}return e=p(e),e.then(t,t)}))})},p.fail=p["catch"]=function(e,t){return p(e).then(void 0,t)},v.prototype.fail=v.prototype["catch"]=function(e){return this.then(void 0,e)},p.progress=q,v.prototype.progress=function(e){return this.then(void 0,void 0,e)},p.fin=p["finally"]=function(e,t){return p(e)["finally"](t)},v.prototype.fin=v.prototype["finally"]=function(e){return e=p(e),this.then(function(t){return e.fcall().then(function(){return t})},function(t){return e.fcall().then(function(){throw t})})},p.done=function(e,t,r,n){return p(e).done(t,r,n)},v.prototype.done=function(t,r,n){var i=function(e){p.nextTick(function(){if(o(e,a),!p.onerror)throw e;p.onerror(e)})},a=t||r||n?this.then(t,r,n):this;"object"==typeof e&&e&&e.domain&&(i=e.domain.bind(i)),a.then(void 0,i)},p.timeout=function(e,t,r){return p(e).timeout(t,r)},v.prototype.timeout=function(e,t){var r=l(),n=setTimeout(function(){t&&"string"!=typeof t||(t=new Error(t||"Timed out after "+e+" ms"),t.code="ETIMEDOUT"),r.reject(t)},e);return this.then(function(e){clearTimeout(n),r.resolve(e)},function(e){clearTimeout(n),r.reject(e)},r.notify),r.promise},p.delay=function(e,t){return void 0===t&&(t=e,e=void 0),p(e).delay(t)},v.prototype.delay=function(e){return this.then(function(t){var r=l();return setTimeout(function(){r.resolve(t)},e),r.promise})},p.nfapply=function(e,t){return p(e).nfapply(t)},v.prototype.nfapply=function(e){var t=l(),r=X(e);return r.push(t.makeNodeResolver()),this.fapply(r).fail(t.reject),t.promise},p.nfcall=function(e){var t=X(arguments,1);return p(e).nfapply(t)},v.prototype.nfcall=function(){var e=X(arguments),t=l();return e.push(t.makeNodeResolver()),this.fapply(e).fail(t.reject),t.promise},p.nfbind=p.denodeify=function(e){var t=X(arguments,1);return function(){var r=t.concat(X(arguments)),n=l();return r.push(n.makeNodeResolver()),p(e).fapply(r).fail(n.reject),n.promise}},v.prototype.nfbind=v.prototype.denodeify=function(){var e=X(arguments);return e.unshift(this),p.denodeify.apply(void 0,e)},p.nbind=function(e,t){var r=X(arguments,2);return function(){function n(){return e.apply(t,arguments)}var o=r.concat(X(arguments)),i=l();return o.push(i.makeNodeResolver()),p(n).fapply(o).fail(i.reject),i.promise}},v.prototype.nbind=function(){var e=X(arguments,0);return e.unshift(this),p.nbind.apply(void 0,e)},p.nmapply=p.npost=function(e,t,r){return p(e).npost(t,r)},v.prototype.nmapply=v.prototype.npost=function(e,t){var r=X(t||[]),n=l();return r.push(n.makeNodeResolver()),this.dispatch("post",[e,r]).fail(n.reject),n.promise},p.nsend=p.nmcall=p.ninvoke=function(e,t){var r=X(arguments,2),n=l();return r.push(n.makeNodeResolver()),p(e).dispatch("post",[t,r]).fail(n.reject),n.promise},v.prototype.nsend=v.prototype.nmcall=v.prototype.ninvoke=function(e){var t=X(arguments,1),r=l();return t.push(r.makeNodeResolver()),this.dispatch("post",[e,t]).fail(r.reject),r.promise},p.nodeify=M,v.prototype.nodeify=function(e){return e?void this.then(function(t){p.nextTick(function(){e(null,t)})},function(t){p.nextTick(function(){e(t)})}):this};var st=u();return p})}).call(this,e("/Users/antoine/projects/oauth-js/node_modules/browserify/node_modules/insert-module-globals/node_modules/process/browser.js"))},{"/Users/antoine/projects/oauth-js/node_modules/browserify/node_modules/insert-module-globals/node_modules/process/browser.js":15}]},{},[8])},{}],7:[function(e,t){t.exports=e("./lib/")},{"./lib/":8}],8:[function(e,t,r){function n(e,t){"object"==typeof e&&(t=e,e=void 0),t=t||{};var r,n=o(e),i=n.source,u=n.id;return t.forceNew||t["force new connection"]||!1===t.multiplex?(s("ignoring socket cache for %s",i),r=a(i,t)):(c[u]||(s("new io instance for %s",i),c[u]=a(i,t)),r=c[u]),r.socket(n.path)}var o=e("./url"),i=e("socket.io-parser"),a=e("./manager"),s=e("debug")("socket.io-client");t.exports=r=n;var c=r.managers={};r.protocol=i.protocol,r.connect=n,r.Manager=e("./manager"),r.Socket=e("./socket")},{"./manager":9,"./socket":11,"./url":12,debug:15,"socket.io-parser":45}],9:[function(e,t){function r(e,t){return this instanceof r?(e&&"object"==typeof e&&(t=e,e=void 0),t=t||{},t.path=t.path||"/socket.io",this.nsps={},this.subs=[],this.opts=t,this.reconnection(t.reconnection!==!1),this.reconnectionAttempts(t.reconnectionAttempts||1/0),this.reconnectionDelay(t.reconnectionDelay||1e3),this.reconnectionDelayMax(t.reconnectionDelayMax||5e3),this.timeout(null==t.timeout?2e4:t.timeout),this.readyState="closed",this.uri=e,this.connected=0,this.attempts=0,this.encoding=!1,this.packetBuffer=[],this.encoder=new a.Encoder,this.decoder=new a.Decoder,void this.open()):new r(e,t)}var n=(e("./url"),e("engine.io-client")),o=e("./socket"),i=e("component-emitter"),a=e("socket.io-parser"),s=e("./on"),c=e("component-bind"),u=(e("object-component"),e("debug")("socket.io-client:manager"));t.exports=r,r.prototype.emitAll=function(){this.emit.apply(this,arguments);for(var e in this.nsps)this.nsps[e].emit.apply(this.nsps[e],arguments)},i(r.prototype),r.prototype.reconnection=function(e){return arguments.length?(this._reconnection=!!e,this):this._reconnection},r.prototype.reconnectionAttempts=function(e){return arguments.length?(this._reconnectionAttempts=e,this):this._reconnectionAttempts},r.prototype.reconnectionDelay=function(e){return arguments.length?(this._reconnectionDelay=e,this):this._reconnectionDelay},r.prototype.reconnectionDelayMax=function(e){return arguments.length?(this._reconnectionDelayMax=e,this):this._reconnectionDelayMax},r.prototype.timeout=function(e){return arguments.length?(this._timeout=e,this):this._timeout},r.prototype.maybeReconnectOnOpen=function(){this.openReconnect||this.reconnecting||!this._reconnection||(this.openReconnect=!0,this.reconnect())},r.prototype.open=r.prototype.connect=function(e){if(u("readyState %s",this.readyState),~this.readyState.indexOf("open"))return this;u("opening %s",this.uri),this.engine=n(this.uri,this.opts);var t=this.engine,r=this;this.readyState="opening";var o=s(t,"open",function(){r.onopen(),e&&e()}),i=s(t,"error",function(t){if(u("connect_error"),r.cleanup(),r.readyState="closed",r.emitAll("connect_error",t),e){var n=new Error("Connection error");n.data=t,e(n)}r.maybeReconnectOnOpen()});if(!1!==this._timeout){var a=this._timeout;u("connect attempt will timeout after %d",a);var c=setTimeout(function(){u("connect attempt timed out after %d",a),o.destroy(),t.close(),t.emit("error","timeout"),r.emitAll("connect_timeout",a)},a);this.subs.push({destroy:function(){clearTimeout(c)}})}return this.subs.push(o),this.subs.push(i),this},r.prototype.onopen=function(){u("open"),this.cleanup(),this.readyState="open",this.emit("open");var e=this.engine;this.subs.push(s(e,"data",c(this,"ondata"))),this.subs.push(s(this.decoder,"decoded",c(this,"ondecoded"))),this.subs.push(s(e,"error",c(this,"onerror"))),this.subs.push(s(e,"close",c(this,"onclose")))},r.prototype.ondata=function(e){this.decoder.add(e)},r.prototype.ondecoded=function(e){this.emit("packet",e)},r.prototype.onerror=function(e){u("error",e),this.emitAll("error",e)},r.prototype.socket=function(e){var t=this.nsps[e];if(!t){t=new o(this,e),this.nsps[e]=t;var r=this;t.on("connect",function(){r.connected++})}return t},r.prototype.destroy=function(){--this.connected||this.close()},r.prototype.packet=function(e){u("writing packet %j",e);var t=this;t.encoding?t.packetBuffer.push(e):(t.encoding=!0,this.encoder.encode(e,function(e){for(var r=0;r<e.length;r++)t.engine.write(e[r]);t.encoding=!1,t.processPacketQueue()}))},r.prototype.processPacketQueue=function(){if(this.packetBuffer.length>0&&!this.encoding){var e=this.packetBuffer.shift();this.packet(e)}},r.prototype.cleanup=function(){for(var e;e=this.subs.shift();)e.destroy();this.packetBuffer=[],this.encoding=!1,this.decoder.destroy()},r.prototype.close=r.prototype.disconnect=function(){this.skipReconnect=!0,this.engine.close()},r.prototype.onclose=function(e){u("close"),this.cleanup(),this.readyState="closed",this.emit("close",e),this._reconnection&&!this.skipReconnect&&this.reconnect()},r.prototype.reconnect=function(){if(this.reconnecting)return this;var e=this;if(this.attempts++,this.attempts>this._reconnectionAttempts)u("reconnect failed"),this.emitAll("reconnect_failed"),this.reconnecting=!1;
else{var t=this.attempts*this.reconnectionDelay();t=Math.min(t,this.reconnectionDelayMax()),u("will wait %dms before reconnect attempt",t),this.reconnecting=!0;var r=setTimeout(function(){u("attempting reconnect"),e.emitAll("reconnect_attempt",e.attempts),e.emitAll("reconnecting",e.attempts),e.open(function(t){t?(u("reconnect attempt error"),e.reconnecting=!1,e.reconnect(),e.emitAll("reconnect_error",t.data)):(u("reconnect success"),e.onreconnect())})},t);this.subs.push({destroy:function(){clearTimeout(r)}})}},r.prototype.onreconnect=function(){var e=this.attempts;this.attempts=0,this.reconnecting=!1,this.emitAll("reconnect",e)}},{"./on":10,"./socket":11,"./url":12,"component-bind":13,"component-emitter":14,debug:15,"engine.io-client":16,"object-component":42,"socket.io-parser":45}],10:[function(e,t){function r(e,t,r){return e.on(t,r),{destroy:function(){e.removeListener(t,r)}}}t.exports=r},{}],11:[function(e,t,r){function n(e,t){this.io=e,this.nsp=t,this.json=this,this.ids=0,this.acks={},this.open(),this.receiveBuffer=[],this.sendBuffer=[],this.connected=!1,this.disconnected=!0,this.subEvents()}{var o=e("socket.io-parser"),i=e("component-emitter"),a=e("to-array"),s=e("./on"),c=e("component-bind"),u=e("debug")("socket.io-client:socket"),f=e("has-binary-data");e("indexof")}t.exports=r=n;var p={connect:1,connect_error:1,connect_timeout:1,disconnect:1,error:1,reconnect:1,reconnect_attempt:1,reconnect_failed:1,reconnect_error:1,reconnecting:1},l=i.prototype.emit;i(n.prototype),n.prototype.subEvents=function(){var e=this.io;this.subs=[s(e,"open",c(this,"onopen")),s(e,"packet",c(this,"onpacket")),s(e,"close",c(this,"onclose"))]},n.prototype.open=n.prototype.connect=function(){return this.connected?this:(this.io.open(),"open"==this.io.readyState&&this.onopen(),this)},n.prototype.send=function(){var e=a(arguments);return e.unshift("message"),this.emit.apply(this,e),this},n.prototype.emit=function(e){if(p.hasOwnProperty(e))return l.apply(this,arguments),this;var t=a(arguments),r=o.EVENT;f(t)&&(r=o.BINARY_EVENT);var n={type:r,data:t};return"function"==typeof t[t.length-1]&&(u("emitting packet with ack id %d",this.ids),this.acks[this.ids]=t.pop(),n.id=this.ids++),this.connected?this.packet(n):this.sendBuffer.push(n),this},n.prototype.packet=function(e){e.nsp=this.nsp,this.io.packet(e)},n.prototype.onopen=function(){u("transport is open - connecting"),"/"!=this.nsp&&this.packet({type:o.CONNECT})},n.prototype.onclose=function(e){u("close (%s)",e),this.connected=!1,this.disconnected=!0,this.emit("disconnect",e)},n.prototype.onpacket=function(e){if(e.nsp==this.nsp)switch(e.type){case o.CONNECT:this.onconnect();break;case o.EVENT:this.onevent(e);break;case o.BINARY_EVENT:this.onevent(e);break;case o.ACK:this.onack(e);break;case o.BINARY_ACK:this.onack(e);break;case o.DISCONNECT:this.ondisconnect();break;case o.ERROR:this.emit("error",e.data)}},n.prototype.onevent=function(e){var t=e.data||[];u("emitting event %j",t),null!=e.id&&(u("attaching ack callback to event"),t.push(this.ack(e.id))),this.connected?l.apply(this,t):this.receiveBuffer.push(t)},n.prototype.ack=function(e){var t=this,r=!1;return function(){if(!r){r=!0;var n=a(arguments);u("sending ack %j",n);var i=f(n)?o.BINARY_ACK:o.ACK;t.packet({type:i,id:e,data:n})}}},n.prototype.onack=function(e){u("calling ack %s with %j",e.id,e.data);var t=this.acks[e.id];t.apply(this,e.data),delete this.acks[e.id]},n.prototype.onconnect=function(){this.connected=!0,this.disconnected=!1,this.emit("connect"),this.emitBuffered()},n.prototype.emitBuffered=function(){var e;for(e=0;e<this.receiveBuffer.length;e++)l.apply(this,this.receiveBuffer[e]);for(this.receiveBuffer=[],e=0;e<this.sendBuffer.length;e++)this.packet(this.sendBuffer[e]);this.sendBuffer=[]},n.prototype.ondisconnect=function(){u("server disconnect (%s)",this.nsp),this.destroy(),this.onclose("io server disconnect")},n.prototype.destroy=function(){for(var e=0;e<this.subs.length;e++)this.subs[e].destroy();this.io.destroy(this)},n.prototype.close=n.prototype.disconnect=function(){return this.connected?(u("performing disconnect (%s)",this.nsp),this.packet({type:o.DISCONNECT}),this.destroy(),this.onclose("io client disconnect"),this):this}},{"./on":10,"component-bind":13,"component-emitter":14,debug:15,"has-binary-data":39,indexof:41,"socket.io-parser":45,"to-array":49}],12:[function(e,t){(function(r){function n(e,t){var n=e,t=t||r.location;return null==e&&(e=t.protocol+"//"+t.hostname),"string"==typeof e&&("/"==e.charAt(0)&&"undefined"!=typeof t&&(e=t.hostname+e),/^(https?|wss?):\/\//.test(e)||(i("protocol-less url %s",e),e="undefined"!=typeof t?t.protocol+"//"+e:"https://"+e),i("parse %s",e),n=o(e)),n.port||(/^(http|ws)$/.test(n.protocol)?n.port="80":/^(http|ws)s$/.test(n.protocol)&&(n.port="443")),n.path=n.path||"/",n.id=n.protocol+"://"+n.host+":"+n.port,n.href=n.protocol+"://"+n.host+(t&&t.port==n.port?"":":"+n.port),n}var o=e("parseuri"),i=e("debug")("socket.io-client:url");t.exports=n}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{debug:15,parseuri:43}],13:[function(e,t){var r=[].slice;t.exports=function(e,t){if("string"==typeof t&&(t=e[t]),"function"!=typeof t)throw new Error("bind() requires a function");var n=r.call(arguments,2);return function(){return t.apply(e,n.concat(r.call(arguments)))}}},{}],14:[function(e,t){function r(e){return e?n(e):void 0}function n(e){for(var t in r.prototype)e[t]=r.prototype[t];return e}t.exports=r,r.prototype.on=r.prototype.addEventListener=function(e,t){return this._callbacks=this._callbacks||{},(this._callbacks[e]=this._callbacks[e]||[]).push(t),this},r.prototype.once=function(e,t){function r(){n.off(e,r),t.apply(this,arguments)}var n=this;return this._callbacks=this._callbacks||{},r.fn=t,this.on(e,r),this},r.prototype.off=r.prototype.removeListener=r.prototype.removeAllListeners=r.prototype.removeEventListener=function(e,t){if(this._callbacks=this._callbacks||{},0==arguments.length)return this._callbacks={},this;var r=this._callbacks[e];if(!r)return this;if(1==arguments.length)return delete this._callbacks[e],this;for(var n,o=0;o<r.length;o++)if(n=r[o],n===t||n.fn===t){r.splice(o,1);break}return this},r.prototype.emit=function(e){this._callbacks=this._callbacks||{};var t=[].slice.call(arguments,1),r=this._callbacks[e];if(r){r=r.slice(0);for(var n=0,o=r.length;o>n;++n)r[n].apply(this,t)}return this},r.prototype.listeners=function(e){return this._callbacks=this._callbacks||{},this._callbacks[e]||[]},r.prototype.hasListeners=function(e){return!!this.listeners(e).length}},{}],15:[function(e,t){function r(e){return r.enabled(e)?function(t){t=n(t);var o=new Date,i=o-(r[e]||o);r[e]=o,t=e+" "+t+" +"+r.humanize(i),window.console&&console.log&&Function.prototype.apply.call(console.log,console,arguments)}:function(){}}function n(e){return e instanceof Error?e.stack||e.message:e}t.exports=r,r.names=[],r.skips=[],r.enable=function(e){try{localStorage.debug=e}catch(t){}for(var n=(e||"").split(/[\s,]+/),o=n.length,i=0;o>i;i++)e=n[i].replace("*",".*?"),"-"===e[0]?r.skips.push(new RegExp("^"+e.substr(1)+"$")):r.names.push(new RegExp("^"+e+"$"))},r.disable=function(){r.enable("")},r.humanize=function(e){var t=1e3,r=6e4,n=60*r;return e>=n?(e/n).toFixed(1)+"h":e>=r?(e/r).toFixed(1)+"m":e>=t?(e/t|0)+"s":e+"ms"},r.enabled=function(e){for(var t=0,n=r.skips.length;n>t;t++)if(r.skips[t].test(e))return!1;for(var t=0,n=r.names.length;n>t;t++)if(r.names[t].test(e))return!0;return!1};try{window.localStorage&&r.enable(localStorage.debug)}catch(o){}},{}],16:[function(e,t){t.exports=e("./lib/")},{"./lib/":17}],17:[function(e,t){t.exports=e("./socket"),t.exports.parser=e("engine.io-parser")},{"./socket":18,"engine.io-parser":27}],18:[function(e,t){(function(r){function n(e,t){if(!(this instanceof n))return new n(e,t);if(t=t||{},e&&"object"==typeof e&&(t=e,e=null),e&&(e=f(e),t.host=e.host,t.secure="https"==e.protocol||"wss"==e.protocol,t.port=e.port,e.query&&(t.query=e.query)),this.secure=null!=t.secure?t.secure:r.location&&"https:"==location.protocol,t.host){var o=t.host.split(":");t.hostname=o.shift(),o.length&&(t.port=o.pop())}this.agent=t.agent||!1,this.hostname=t.hostname||(r.location?location.hostname:"localhost"),this.port=t.port||(r.location&&location.port?location.port:this.secure?443:80),this.query=t.query||{},"string"==typeof this.query&&(this.query=l.decode(this.query)),this.upgrade=!1!==t.upgrade,this.path=(t.path||"/engine.io").replace(/\/$/,"")+"/",this.forceJSONP=!!t.forceJSONP,this.forceBase64=!!t.forceBase64,this.timestampParam=t.timestampParam||"t",this.timestampRequests=t.timestampRequests,this.transports=t.transports||["polling","websocket"],this.readyState="",this.writeBuffer=[],this.callbackBuffer=[],this.policyPort=t.policyPort||843,this.rememberUpgrade=t.rememberUpgrade||!1,this.open(),this.binaryType=null,this.onlyBinaryUpgrades=t.onlyBinaryUpgrades}function o(e){var t={};for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r]);return t}var i=e("./transports"),a=e("component-emitter"),s=e("debug")("engine.io-client:socket"),c=e("indexof"),u=e("engine.io-parser"),f=e("parseuri"),p=e("parsejson"),l=e("parseqs");t.exports=n,n.priorWebsocketSuccess=!1,a(n.prototype),n.protocol=u.protocol,n.Socket=n,n.Transport=e("./transport"),n.transports=e("./transports"),n.parser=e("engine.io-parser"),n.prototype.createTransport=function(e){s('creating transport "%s"',e);var t=o(this.query);t.EIO=u.protocol,t.transport=e,this.id&&(t.sid=this.id);var r=new i[e]({agent:this.agent,hostname:this.hostname,port:this.port,secure:this.secure,path:this.path,query:t,forceJSONP:this.forceJSONP,forceBase64:this.forceBase64,timestampRequests:this.timestampRequests,timestampParam:this.timestampParam,policyPort:this.policyPort,socket:this});return r},n.prototype.open=function(){var e;e=this.rememberUpgrade&&n.priorWebsocketSuccess&&-1!=this.transports.indexOf("websocket")?"websocket":this.transports[0],this.readyState="opening";var e=this.createTransport(e);e.open(),this.setTransport(e)},n.prototype.setTransport=function(e){s("setting transport %s",e.name);var t=this;this.transport&&(s("clearing existing transport %s",this.transport.name),this.transport.removeAllListeners()),this.transport=e,e.on("drain",function(){t.onDrain()}).on("packet",function(e){t.onPacket(e)}).on("error",function(e){t.onError(e)}).on("close",function(){t.onClose("transport close")})},n.prototype.probe=function(e){function t(){if(l.onlyBinaryUpgrades){var t=!this.supportsBinary&&l.transport.supportsBinary;p=p||t}p||(s('probe transport "%s" opened',e),f.send([{type:"ping",data:"probe"}]),f.once("packet",function(t){if(!p)if("pong"==t.type&&"probe"==t.data)s('probe transport "%s" pong',e),l.upgrading=!0,l.emit("upgrading",f),n.priorWebsocketSuccess="websocket"==f.name,s('pausing current transport "%s"',l.transport.name),l.transport.pause(function(){p||"closed"!=l.readyState&&"closing"!=l.readyState&&(s("changing transport and sending upgrade packet"),u(),l.setTransport(f),f.send([{type:"upgrade"}]),l.emit("upgrade",f),f=null,l.upgrading=!1,l.flush())});else{s('probe transport "%s" failed',e);var r=new Error("probe error");r.transport=f.name,l.emit("upgradeError",r)}}))}function r(){p||(p=!0,u(),f.close(),f=null)}function o(t){var n=new Error("probe error: "+t);n.transport=f.name,r(),s('probe transport "%s" failed because of error: %s',e,t),l.emit("upgradeError",n)}function i(){o("transport closed")}function a(){o("socket closed")}function c(e){f&&e.name!=f.name&&(s('"%s" works - aborting "%s"',e.name,f.name),r())}function u(){f.removeListener("open",t),f.removeListener("error",o),f.removeListener("close",i),l.removeListener("close",a),l.removeListener("upgrading",c)}s('probing transport "%s"',e);var f=this.createTransport(e,{probe:1}),p=!1,l=this;n.priorWebsocketSuccess=!1,f.once("open",t),f.once("error",o),f.once("close",i),this.once("close",a),this.once("upgrading",c),f.open()},n.prototype.onOpen=function(){if(s("socket open"),this.readyState="open",n.priorWebsocketSuccess="websocket"==this.transport.name,this.emit("open"),this.flush(),"open"==this.readyState&&this.upgrade&&this.transport.pause){s("starting upgrade probes");for(var e=0,t=this.upgrades.length;t>e;e++)this.probe(this.upgrades[e])}},n.prototype.onPacket=function(e){if("opening"==this.readyState||"open"==this.readyState)switch(s('socket receive: type "%s", data "%s"',e.type,e.data),this.emit("packet",e),this.emit("heartbeat"),e.type){case"open":this.onHandshake(p(e.data));break;case"pong":this.setPing();break;case"error":var t=new Error("server error");t.code=e.data,this.emit("error",t);break;case"message":this.emit("data",e.data),this.emit("message",e.data)}else s('packet received with socket readyState "%s"',this.readyState)},n.prototype.onHandshake=function(e){this.emit("handshake",e),this.id=e.sid,this.transport.query.sid=e.sid,this.upgrades=this.filterUpgrades(e.upgrades),this.pingInterval=e.pingInterval,this.pingTimeout=e.pingTimeout,this.onOpen(),"closed"!=this.readyState&&(this.setPing(),this.removeListener("heartbeat",this.onHeartbeat),this.on("heartbeat",this.onHeartbeat))},n.prototype.onHeartbeat=function(e){clearTimeout(this.pingTimeoutTimer);var t=this;t.pingTimeoutTimer=setTimeout(function(){"closed"!=t.readyState&&t.onClose("ping timeout")},e||t.pingInterval+t.pingTimeout)},n.prototype.setPing=function(){var e=this;clearTimeout(e.pingIntervalTimer),e.pingIntervalTimer=setTimeout(function(){s("writing ping packet - expecting pong within %sms",e.pingTimeout),e.ping(),e.onHeartbeat(e.pingTimeout)},e.pingInterval)},n.prototype.ping=function(){this.sendPacket("ping")},n.prototype.onDrain=function(){for(var e=0;e<this.prevBufferLen;e++)this.callbackBuffer[e]&&this.callbackBuffer[e]();this.writeBuffer.splice(0,this.prevBufferLen),this.callbackBuffer.splice(0,this.prevBufferLen),this.prevBufferLen=0,0==this.writeBuffer.length?this.emit("drain"):this.flush()},n.prototype.flush=function(){"closed"!=this.readyState&&this.transport.writable&&!this.upgrading&&this.writeBuffer.length&&(s("flushing %d packets in socket",this.writeBuffer.length),this.transport.send(this.writeBuffer),this.prevBufferLen=this.writeBuffer.length,this.emit("flush"))},n.prototype.write=n.prototype.send=function(e,t){return this.sendPacket("message",e,t),this},n.prototype.sendPacket=function(e,t,r){var n={type:e,data:t};this.emit("packetCreate",n),this.writeBuffer.push(n),this.callbackBuffer.push(r),this.flush()},n.prototype.close=function(){return("opening"==this.readyState||"open"==this.readyState)&&(this.onClose("forced close"),s("socket closing - telling transport to close"),this.transport.close()),this},n.prototype.onError=function(e){s("socket error %j",e),n.priorWebsocketSuccess=!1,this.emit("error",e),this.onClose("transport error",e)},n.prototype.onClose=function(e,t){if("opening"==this.readyState||"open"==this.readyState){s('socket close with reason: "%s"',e);var r=this;clearTimeout(this.pingIntervalTimer),clearTimeout(this.pingTimeoutTimer),setTimeout(function(){r.writeBuffer=[],r.callbackBuffer=[],r.prevBufferLen=0},0),this.transport.removeAllListeners("close"),this.transport.close(),this.transport.removeAllListeners(),this.readyState="closed",this.id=null,this.emit("close",e,t)}},n.prototype.filterUpgrades=function(e){for(var t=[],r=0,n=e.length;n>r;r++)~c(this.transports,e[r])&&t.push(e[r]);return t}}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./transport":19,"./transports":20,"component-emitter":14,debug:15,"engine.io-parser":27,indexof:41,parsejson:36,parseqs:37,parseuri:43}],19:[function(e,t){function r(e){this.path=e.path,this.hostname=e.hostname,this.port=e.port,this.secure=e.secure,this.query=e.query,this.timestampParam=e.timestampParam,this.timestampRequests=e.timestampRequests,this.readyState="",this.agent=e.agent||!1,this.socket=e.socket}var n=e("engine.io-parser"),o=e("component-emitter");t.exports=r,o(r.prototype),r.timestamps=0,r.prototype.onError=function(e,t){var r=new Error(e);return r.type="TransportError",r.description=t,this.emit("error",r),this},r.prototype.open=function(){return("closed"==this.readyState||""==this.readyState)&&(this.readyState="opening",this.doOpen()),this},r.prototype.close=function(){return("opening"==this.readyState||"open"==this.readyState)&&(this.doClose(),this.onClose()),this},r.prototype.send=function(e){if("open"!=this.readyState)throw new Error("Transport not open");this.write(e)},r.prototype.onOpen=function(){this.readyState="open",this.writable=!0,this.emit("open")},r.prototype.onData=function(e){try{var t=n.decodePacket(e,this.socket.binaryType);this.onPacket(t)}catch(r){r.data=e,this.onError("parser decode error",r)}},r.prototype.onPacket=function(e){this.emit("packet",e)},r.prototype.onClose=function(){this.readyState="closed",this.emit("close")}},{"component-emitter":14,"engine.io-parser":27}],20:[function(e,t,r){(function(t){function n(e){var r,n=!1;if(t.location){var s="https:"==location.protocol,c=location.port;c||(c=s?443:80),n=e.hostname!=location.hostname||c!=e.port}return e.xdomain=n,r=new o(e),"open"in r&&!e.forceJSONP?new i(e):new a(e)}var o=e("xmlhttprequest"),i=e("./polling-xhr"),a=e("./polling-jsonp"),s=e("./websocket");r.polling=n,r.websocket=s}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./polling-jsonp":21,"./polling-xhr":22,"./websocket":24,xmlhttprequest:25}],21:[function(e,t){(function(r){function n(){}function o(e){i.call(this,e),this.query=this.query||{},s||(r.___eio||(r.___eio=[]),s=r.___eio),this.index=s.length;var t=this;s.push(function(e){t.onData(e)}),this.query.j=this.index,r.document&&r.addEventListener&&r.addEventListener("beforeunload",function(){t.script&&(t.script.onerror=n)})}var i=e("./polling"),a=e("component-inherit");t.exports=o;var s,c=/\n/g,u=/\\n/g;a(o,i),o.prototype.supportsBinary=!1,o.prototype.doClose=function(){this.script&&(this.script.parentNode.removeChild(this.script),this.script=null),this.form&&(this.form.parentNode.removeChild(this.form),this.form=null),i.prototype.doClose.call(this)},o.prototype.doPoll=function(){var e=this,t=document.createElement("script");this.script&&(this.script.parentNode.removeChild(this.script),this.script=null),t.async=!0,t.src=this.uri(),t.onerror=function(t){e.onError("jsonp poll error",t)};var r=document.getElementsByTagName("script")[0];r.parentNode.insertBefore(t,r),this.script=t;var n="undefined"!=typeof navigator&&/gecko/i.test(navigator.userAgent);n&&setTimeout(function(){var e=document.createElement("iframe");document.body.appendChild(e),document.body.removeChild(e)},100)},o.prototype.doWrite=function(e,t){function r(){n(),t()}function n(){if(o.iframe)try{o.form.removeChild(o.iframe)}catch(e){o.onError("jsonp polling iframe removal error",e)}try{var t='<iframe src="javascript:0" name="'+o.iframeId+'">';i=document.createElement(t)}catch(e){i=document.createElement("iframe"),i.name=o.iframeId,i.src="javascript:0"}i.id=o.iframeId,o.form.appendChild(i),o.iframe=i}var o=this;if(!this.form){var i,a=document.createElement("form"),s=document.createElement("textarea"),f=this.iframeId="eio_iframe_"+this.index;a.className="socketio",a.style.position="absolute",a.style.top="-1000px",a.style.left="-1000px",a.target=f,a.method="POST",a.setAttribute("accept-charset","utf-8"),s.name="d",a.appendChild(s),document.body.appendChild(a),this.form=a,this.area=s}this.form.action=this.uri(),n(),e=e.replace(u,"\\\n"),this.area.value=e.replace(c,"\\n");try{this.form.submit()}catch(p){}this.iframe.attachEvent?this.iframe.onreadystatechange=function(){"complete"==o.iframe.readyState&&r()}:this.iframe.onload=r}}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./polling":23,"component-inherit":26}],22:[function(e,t){(function(r){function n(){}function o(e){if(c.call(this,e),r.location){var t="https:"==location.protocol,n=location.port;n||(n=t?443:80),this.xd=e.hostname!=r.location.hostname||n!=e.port}}function i(e){this.method=e.method||"GET",this.uri=e.uri,this.xd=!!e.xd,this.async=!1!==e.async,this.data=void 0!=e.data?e.data:null,this.agent=e.agent,this.create(e.isBinary,e.supportsBinary)}function a(){for(var e in i.requests)i.requests.hasOwnProperty(e)&&i.requests[e].abort()}var s=e("xmlhttprequest"),c=e("./polling"),u=e("component-emitter"),f=e("component-inherit"),p=e("debug")("engine.io-client:polling-xhr");t.exports=o,t.exports.Request=i,f(o,c),o.prototype.supportsBinary=!0,o.prototype.request=function(e){return e=e||{},e.uri=this.uri(),e.xd=this.xd,e.agent=this.agent||!1,e.supportsBinary=this.supportsBinary,new i(e)},o.prototype.doWrite=function(e,t){var r="string"!=typeof e&&void 0!==e,n=this.request({method:"POST",data:e,isBinary:r}),o=this;n.on("success",t),n.on("error",function(e){o.onError("xhr post error",e)}),this.sendXhr=n},o.prototype.doPoll=function(){p("xhr poll");var e=this.request(),t=this;e.on("data",function(e){t.onData(e)}),e.on("error",function(e){t.onError("xhr poll error",e)}),this.pollXhr=e},u(i.prototype),i.prototype.create=function(e,t){var n=this.xhr=new s({agent:this.agent,xdomain:this.xd}),o=this;try{if(p("xhr open %s: %s",this.method,this.uri),n.open(this.method,this.uri,this.async),t&&(n.responseType="arraybuffer"),"POST"==this.method)try{e?n.setRequestHeader("Content-type","application/octet-stream"):n.setRequestHeader("Content-type","text/plain;charset=UTF-8")}catch(a){}"withCredentials"in n&&(n.withCredentials=!0),n.onreadystatechange=function(){var e;try{if(4!=n.readyState)return;if(200==n.status||1223==n.status){var r=n.getResponseHeader("Content-Type");e="application/octet-stream"===r?n.response:t?"ok":n.responseText}else setTimeout(function(){o.onError(n.status)},0)}catch(i){o.onError(i)}null!=e&&o.onData(e)},p("xhr data %s",this.data),n.send(this.data)}catch(a){return void setTimeout(function(){o.onError(a)},0)}r.document&&(this.index=i.requestsCount++,i.requests[this.index]=this)},i.prototype.onSuccess=function(){this.emit("success"),this.cleanup()},i.prototype.onData=function(e){this.emit("data",e),this.onSuccess()},i.prototype.onError=function(e){this.emit("error",e),this.cleanup()},i.prototype.cleanup=function(){if("undefined"!=typeof this.xhr&&null!==this.xhr){this.xhr.onreadystatechange=n;try{this.xhr.abort()}catch(e){}r.document&&delete i.requests[this.index],this.xhr=null}},i.prototype.abort=function(){this.cleanup()},r.document&&(i.requestsCount=0,i.requests={},r.attachEvent?r.attachEvent("onunload",a):r.addEventListener&&r.addEventListener("beforeunload",a))}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./polling":23,"component-emitter":14,"component-inherit":26,debug:15,xmlhttprequest:25}],23:[function(e,t){function r(e){var t=e&&e.forceBase64;(!c||t)&&(this.supportsBinary=!1),n.call(this,e)}var n=e("../transport"),o=e("parseqs"),i=e("engine.io-parser"),a=e("component-inherit"),s=e("debug")("engine.io-client:polling");t.exports=r;var c=function(){var t=e("xmlhttprequest"),r=new t({agent:this.agent,xdomain:!1});return null!=r.responseType}();a(r,n),r.prototype.name="polling",r.prototype.doOpen=function(){this.poll()},r.prototype.pause=function(e){function t(){s("paused"),r.readyState="paused",e()}var r=this;if(this.readyState="pausing",this.polling||!this.writable){var n=0;this.polling&&(s("we are currently polling - waiting to pause"),n++,this.once("pollComplete",function(){s("pre-pause polling complete"),--n||t()})),this.writable||(s("we are currently writing - waiting to pause"),n++,this.once("drain",function(){s("pre-pause writing complete"),--n||t()}))}else t()},r.prototype.poll=function(){s("polling"),this.polling=!0,this.doPoll(),this.emit("poll")},r.prototype.onData=function(e){var t=this;s("polling got data %s",e);var r=function(e){return"opening"==t.readyState&&t.onOpen(),"close"==e.type?(t.onClose(),!1):void t.onPacket(e)};i.decodePayload(e,this.socket.binaryType,r),"closed"!=this.readyState&&(this.polling=!1,this.emit("pollComplete"),"open"==this.readyState?this.poll():s('ignoring poll - transport state "%s"',this.readyState))},r.prototype.doClose=function(){function e(){s("writing close packet"),t.write([{type:"close"}])}var t=this;"open"==this.readyState?(s("transport open - closing"),e()):(s("transport not open - deferring close"),this.once("open",e))},r.prototype.write=function(e){var t=this;this.writable=!1;var r=function(){t.writable=!0,t.emit("drain")},t=this;i.encodePayload(e,this.supportsBinary,function(e){t.doWrite(e,r)})},r.prototype.uri=function(){var e=this.query||{},t=this.secure?"https":"http",r="";return!1!==this.timestampRequests&&(e[this.timestampParam]=+new Date+"-"+n.timestamps++),this.supportsBinary||e.sid||(e.b64=1),e=o.encode(e),this.port&&("https"==t&&443!=this.port||"http"==t&&80!=this.port)&&(r=":"+this.port),e.length&&(e="?"+e),t+"://"+this.hostname+r+this.path+e}},{"../transport":19,"component-inherit":26,debug:15,"engine.io-parser":27,parseqs:37,xmlhttprequest:25}],24:[function(e,t){function r(e){var t=e&&e.forceBase64;t&&(this.supportsBinary=!1),n.call(this,e)}var n=e("../transport"),o=e("engine.io-parser"),i=e("parseqs"),a=e("component-inherit"),s=e("debug")("engine.io-client:websocket"),c=e("ws");t.exports=r,a(r,n),r.prototype.name="websocket",r.prototype.supportsBinary=!0,r.prototype.doOpen=function(){if(this.check()){var e=this.uri(),t=void 0,r={agent:this.agent};this.ws=new c(e,t,r),void 0===this.ws.binaryType&&(this.supportsBinary=!1),this.ws.binaryType="arraybuffer",this.addEventListeners()}},r.prototype.addEventListeners=function(){var e=this;this.ws.onopen=function(){e.onOpen()},this.ws.onclose=function(){e.onClose()},this.ws.onmessage=function(t){e.onData(t.data)},this.ws.onerror=function(t){e.onError("websocket error",t)}},"undefined"!=typeof navigator&&/iPad|iPhone|iPod/i.test(navigator.userAgent)&&(r.prototype.onData=function(e){var t=this;setTimeout(function(){n.prototype.onData.call(t,e)},0)}),r.prototype.write=function(e){function t(){r.writable=!0,r.emit("drain")}var r=this;this.writable=!1;for(var n=0,i=e.length;i>n;n++)o.encodePacket(e[n],this.supportsBinary,function(e){try{r.ws.send(e)}catch(t){s("websocket closed before onclose event")}});setTimeout(t,0)},r.prototype.onClose=function(){n.prototype.onClose.call(this)},r.prototype.doClose=function(){"undefined"!=typeof this.ws&&this.ws.close()},r.prototype.uri=function(){var e=this.query||{},t=this.secure?"wss":"ws",r="";return this.port&&("wss"==t&&443!=this.port||"ws"==t&&80!=this.port)&&(r=":"+this.port),this.timestampRequests&&(e[this.timestampParam]=+new Date),this.supportsBinary||(e.b64=1),e=i.encode(e),e.length&&(e="?"+e),t+"://"+this.hostname+r+this.path+e},r.prototype.check=function(){return!(!c||"__initialize"in c&&this.name===r.prototype.name)}},{"../transport":19,"component-inherit":26,debug:15,"engine.io-parser":27,parseqs:37,ws:38}],25:[function(e,t){var r=e("has-cors");t.exports=function(e){var t=e.xdomain;try{if("undefined"!=typeof XMLHttpRequest&&(!t||r))return new XMLHttpRequest}catch(n){}if(!t)try{return new ActiveXObject("Microsoft.XMLHTTP")}catch(n){}}},{"has-cors":34}],26:[function(e,t){t.exports=function(e,t){var r=function(){};r.prototype=t.prototype,e.prototype=new r,e.prototype.constructor=e}},{}],27:[function(e,t,r){(function(t){function n(e,t,n){if(!t)return r.encodeBase64Packet(e,n);var o=e.data,i=new Uint8Array(o),a=new Uint8Array(1+o.byteLength);a[0]=h[e.type];for(var s=0;s<i.length;s++)a[s+1]=i[s];return n(a.buffer)}function o(e,t,n){if(!t)return r.encodeBase64Packet(e,n);var o=new FileReader;return o.onload=function(){e.data=o.result,r.encodePacket(e,t,n)},o.readAsArrayBuffer(e.data)}function i(e,t,n){if(!t)return r.encodeBase64Packet(e,n);if(l)return o(e,t,n);var i=new Uint8Array(1);i[0]=h[e.type];var a=new g([i.buffer,e.data]);return n(a)}function a(e,t,r){for(var n=new Array(e.length),o=f(e.length,r),i=function(e,r,o){t(r,function(t,r){n[e]=r,o(t,n)})},a=0;a<e.length;a++)i(a,e[a],o)}var s=e("./keys"),c=e("arraybuffer.slice"),u=e("base64-arraybuffer"),f=e("after"),p=e("utf8"),l=navigator.userAgent.match(/Android/i);r.protocol=2;var h=r.packets={open:0,close:1,ping:2,pong:3,message:4,upgrade:5,noop:6},d=s(h),v={type:"error",data:"parser error"},g=e("blob");r.encodePacket=function(e,r,o){"function"==typeof r&&(o=r,r=!1);var a=void 0===e.data?void 0:e.data.buffer||e.data;if(t.ArrayBuffer&&a instanceof ArrayBuffer)return n(e,r,o);if(g&&a instanceof t.Blob)return i(e,r,o);var s=h[e.type];return void 0!==e.data&&(s+=p.encode(String(e.data))),o(""+s)},r.encodeBase64Packet=function(e,n){var o="b"+r.packets[e.type];if(g&&e.data instanceof g){var i=new FileReader;return i.onload=function(){var e=i.result.split(",")[1];n(o+e)},i.readAsDataURL(e.data)}var a;try{a=String.fromCharCode.apply(null,new Uint8Array(e.data))}catch(s){for(var c=new Uint8Array(e.data),u=new Array(c.length),f=0;f<c.length;f++)u[f]=c[f];a=String.fromCharCode.apply(null,u)}return o+=t.btoa(a),n(o)},r.decodePacket=function(e,t){if("string"==typeof e||void 0===e){if("b"==e.charAt(0))return r.decodeBase64Packet(e.substr(1),t);e=p.decode(e);var n=e.charAt(0);return Number(n)==n&&d[n]?e.length>1?{type:d[n],data:e.substring(1)}:{type:d[n]}:v}var o=new Uint8Array(e),n=o[0],i=c(e,1);return g&&"blob"===t&&(i=new g([i])),{type:d[n],data:i}},r.decodeBase64Packet=function(e,r){var n=d[e.charAt(0)];if(!t.ArrayBuffer)return{type:n,data:{base64:!0,data:e.substr(1)}};var o=u.decode(e.substr(1));return"blob"===r&&g&&(o=new g([o])),{type:n,data:o}},r.encodePayload=function(e,t,n){function o(e){return e.length+":"+e}function i(e,n){r.encodePacket(e,t,function(e){n(null,o(e))})}return"function"==typeof t&&(n=t,t=null),t?g&&!l?r.encodePayloadAsBlob(e,n):r.encodePayloadAsArrayBuffer(e,n):e.length?void a(e,i,function(e,t){return n(t.join(""))}):n("0:")},r.decodePayload=function(e,t,n){if("string"!=typeof e)return r.decodePayloadAsBinary(e,t,n);"function"==typeof t&&(n=t,t=null);var o;if(""==e)return n(v,0,1);for(var i,a,s="",c=0,u=e.length;u>c;c++){var f=e.charAt(c);if(":"!=f)s+=f;else{if(""==s||s!=(i=Number(s)))return n(v,0,1);if(a=e.substr(c+1,i),s!=a.length)return n(v,0,1);if(a.length){if(o=r.decodePacket(a,t),v.type==o.type&&v.data==o.data)return n(v,0,1);var p=n(o,c+i,u);if(!1===p)return}c+=i,s=""}}return""!=s?n(v,0,1):void 0},r.encodePayloadAsArrayBuffer=function(e,t){function n(e,t){r.encodePacket(e,!0,function(e){return t(null,e)})}return e.length?void a(e,n,function(e,r){var n=r.reduce(function(e,t){var r;return r="string"==typeof t?t.length:t.byteLength,e+r.toString().length+r+2},0),o=new Uint8Array(n),i=0;return r.forEach(function(e){var t="string"==typeof e,r=e;if(t){for(var n=new Uint8Array(e.length),a=0;a<e.length;a++)n[a]=e.charCodeAt(a);r=n.buffer}o[i++]=t?0:1;for(var s=r.byteLength.toString(),a=0;a<s.length;a++)o[i++]=parseInt(s[a]);o[i++]=255;for(var n=new Uint8Array(r),a=0;a<n.length;a++)o[i++]=n[a]}),t(o.buffer)}):t(new ArrayBuffer(0))},r.encodePayloadAsBlob=function(e,t){function n(e,t){r.encodePacket(e,!0,function(e){var r=new Uint8Array(1);if(r[0]=1,"string"==typeof e){for(var n=new Uint8Array(e.length),o=0;o<e.length;o++)n[o]=e.charCodeAt(o);e=n.buffer,r[0]=0}for(var i=e instanceof ArrayBuffer?e.byteLength:e.size,a=i.toString(),s=new Uint8Array(a.length+1),o=0;o<a.length;o++)s[o]=parseInt(a[o]);if(s[a.length]=255,g){var c=new g([r.buffer,s.buffer,e]);t(null,c)}})}a(e,n,function(e,r){return t(new g(r))})},r.decodePayloadAsBinary=function(e,t,n){"function"==typeof t&&(n=t,t=null);for(var o=e,i=[];o.byteLength>0;){for(var a=new Uint8Array(o),s=0===a[0],u="",f=1;255!=a[f];f++)u+=a[f];o=c(o,2+u.length),u=parseInt(u);var p=c(o,0,u);if(s)try{p=String.fromCharCode.apply(null,new Uint8Array(p))}catch(l){var h=new Uint8Array(p);p="";for(var f=0;f<h.length;f++)p+=String.fromCharCode(h[f])}i.push(p),o=c(o,u)}var d=i.length;i.forEach(function(e,o){n(r.decodePacket(e,t),o,d)})}}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})
},{"./keys":28,after:29,"arraybuffer.slice":30,"base64-arraybuffer":31,blob:32,utf8:33}],28:[function(e,t){t.exports=Object.keys||function(e){var t=[],r=Object.prototype.hasOwnProperty;for(var n in e)r.call(e,n)&&t.push(n);return t}},{}],29:[function(e,t){function r(e,t,r){function o(e,n){if(o.count<=0)throw new Error("after called too many times");--o.count,e?(i=!0,t(e),t=r):0!==o.count||i||t(null,n)}var i=!1;return r=r||n,o.count=e,0===e?t():o}function n(){}t.exports=r},{}],30:[function(e,t){t.exports=function(e,t,r){var n=e.byteLength;if(t=t||0,r=r||n,e.slice)return e.slice(t,r);if(0>t&&(t+=n),0>r&&(r+=n),r>n&&(r=n),t>=n||t>=r||0===n)return new ArrayBuffer(0);for(var o=new Uint8Array(e),i=new Uint8Array(r-t),a=t,s=0;r>a;a++,s++)i[s]=o[a];return i.buffer}},{}],31:[function(e,t,r){!function(e){"use strict";r.encode=function(t){var r,n=new Uint8Array(t),o=n.length,i="";for(r=0;o>r;r+=3)i+=e[n[r]>>2],i+=e[(3&n[r])<<4|n[r+1]>>4],i+=e[(15&n[r+1])<<2|n[r+2]>>6],i+=e[63&n[r+2]];return o%3===2?i=i.substring(0,i.length-1)+"=":o%3===1&&(i=i.substring(0,i.length-2)+"=="),i},r.decode=function(t){var r,n,o,i,a,s=.75*t.length,c=t.length,u=0;"="===t[t.length-1]&&(s--,"="===t[t.length-2]&&s--);var f=new ArrayBuffer(s),p=new Uint8Array(f);for(r=0;c>r;r+=4)n=e.indexOf(t[r]),o=e.indexOf(t[r+1]),i=e.indexOf(t[r+2]),a=e.indexOf(t[r+3]),p[u++]=n<<2|o>>4,p[u++]=(15&o)<<4|i>>2,p[u++]=(3&i)<<6|63&a;return f}}("ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/")},{}],32:[function(e,t){(function(e){function r(e,t){t=t||{};for(var r=new n,o=0;o<e.length;o++)r.append(e[o]);return t.type?r.getBlob(t.type):r.getBlob()}var n=e.BlobBuilder||e.WebKitBlobBuilder||e.MSBlobBuilder||e.MozBlobBuilder,o=function(){try{var e=new Blob(["hi"]);return 2==e.size}catch(t){return!1}}(),i=n&&n.prototype.append&&n.prototype.getBlob;t.exports=function(){return o?e.Blob:i?r:void 0}()}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],33:[function(e,t,r){(function(e){!function(n){function o(e){for(var t,r,n=[],o=0,i=e.length;i>o;)t=e.charCodeAt(o++),t>=55296&&56319>=t&&i>o?(r=e.charCodeAt(o++),56320==(64512&r)?n.push(((1023&t)<<10)+(1023&r)+65536):(n.push(t),o--)):n.push(t);return n}function i(e){for(var t,r=e.length,n=-1,o="";++n<r;)t=e[n],t>65535&&(t-=65536,o+=m(t>>>10&1023|55296),t=56320|1023&t),o+=m(t);return o}function a(e,t){return m(e>>t&63|128)}function s(e){if(0==(4294967168&e))return m(e);var t="";return 0==(4294965248&e)?t=m(e>>6&31|192):0==(4294901760&e)?(t=m(e>>12&15|224),t+=a(e,6)):0==(4292870144&e)&&(t=m(e>>18&7|240),t+=a(e,12),t+=a(e,6)),t+=m(63&e|128)}function c(e){for(var t,r=o(e),n=r.length,i=-1,a="";++i<n;)t=r[i],a+=s(t);return a}function u(){if(y>=g)throw Error("Invalid byte index");var e=255&v[y];if(y++,128==(192&e))return 63&e;throw Error("Invalid continuation byte")}function f(){var e,t,r,n,o;if(y>g)throw Error("Invalid byte index");if(y==g)return!1;if(e=255&v[y],y++,0==(128&e))return e;if(192==(224&e)){var t=u();if(o=(31&e)<<6|t,o>=128)return o;throw Error("Invalid continuation byte")}if(224==(240&e)){if(t=u(),r=u(),o=(15&e)<<12|t<<6|r,o>=2048)return o;throw Error("Invalid continuation byte")}if(240==(248&e)&&(t=u(),r=u(),n=u(),o=(15&e)<<18|t<<12|r<<6|n,o>=65536&&1114111>=o))return o;throw Error("Invalid UTF-8 detected")}function p(e){v=o(e),g=v.length,y=0;for(var t,r=[];(t=f())!==!1;)r.push(t);return i(r)}var l="object"==typeof r&&r,h="object"==typeof t&&t&&t.exports==l&&t,d="object"==typeof e&&e;(d.global===d||d.window===d)&&(n=d);var v,g,y,m=String.fromCharCode,b={version:"2.0.0",encode:c,decode:p};if("function"==typeof define&&"object"==typeof define.amd&&define.amd)define(function(){return b});else if(l&&!l.nodeType)if(h)h.exports=b;else{var w={},k=w.hasOwnProperty;for(var x in b)k.call(b,x)&&(l[x]=b[x])}else n.utf8=b}(this)}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],34:[function(e,t){var r=e("global");try{t.exports="XMLHttpRequest"in r&&"withCredentials"in new r.XMLHttpRequest}catch(n){t.exports=!1}},{global:35}],35:[function(e,t){t.exports=function(){return this}()},{}],36:[function(e,t){(function(e){var r=/^[\],:{}\s]*$/,n=/\\(?:["\\\/bfnrt]|u[0-9a-fA-F]{4})/g,o=/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,i=/(?:^|:|,)(?:\s*\[)+/g,a=/^\s+/,s=/\s+$/;t.exports=function(t){return"string"==typeof t&&t?(t=t.replace(a,"").replace(s,""),e.JSON&&JSON.parse?JSON.parse(t):r.test(t.replace(n,"@").replace(o,"]").replace(i,""))?new Function("return "+t)():void 0):null}}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],37:[function(e,t,r){r.encode=function(e){var t="";for(var r in e)e.hasOwnProperty(r)&&(t.length&&(t+="&"),t+=encodeURIComponent(r)+"="+encodeURIComponent(e[r]));return t},r.decode=function(e){for(var t={},r=e.split("&"),n=0,o=r.length;o>n;n++){var i=r[n].split("=");t[decodeURIComponent(i[0])]=decodeURIComponent(i[1])}return t}},{}],38:[function(e,t){function r(e,t){var r;return r=t?new o(e,t):new o(e)}var n=function(){return this}(),o=n.WebSocket||n.MozWebSocket;t.exports=o?r:null,o&&(r.prototype=o.prototype)},{}],39:[function(e,t){(function(r,n){function o(e){function t(e){if(!e)return!1;if(r.Buffer&&n.isBuffer(e)||r.ArrayBuffer&&e instanceof ArrayBuffer||r.Blob&&e instanceof Blob||r.File&&e instanceof File)return!0;if(i(e)){for(var o=0;o<e.length;o++)if(t(e[o]))return!0}else if(e&&"object"==typeof e){e.toJSON&&(e=e.toJSON());for(var a in e)if(t(e[a]))return!0}return!1}return t(e)}var i=e("isarray");t.exports=o}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{},e("buffer").Buffer)},{buffer:2,isarray:40}],40:[function(e,t){t.exports=Array.isArray||function(e){return"[object Array]"==Object.prototype.toString.call(e)}},{}],41:[function(e,t){var r=[].indexOf;t.exports=function(e,t){if(r)return e.indexOf(t);for(var n=0;n<e.length;++n)if(e[n]===t)return n;return-1}},{}],42:[function(e,t,r){var n=Object.prototype.hasOwnProperty;r.keys=Object.keys||function(e){var t=[];for(var r in e)n.call(e,r)&&t.push(r);return t},r.values=function(e){var t=[];for(var r in e)n.call(e,r)&&t.push(e[r]);return t},r.merge=function(e,t){for(var r in t)n.call(t,r)&&(e[r]=t[r]);return e},r.length=function(e){return r.keys(e).length},r.isEmpty=function(e){return 0==r.length(e)}},{}],43:[function(e,t){var r=/^(?:(?![^:@]+:[^:@\/]*@)(http|https|ws|wss):\/\/)?((?:(([^:@]*)(?::([^:@]*))?)?@)?((?:[a-f0-9]{0,4}:){2,7}[a-f0-9]{0,4}|[^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/,n=["source","protocol","authority","userInfo","user","password","host","port","relative","path","directory","file","query","anchor"];t.exports=function(e){for(var t=r.exec(e||""),o={},i=14;i--;)o[n[i]]=t[i]||"";return o}},{}],44:[function(e,t,r){(function(t,n){function o(e){return t.Buffer&&n.isBuffer(e)||t.ArrayBuffer&&e instanceof ArrayBuffer}var i=e("isarray");r.deconstructPacket=function(e){function r(e){if(!e)return e;if(t.Buffer&&n.isBuffer(e)||t.ArrayBuffer&&e instanceof ArrayBuffer){var a={_placeholder:!0,num:o.length};return o.push(e),a}if(i(e)){for(var s=new Array(e.length),c=0;c<e.length;c++)s[c]=r(e[c]);return s}if("object"==typeof e&&!(e instanceof Date)){var s={};for(var u in e)s[u]=r(e[u]);return s}return e}var o=[],a=e.data,s=e;return s.data=r(a),s.attachments=o.length,{packet:s,buffers:o}},r.reconstructPacket=function(e,t){function r(e){if(e&&e._placeholder){var n=t[e.num];return n}if(i(e)){for(var o=0;o<e.length;o++)e[o]=r(e[o]);return e}if(e&&"object"==typeof e){for(var a in e)e[a]=r(e[a]);return e}return e}return e.data=r(e.data),e.attachments=void 0,e},r.removeBlobs=function(e,r){function n(e,c,u){if(!e)return e;if(t.Blob&&e instanceof Blob||t.File&&e instanceof File){a++;var f=new FileReader;f.onload=function(){u?u[c]=this.result:s=this.result,--a||r(s)},f.readAsArrayBuffer(e)}if(i(e))for(var p=0;p<e.length;p++)n(e[p],p,e);else if(e&&"object"==typeof e&&!o(e))for(var l in e)n(e[l],l,e)}var a=0,s=e;n(s),a||r(s)}}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{},e("buffer").Buffer)},{buffer:2,isarray:47}],45:[function(e,t,r){(function(t,n){function o(){}function i(e){var t="",n=!1;return t+=e.type,(r.BINARY_EVENT==e.type||r.BINARY_ACK==e.type)&&(t+=e.attachments,t+="-"),e.nsp&&"/"!=e.nsp&&(n=!0,t+=e.nsp),null!=e.id&&(n&&(t+=",",n=!1),t+=e.id),null!=e.data&&(n&&(t+=","),t+=l.stringify(e.data)),p("encoded %j as %s",e,t),t}function a(e,t){function r(e){var r=d.deconstructPacket(e),n=i(r.packet),o=r.buffers;o.unshift(n),t(o)}d.removeBlobs(e,r)}function s(){this.reconstructor=null}function c(e){var t={},n=0;if(t.type=Number(e.charAt(0)),null==r.types[t.type])return f();if(r.BINARY_EVENT==t.type||r.BINARY_ACK==t.type){for(t.attachments="";"-"!=e.charAt(++n);)t.attachments+=e.charAt(n);t.attachments=Number(t.attachments)}if("/"==e.charAt(n+1))for(t.nsp="";++n;){var o=e.charAt(n);if(","==o)break;if(t.nsp+=o,n+1==e.length)break}else t.nsp="/";var i=e.charAt(n+1);if(""!=i&&Number(i)==i){for(t.id="";++n;){var o=e.charAt(n);if(null==o||Number(o)!=o){--n;break}if(t.id+=e.charAt(n),n+1==e.length)break}t.id=Number(t.id)}if(e.charAt(++n))try{t.data=l.parse(e.substr(n))}catch(a){return f()}return p("decoded %s as %j",e,t),t}function u(e){this.reconPack=e,this.buffers=[]}function f(){return{type:r.ERROR,data:"parser error"}}var p=e("debug")("socket.io-parser"),l=e("json3"),h=(e("isarray"),e("emitter")),d=e("./binary");r.protocol=3,r.types=["CONNECT","DISCONNECT","EVENT","BINARY_EVENT","ACK","BINARY_ACK","ERROR"],r.CONNECT=0,r.DISCONNECT=1,r.EVENT=2,r.ACK=3,r.ERROR=4,r.BINARY_EVENT=5,r.BINARY_ACK=6,r.Encoder=o,o.prototype.encode=function(e,t){if(p("encoding packet %j",e),r.BINARY_EVENT==e.type||r.BINARY_ACK==e.type)a(e,t);else{var n=i(e);t([n])}},r.Decoder=s,h(s.prototype),s.prototype.add=function(e){var o;if("string"==typeof e)o=c(e),r.BINARY_EVENT==o.type||r.BINARY_ACK==o.type?(this.reconstructor=new u(o),0==this.reconstructor.reconPack.attachments&&this.emit("decoded",o)):this.emit("decoded",o);else{if(!(t.Buffer&&n.isBuffer(e)||t.ArrayBuffer&&e instanceof ArrayBuffer||e.base64))throw new Error("Unknown type: "+e);if(!this.reconstructor)throw new Error("got binary data when not reconstructing a packet");o=this.reconstructor.takeBinaryData(e),o&&(this.reconstructor=null,this.emit("decoded",o))}},s.prototype.destroy=function(){this.reconstructor&&this.reconstructor.finishedReconstruction()},u.prototype.takeBinaryData=function(e){if(this.buffers.push(e),this.buffers.length==this.reconPack.attachments){var t=d.reconstructPacket(this.reconPack,this.buffers);return this.finishedReconstruction(),t}return null},u.prototype.finishedReconstruction=function(){this.reconPack=null,this.buffers=[]}}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{},e("buffer").Buffer)},{"./binary":44,buffer:2,debug:15,emitter:46,isarray:47,json3:48}],46:[function(e,t){function r(e){return e?n(e):void 0}function n(e){for(var t in r.prototype)e[t]=r.prototype[t];return e}var o=e("indexof");t.exports=r,r.prototype.on=function(e,t){return this._callbacks=this._callbacks||{},(this._callbacks[e]=this._callbacks[e]||[]).push(t),this},r.prototype.once=function(e,t){function r(){n.off(e,r),t.apply(this,arguments)}var n=this;return this._callbacks=this._callbacks||{},t._off=r,this.on(e,r),this},r.prototype.off=r.prototype.removeListener=r.prototype.removeAllListeners=function(e,t){if(this._callbacks=this._callbacks||{},0==arguments.length)return this._callbacks={},this;var r=this._callbacks[e];if(!r)return this;if(1==arguments.length)return delete this._callbacks[e],this;var n=o(r,t._off||t);return~n&&r.splice(n,1),this},r.prototype.emit=function(e){this._callbacks=this._callbacks||{};var t=[].slice.call(arguments,1),r=this._callbacks[e];if(r){r=r.slice(0);for(var n=0,o=r.length;o>n;++n)r[n].apply(this,t)}return this},r.prototype.listeners=function(e){return this._callbacks=this._callbacks||{},this._callbacks[e]||[]},r.prototype.hasListeners=function(e){return!!this.listeners(e).length}},{indexof:41}],47:[function(e,t){t.exports=e(40)},{"/Users/henrique/dev/repos/appbasejs-compact/node_modules/socket.io-client/node_modules/has-binary-data/node_modules/isarray/index.js":40}],48:[function(e,t,r){!function(e){function t(e){if(t[e]!==i)return t[e];var r;if("bug-string-char-index"==e)r="a"!="a"[0];else if("json"==e)r=t("json-stringify")&&t("json-parse");else{var n,o='{"a":[1,true,false,null,"\\u0000\\b\\n\\f\\r\\t"]}';if("json-stringify"==e){var s=u.stringify,c="function"==typeof s&&f;if(c){(n=function(){return 1}).toJSON=n;try{c="0"===s(0)&&"0"===s(new Number)&&'""'==s(new String)&&s(a)===i&&s(i)===i&&s()===i&&"1"===s(n)&&"[1]"==s([n])&&"[null]"==s([i])&&"null"==s(null)&&"[null,null,null]"==s([i,a,null])&&s({a:[n,!0,!1,null,"\x00\b\n\f\r	"]})==o&&"1"===s(null,n)&&"[\n 1,\n 2\n]"==s([1,2],null,1)&&'"-271821-04-20T00:00:00.000Z"'==s(new Date(-864e13))&&'"+275760-09-13T00:00:00.000Z"'==s(new Date(864e13))&&'"-000001-01-01T00:00:00.000Z"'==s(new Date(-621987552e5))&&'"1969-12-31T23:59:59.999Z"'==s(new Date(-1))}catch(p){c=!1}}r=c}if("json-parse"==e){var l=u.parse;if("function"==typeof l)try{if(0===l("0")&&!l(!1)){n=l(o);var h=5==n.a.length&&1===n.a[0];if(h){try{h=!l('"	"')}catch(p){}if(h)try{h=1!==l("01")}catch(p){}if(h)try{h=1!==l("1.")}catch(p){}}}}catch(p){h=!1}r=h}}return t[e]=!!r}var n,o,i,a={}.toString,s="function"==typeof define&&define.amd,c="object"==typeof JSON&&JSON,u="object"==typeof r&&r&&!r.nodeType&&r;u&&c?(u.stringify=c.stringify,u.parse=c.parse):u=e.JSON=c||{};var f=new Date(-0xc782b5b800cec);try{f=-109252==f.getUTCFullYear()&&0===f.getUTCMonth()&&1===f.getUTCDate()&&10==f.getUTCHours()&&37==f.getUTCMinutes()&&6==f.getUTCSeconds()&&708==f.getUTCMilliseconds()}catch(p){}if(!t("json")){var l="[object Function]",h="[object Date]",d="[object Number]",v="[object String]",g="[object Array]",y="[object Boolean]",m=t("bug-string-char-index");if(!f)var b=Math.floor,w=[0,31,59,90,120,151,181,212,243,273,304,334],k=function(e,t){return w[t]+365*(e-1970)+b((e-1969+(t=+(t>1)))/4)-b((e-1901+t)/100)+b((e-1601+t)/400)};(n={}.hasOwnProperty)||(n=function(e){var t,r={};return(r.__proto__=null,r.__proto__={toString:1},r).toString!=a?n=function(e){var t=this.__proto__,r=e in(this.__proto__=null,this);return this.__proto__=t,r}:(t=r.constructor,n=function(e){var r=(this.constructor||t).prototype;return e in this&&!(e in r&&this[e]===r[e])}),r=null,n.call(this,e)});var x={"boolean":1,number:1,string:1,undefined:1},E=function(e,t){var r=typeof e[t];return"object"==r?!!e[t]:!x[r]};if(o=function(e,t){var r,i,s,c=0;(r=function(){this.valueOf=0}).prototype.valueOf=0,i=new r;for(s in i)n.call(i,s)&&c++;return r=i=null,c?o=2==c?function(e,t){var r,o={},i=a.call(e)==l;for(r in e)i&&"prototype"==r||n.call(o,r)||!(o[r]=1)||!n.call(e,r)||t(r)}:function(e,t){var r,o,i=a.call(e)==l;for(r in e)i&&"prototype"==r||!n.call(e,r)||(o="constructor"===r)||t(r);(o||n.call(e,r="constructor"))&&t(r)}:(i=["valueOf","toString","toLocaleString","propertyIsEnumerable","isPrototypeOf","hasOwnProperty","constructor"],o=function(e,t){var r,o,s=a.call(e)==l,c=!s&&"function"!=typeof e.constructor&&E(e,"hasOwnProperty")?e.hasOwnProperty:n;for(r in e)s&&"prototype"==r||!c.call(e,r)||t(r);for(o=i.length;r=i[--o];c.call(e,r)&&t(r));}),o(e,t)},!t("json-stringify")){var _={92:"\\\\",34:'\\"',8:"\\b",12:"\\f",10:"\\n",13:"\\r",9:"\\t"},A="000000",j=function(e,t){return(A+(t||0)).slice(-e)},T="\\u00",C=function(e){var t,r='"',n=0,o=e.length,i=o>10&&m;for(i&&(t=e.split(""));o>n;n++){var a=e.charCodeAt(n);switch(a){case 8:case 9:case 10:case 12:case 13:case 34:case 92:r+=_[a];break;default:if(32>a){r+=T+j(2,a.toString(16));break}r+=i?t[n]:m?e.charAt(n):e[n]}}return r+'"'},S=function(e,t,r,s,c,u,f){var p,l,m,w,x,E,_,A,T,R,L,U,P,O,B,I;try{p=t[e]}catch(N){}if("object"==typeof p&&p)if(l=a.call(p),l!=h||n.call(p,"toJSON"))"function"==typeof p.toJSON&&(l!=d&&l!=v&&l!=g||n.call(p,"toJSON"))&&(p=p.toJSON(e));else if(p>-1/0&&1/0>p){if(k){for(x=b(p/864e5),m=b(x/365.2425)+1970-1;k(m+1,0)<=x;m++);for(w=b((x-k(m,0))/30.42);k(m,w+1)<=x;w++);x=1+x-k(m,w),E=(p%864e5+864e5)%864e5,_=b(E/36e5)%24,A=b(E/6e4)%60,T=b(E/1e3)%60,R=E%1e3}else m=p.getUTCFullYear(),w=p.getUTCMonth(),x=p.getUTCDate(),_=p.getUTCHours(),A=p.getUTCMinutes(),T=p.getUTCSeconds(),R=p.getUTCMilliseconds();p=(0>=m||m>=1e4?(0>m?"-":"+")+j(6,0>m?-m:m):j(4,m))+"-"+j(2,w+1)+"-"+j(2,x)+"T"+j(2,_)+":"+j(2,A)+":"+j(2,T)+"."+j(3,R)+"Z"}else p=null;if(r&&(p=r.call(t,e,p)),null===p)return"null";if(l=a.call(p),l==y)return""+p;if(l==d)return p>-1/0&&1/0>p?""+p:"null";if(l==v)return C(""+p);if("object"==typeof p){for(O=f.length;O--;)if(f[O]===p)throw TypeError();if(f.push(p),L=[],B=u,u+=c,l==g){for(P=0,O=p.length;O>P;P++)U=S(P,p,r,s,c,u,f),L.push(U===i?"null":U);I=L.length?c?"[\n"+u+L.join(",\n"+u)+"\n"+B+"]":"["+L.join(",")+"]":"[]"}else o(s||p,function(e){var t=S(e,p,r,s,c,u,f);t!==i&&L.push(C(e)+":"+(c?" ":"")+t)}),I=L.length?c?"{\n"+u+L.join(",\n"+u)+"\n"+B+"}":"{"+L.join(",")+"}":"{}";return f.pop(),I}};u.stringify=function(e,t,r){var n,o,i,s;if("function"==typeof t||"object"==typeof t&&t)if((s=a.call(t))==l)o=t;else if(s==g){i={};for(var c,u=0,f=t.length;f>u;c=t[u++],s=a.call(c),(s==v||s==d)&&(i[c]=1));}if(r)if((s=a.call(r))==d){if((r-=r%1)>0)for(n="",r>10&&(r=10);n.length<r;n+=" ");}else s==v&&(n=r.length<=10?r:r.slice(0,10));return S("",(c={},c[""]=e,c),o,i,n,"",[])}}if(!t("json-parse")){var R,L,U=String.fromCharCode,P={92:"\\",34:'"',47:"/",98:"\b",116:"	",110:"\n",102:"\f",114:"\r"},O=function(){throw R=L=null,SyntaxError()},B=function(){for(var e,t,r,n,o,i=L,a=i.length;a>R;)switch(o=i.charCodeAt(R)){case 9:case 10:case 13:case 32:R++;break;case 123:case 125:case 91:case 93:case 58:case 44:return e=m?i.charAt(R):i[R],R++,e;case 34:for(e="@",R++;a>R;)if(o=i.charCodeAt(R),32>o)O();else if(92==o)switch(o=i.charCodeAt(++R)){case 92:case 34:case 47:case 98:case 116:case 110:case 102:case 114:e+=P[o],R++;break;case 117:for(t=++R,r=R+4;r>R;R++)o=i.charCodeAt(R),o>=48&&57>=o||o>=97&&102>=o||o>=65&&70>=o||O();e+=U("0x"+i.slice(t,R));break;default:O()}else{if(34==o)break;for(o=i.charCodeAt(R),t=R;o>=32&&92!=o&&34!=o;)o=i.charCodeAt(++R);e+=i.slice(t,R)}if(34==i.charCodeAt(R))return R++,e;O();default:if(t=R,45==o&&(n=!0,o=i.charCodeAt(++R)),o>=48&&57>=o){for(48==o&&(o=i.charCodeAt(R+1),o>=48&&57>=o)&&O(),n=!1;a>R&&(o=i.charCodeAt(R),o>=48&&57>=o);R++);if(46==i.charCodeAt(R)){for(r=++R;a>r&&(o=i.charCodeAt(r),o>=48&&57>=o);r++);r==R&&O(),R=r}if(o=i.charCodeAt(R),101==o||69==o){for(o=i.charCodeAt(++R),(43==o||45==o)&&R++,r=R;a>r&&(o=i.charCodeAt(r),o>=48&&57>=o);r++);r==R&&O(),R=r}return+i.slice(t,R)}if(n&&O(),"true"==i.slice(R,R+4))return R+=4,!0;if("false"==i.slice(R,R+5))return R+=5,!1;if("null"==i.slice(R,R+4))return R+=4,null;O()}return"$"},I=function(e){var t,r;if("$"==e&&O(),"string"==typeof e){if("@"==(m?e.charAt(0):e[0]))return e.slice(1);if("["==e){for(t=[];e=B(),"]"!=e;r||(r=!0))r&&(","==e?(e=B(),"]"==e&&O()):O()),","==e&&O(),t.push(I(e));return t}if("{"==e){for(t={};e=B(),"}"!=e;r||(r=!0))r&&(","==e?(e=B(),"}"==e&&O()):O()),(","==e||"string"!=typeof e||"@"!=(m?e.charAt(0):e[0])||":"!=B())&&O(),t[e.slice(1)]=I(B());return t}O()}return e},N=function(e,t,r){var n=D(e,t,r);n===i?delete e[t]:e[t]=n},D=function(e,t,r){var n,i=e[t];if("object"==typeof i&&i)if(a.call(i)==g)for(n=i.length;n--;)N(i,n,r);else o(i,function(e){N(i,e,r)});return r.call(e,t,i)};u.parse=function(e,t){var r,n;return R=0,L=""+e,r=I(B()),"$"!=B()&&O(),R=L=null,t&&a.call(t)==l?D((n={},n[""]=r,n),"",t):r}}}s&&define(function(){return u})}(this)},{}],49:[function(e,t){function r(e,t){var r=[];t=t||0;for(var n=t||0;n<e.length;n++)r[n-t]=e[n];return r}t.exports=r},{}],50:[function(e,t){var r=e("./index.js"),n=e("./oauthio.js"),o=e("./../atomic.js");r.auth={config:{oauthdURL:"https://auth.appbase.io/",oauthMiddleSever:"https://auth.appbase.io:3000",oauthTokenURL:"/oauth/signin",oauthRefreshURL:"/oauth/refresh"},initOauthio:function(e){n.initialize(e),n.setOAuthdURL(r.auth.config.oauthdURL)},completeAuth:function(e,t){return function(n,o){if(n)return r.auth.unauth(),void t(n);var i=r.auth.restoreCreds();i&&Date.now()/1e3<i.credentials.appbase.expires_in+i.credentials.appbase.generated_at?(r.server.setAppbaseToken(i.credentials.appbase.access_token),t(null,i,r.auth.credsToRequetObj(i))):(r.auth.saveCreds(null),r.auth.codeToCreds(e,o.code,function(e,n){n.credentials.appbase.generated_at=Date.now()/1e3-2,n.credentials.provider.generated_at=n.credentials.appbase.generated_at,r.auth.saveCreds(n),r.server.setAppbaseToken(n.credentials.appbase.access_token),t(null,n,r.auth.credsToRequetObj(n))}))}},codeToCreds:function(e,t,n){var i={app:r.server.getApp(),code:t,provider:e};o.post(r.auth.config.oauthMiddleSever+r.auth.config.oauthTokenURL,i).success(n.bind(null,null)).error(function(e){r.auth.unauth(),n(e)})},credsToRequetObj:function(e){return n.create(e.credentials.provider.provider,e.credentials.provider)},saveCreds:function(e){localStorage.setItem("appbase_credentials",JSON.stringify(e))},restoreCreds:function(){try{return JSON.parse(localStorage.getItem("appbase_credentials"))}catch(e){return null}},unauth:function(){r.auth.saveCreds(null),r.server.setAppbaseToken(null);var e=function(e){document.cookie=e+"=; expires=Thu, 01 Jan 1970 00:00:01 GMT; path=/"};e("oauthio_provider_google"),e("oauthio_provider_linkedin"),e("oauthio_provider_facebook"),e("oauthio_provider_dropbox"),e("oauthio_provider_github")}},t.exports=r.auth},{"./../atomic.js":60,"./index.js":53,"./oauthio.js":56}],51:[function(e,t){var r=e("./index.js");r.cache={memStore:{},timestamps:{},newVertices:{},set:function(e,t,n){r.cache.memStore.hasOwnProperty(t)||(r.cache.memStore[t]={vertex:{},edges:{}},r.cache.timestamps[t]={});for(var o in n)("vertex"!==e||"_id"!==o&&"timestamp"!==o&&"rootPath"!==o)&&(r.cache.memStore[t][e][o]=n[o],"edges"===e&&(void 0===r.cache.timestamps[t][e]||r.cache.timestamps[t][e]<n[o].timestamp)&&(r.cache.timestamps[t][e]=n[o].timestamp));"vertex"===e&&(r.cache.timestamps[t][e]=n.timestamp)},get:function(e,t,n){var n=void 0===n?!0:n;return n&&r.cache.memStore.hasOwnProperty(t)?JSON.parse(JSON.stringify(r.cache.memStore[t][e])):!n&&r.cache.memStore.hasOwnProperty(t)?r.cache.memStore[t][e]:{}},remove:function(e,t,n){if(r.cache.memStore.hasOwnProperty(t)&&"undefined"==typeof n)r.cache.memStore[t][e]={};else if(r.cache.memStore.hasOwnProperty(t))for(var o in n)delete r.cache.memStore[t][e][n[o]]}},t.exports=r.cache},{"./index.js":53}],52:[function(e,t){var r=e("./index.js"),n=e("./../amplify.js");r.firing={prepareForProperties:function(e,t,n,o,i){r.firing.fireForProperties(t,n,o,i)},prepareForEdges:function(e,t,o,i,a){switch(e){case"REMOVE ALL":for(var s in o)r.firing.fireForEdges(t,"edge_removed",o[s],{},s,a);break;case"REMOVE":for(var s in i)void 0!==o[s]&&r.firing.fireForEdges(t,"edge_removed",o[s],{},s,a);break;default:for(var s in i)void 0!==o[s]?r.firing.fireForEdges(t,"edge_changed",o[s],i[s],s,a):r.firing.fireForEdges(t,"edge_added",{},i[s],s,a);n.publish("onComplete:"+t)}},prepareForNS:function(e,t,o,i,a){switch(e){case"DESTROY":for(var s in i)void 0!==o[s]&&r.firing.fireForNS(t,"vertex_removed",o[s],a);break;default:for(var s in i)void 0===o[s]&&r.firing.fireForNS(t,"vertex_added",i[s],a);n.publish("onComplete:"+t)}},fireForNS:function(e,t,o,i){"function"==typeof i?i(null,r["interface"].vertex(o.rootPath)):n.publish(t+":"+e,null,r["interface"].vertex(o.rootPath))},fireForProperties:function(e,t,o,i){var a=r.util.createVertexSnapshot(t,o);"function"==typeof i?i(null,r["interface"].vertex(r.util.URLToPath(e)),a):n.publish("properties:"+e,null,r["interface"].vertex(r.util.URLToPath(e)),a)},fireForEdges:function(e,t,o,i,a,s){var c=r.util.createEdgeSnapshot(o,i,a);"function"==typeof s?s(null,r["interface"].vertex(r.util.URLToPath(e)+"/"+a),c):n.publish(t+":"+e,null,r["interface"].vertex(r.util.URLToPath(e)+"/"+a),c)}},t.exports=r.firing},{"./../amplify.js":59,"./index.js":53}],53:[function(e,t){var r={},n=e("./../config.js");r["interface"]=e("./interface.js"),n.isWindow&&(r.auth=e("./auth.js")),r.cache=e("./cache.js"),r.server=e("./server.js"),r.util=e("./util.js"),r.firing=e("./firing.js"),r.inputHandling=e("./input-handling.js"),t.exports=r},{"./../config.js":62,"./auth.js":50,"./cache.js":51,"./firing.js":52,"./input-handling.js":54,"./interface.js":55,"./server.js":57,"./util.js":58}],54:[function(e,t){var r=e("./index.js");r.inputHandling={};var n=function(e,t){switch(t){case"alphaNumUnder":var o=new RegExp("^[a-zA-Z0-9_]*$");if("string"!=typeof e||""===e||!o.test(e))return"an alphanumeric string with underscores";break;case"asciiExcept3":var o=new RegExp("^([\x00-.]|[0-9]|[;-}]|[-])*$");if("string"!=typeof e||""===e||!o.test(e))return"an ascii string except '/', '~' and ':' characters";break;case"nsRef":if("object"!=typeof e||!e.isNS)return"an appbase namespace reference";break;case"vRef":if("object"!=typeof e||!e.isV)return"an appbase vertex reference";break;case"vPath":e=r.util.cutLeadingTrailingSlashes(e);var o=new RegExp("^([\x00-9]|[;-}]|[-])*$");if("string"!=typeof e||""===e||!o.test(e))return"a vertex path - an ascii string except '~' and ':' characters";break;case"vKey":e=r.util.cutLeadingTrailingSlashes(e);var i=n(e,"asciiExcept3");if(i)return"a vertex key - "+i;break;case"pName":break;case"pNameOrArray":var a,s="; or an array of property names";if(e instanceof Array?e.forEach(function(e){a=a||n(e,"pName")}):a=n(e,"pName"),a)return a+s;break;case"eName":var i=n(e,"asciiExcept3");if(i)return"an edge name - "+i;break;case"eNameOrArray":var a,s="; or an array of edge names";if(e instanceof Array?e.forEach(function(e){a=a||n(e,"eName")}):a=n(e,"eName"),a)return a+s;break;case"ns":var i=n(e,"asciiExcept3");if(i)return"a namespace identifier - "+i;break;case"vEvent":if("string"!=typeof e||""===e||"edge_added"!==e&&"edge_removed"!==e&&"edge_changed"!==e&&"properties"!==e)return"a vertex event - 'properties', 'edge_added', 'edge_removed' or 'edge_changed'";break;case"vEventProperties":if("string"!=typeof e||""===e||"properties"!==e)return"vertex 'properties' event";break;case"nsEvent":if("string"!=typeof e||""===e||"vertex_added"!==e&&"vertex_removed"!==e)return"a namespace event - 'vertex_added' or 'vertex_removed'";break;case"eFilters":if("object"!=typeof e)return"edge filters - an object";if("number"!=typeof e.startAt&&"undefined"!=typeof e.startAt)return"edge filters - an object with 'startAt' as a number";if("number"!=typeof e.endAt&&"undefined"!=typeof e.endAt)return"edge filters - an object with 'endAt' as a number";if("number"!=typeof e.limit&&"undefined"!=typeof e.limit)return"edge filters - an object with 'limit' as a number";if("number"!=typeof e.skip&&"undefined"!=typeof e.skip)return"edge filters - an object with 'skip' as a number";if("boolean"!=typeof e.onlyNew&&"undefined"!=typeof e.onlyNew)return"edge filters - an object with 'onlyNew' as a boolean";break;case"provider":if("google"!==e&&"linkedin"!==e&&"facebook"!==e&&"github"!==e&&"dropbox"!==e)return"a provider name";break;case"app":var o=new RegExp("^[a-z0-9_]*$");if("string"!=typeof e||""===e||!o.test(e))return"application name - a lower case alphanumeric string with underscores";break;case"secret":var o=new RegExp("^[a-zA-Z0-9]*$");if("string"!=typeof e||""===e||!o.test(e))return"application secret - an alphanumeric string";break;default:if(typeof e!==t)return"a "+t}};r.inputHandling.doIt=function(e,t){for(var r,o=0,i={},a=[],s=function(){var r="Invalid arguments provided: "+Array.prototype.slice.call(e,0).join(", ")+". Valid Arguments are: ";return t.forEach(function(e,n){r+=e.name+(a[n]||e.optional?" ("+(e.optional?"optional":"")+(a[n]?(e.optional?" - ":"")+a[n]:"")+")":""),r+=n+1===t.length?".":", "}),r},c=0;c<t.length;c+=1){var u;(u=n(e[o],t[c].type))?t[c].optional?i[t[c].name]=t[c].defaultVal:(r=!0,o+=1):(i[t[c].name]=e[o],o+=1),a[c]=u}return r||o<e.length?{error:s()}:i},t.exports=r.inputHandling},{"./index.js":53}],55:[function(e,t){var r=e("./index.js"),n=e("./../config.js"),o=e("./../amplify.js");if(r["interface"]={},n.isWindow){var i=e("./oauthio.js");r["interface"].auth={getAuth:function(){var e=r.auth.restoreCreds();return e?(r.server.setAppbaseToken(e.credentials.appbase.access_token),{authObj:e,requestObj:r.auth.credsToRequetObj(e)}):null},callback:function(){var e=r.inputHandling.doIt(arguments,[{name:"provider",type:"provider"},{name:"callback",type:"function"}]);if(e.error)throw e.error;i.callback(e.provider,r.auth.completeAuth(e.provider,e.callback))},auth:function(e,t,n){t.cache=!0,t.authorize||(t.authorize={}),t.authorize.response_type="code";var o;if("function"==(o=typeof n))i.popup(e,t,r.auth.completeAuth(e,n));else{if("string"!==o)throw"Invalid argument:"+n.toString();i.redirect(e,t,n)}},authPopup:function(){var e=r.inputHandling.doIt(arguments,[{name:"provider",type:"provider"},{name:"options",type:"object",optional:!0,defaultVal:{}},{name:"callback",type:"function"}]);if(e.error)throw e.error;r["interface"].auth.auth(e.provider,e.options,e.callback)},authRedirect:function(){var e=r.inputHandling.doIt(arguments,[{name:"provider",type:"provider"},{name:"options",type:"object",optional:!0,defaultVal:{}},{name:"redirectURL",type:"string"}]);if(e.error)throw e.error;r["interface"].auth.auth(e.provider,e.options,e.redirectURL)},unauth:function(){r.auth.unauth()}}}r["interface"].ns=function(e){var t=r.util.uuid(),n={isNS:!0};return n.type=function(){return"namespace"},n.URL=function(){return r.util.pathToURL(e)},n.path=function(){return e},n.name=function(){return e},n.v=function(){var t=r.inputHandling.doIt(arguments,[{name:"path",type:"vPath"}]);if(t.error)throw t.error;var o=r.util.cutLeadingTrailingSlashes(t.path),i=e+"/"+o;return-1===o.indexOf("/")?r["interface"].create(i,!0,n.isModified):r["interface"].vertex(i,n.isModified)},n.search=function(){var t=r.inputHandling.doIt(arguments,[{name:"query",type:"object"},{name:"callback",type:"function"}]);if(t.error)throw t.error;r.server.search(e,t.query,t.callback)},n.on=function(){var e=r.inputHandling.doIt(arguments,[{name:"event",type:"nsEvent"},{name:"callback",type:"function"},{name:"onComplete",type:"function",optional:!0}]);if(e.error)throw e.error;var i,a=function(e){r.server.ns.namespacesListening[n.URL()]&&"vertex_added"===e.event&&setTimeout(function(){r.firing.prepareForNS("RETR",n.URL(),{},r.cache.get("edges",n.URL()),e.callback)},0),o.subscribe(e.event+":"+n.URL(),t,e.callback),e.onComplete&&o.subscribe("onComplete:"+n.URL(),t,function(){o.unsubscribe("onComplete:"+n.URL(),t),e.onComplete(n)}),r.server.ns.namespacesListening[n.URL()]||r.server.ns.listen(n.URL(),{filters:{}},function(r){if(r){if(!e.callback)throw r;e.callback(r),o.unsubscribe(e.event+":"+n.URL(),t),e.onComplete&&o.unsubscribe("onComplete:"+n.URL(),t)}})},s=0,c=function(t,r){return t?e.callback(t):(s+=1,void r.once("properties",function(t,n,o){return t?e.callback(t):(s-=1,e.callback(null,r,o),void(e.onComplete&&i&&0===s&&e.onComplete.apply(null,i)))}))},u=function(){i=arguments};a({callback:c,onComplete:u,event:e.event})},n.off=function(){var e=r.inputHandling.doIt(arguments,[{name:"event",type:"nsEvent",optional:!0}]);if(e.error)throw e.error;e.event?(o.unsubscribe(e.event+":"+n.URL(),t),"vertex_added"===e.event&&o.unsubscribe("onComplete:"+n.URL(),t)):(o.unsubscribe("vertex_added:"+n.URL(),t),o.unsubscribe("onComplete:"+n.URL(),t),o.unsubscribe("vertex_removed:"+n.URL(),t)),0===o.subscriptionCount("vertex_added:"+n.URL())&&0===o.subscriptionCount("vertex_removed:"+n.URL())},r["interface"].referenceModifiers.ns?r["interface"].referenceModifiers.ns(n):n},r["interface"].isValid=function(e,t){r.server.vertex.get(e,function(e){var r=null!==e&&"101: Resource does not exist"!==e?e:null;
t&&(r?t(r):t(null,"101: Resource does not exist"!==e))})},r["interface"].create=function(e,t,n){if(!e)throw"Invalid arguments";e=r.util.cutLeadingTrailingSlashes(e);var o=r["interface"].vertex(e,n);r.cache.newVertices[e]=!0;var i=function(){r.server.vertex.set(r.util.pathToURL(e),{},function(){delete r.cache.newVertices[e]})};return t?r["interface"].isValid(o.URL(),function(t,n){n?delete r.cache.newVertices[e]:i()}):i(),o},r["interface"].vertex=function(e,t){var n=r.util.uuid(),i={onProperties:function(e){r.server.vertex.urlsListening[a.URL()]&&r.cache.timestamps[a.URL()]&&r.cache.timestamps[a.URL()].vertex&&setTimeout(function(){r.firing.prepareForProperties("RETR",a.URL(),{},r.cache.get("vertex",a.URL()),e)},0),o.subscribe("properties:"+a.URL(),n,e),r.server.vertex.urlsListening[a.URL()]||r.server.vertex.listen(a.URL(),{all:!0},function(t){t&&(e(t),o.unsubscribe("properties:"+a.URL(),n),0===o.subscriptionCount("properties:"+a.URL())&&r.server.vertex.unlisten(a.URL()))})},onEdges:function(e,t,s,c){var u={filters:t},f=function(){delete t.onlyNew,i.filterString=r.util.generateFilterString(u),r.server.edges.urlsListening[a.URL()+i.filterString]&&"edge_added"==e&&setTimeout(function(){r.firing.prepareForEdges("RETR",a.URL()+i.filterString,{},r.cache.get("edges",a.URL()+i.filterString),s)},0),o.subscribe(e+":"+a.URL()+i.filterString,n,s),c&&o.subscribe("onComplete:"+a.URL()+i.filterString,n,function(){o.unsubscribe("onComplete:"+a.URL()+i.filterString,n),c(a)}),r.server.edges.urlsListening[a.URL()+i.filterString]||r.server.edges.listen(a.URL(),u,function(t){t&&(s(t),o.unsubscribe(e+":"+a.URL()+i.filterString,n),c&&o.unsubscribe("onComplete:"+a.URL()+i.filterString,n))})};t.onlyNew?r.server.timestamp(function(e,t){return e?s(e):(u.timestamp=t,void f())}):f()},onEdgesProxyForInsertingProperties:function(e,t,r,n){var o,a=0,s=function(e,t,i){return e?r(e):(a+=1,void t.once("properties",function(e,s,c){return e?r(e):(i.properties=function(){return c.properties()},i.prevProperties=function(){return c.prevProperties()},a-=1,r(null,t,i),void(n&&o&&0===a&&n.apply(null,o)))}))},c=function(){o=arguments};i.onEdges(e,t,s,c)}},a={isV:!0};return a.type=function(){return"vertex"},a.URL=function(){return r.util.pathToURL(e)},a.path=function(){return e},a.name=function(){return e.slice(e.lastIndexOf("/")+1)},a.outVertex=function(){var t=r.inputHandling.doIt(arguments,[{name:"edgeName",type:"eName"}]);if(t.error)throw t.error;return new r["interface"].vertex(e+"/"+t.edgeName,a.isModified)},a.inVertex=function(){if(e.split("/").length<3)throw"This vertex has no inVertex.";return new r["interface"].vertex(e.slice(0,e.lastIndexOf("/")),a.isModified)},a.on=function(){var t=r.inputHandling.doIt(arguments,[{name:"event",type:"vEvent"},{name:"filters",type:"eFilters",optional:!0,defaultVal:{}},{name:"callback",type:"function"},{name:"onComplete",type:"function",optional:!0}]);if(t.error)throw t.error;if(a.isModified){var n=t.callback;t.callback=function(){var e=arguments[1];e&&(arguments[1]=r["interface"].referenceModifiers.v(e)),n.apply(null,arguments)}}var o=function(){r.cache.newVertices[e]?setTimeout(o,200):"properties"==t.event?i.onProperties(t.callback):i.onEdgesProxyForInsertingProperties(t.event,t.filters,t.callback,t.onComplete)};o()},a.once=function(){var t=r.inputHandling.doIt(arguments,[{name:"event",type:"vEventProperties"},{name:"filters",type:"eFilters",optional:!0,defaultVal:{}},{name:"callback",type:"function"}]);if(t.error)throw t.error;var n=r["interface"].vertex(e,a.isModified),o=function(){n.off(t.event),t.callback.apply(t.callback,arguments)};n.on(t.event,o)},a.off=function(){var e=r.inputHandling.doIt(arguments,[{name:"event",type:"vEvent",optional:!0}]);if(e.error)throw e.error;var t=e.event;t?(o.unsubscribe(t+":"+a.URL(),n),"properties"===t&&0===o.subscriptionCount("properties:"+a.URL()),"edge_changed"===t&&o.unsubscribe("onComplete:"+a.URL()+i.filterString,n),"properties"!==t&&0===o.subscriptionCount("edge_added:"+a.URL()+i.filterString)&&0===o.subscriptionCount("edge_removed:"+a.URL()+i.filterString)&&0===o.subscriptionCount("edge_changed:"+a.URL()+i.filterString)):(o.unsubscribe("properties:"+a.URL(),n),o.unsubscribe("edge_added:"+a.URL()+i.filterString,n),o.unsubscribe("onComplete:"+a.URL()+i.filterString,n),o.unsubscribe("edge_removed:"+a.URL()+i.filterString,n),o.unsubscribe("edge_changed:"+a.URL()+i.filterString,n),0===o.subscriptionCount("properties:"+a.URL()),0===o.subscriptionCount("edge_added:"+a.URL()+i.filterString)&&0===o.subscriptionCount("edge_removed:"+a.URL()+i.filterString)&&0===o.subscriptionCount("edge_changed:"+a.URL()+i.filterString))},a.isValid=function(){var t=r.inputHandling.doIt(arguments,[{name:"callback",type:"function"}]);if(t.error)throw t.error;var n=function(){r.cache.newVertices[e]?setTimeout(n,200):r["interface"].isValid(a.URL(),t.callback)};n()},a.setData=function(){var t=r.inputHandling.doIt(arguments,[{name:"data",type:"object"},{name:"callback",type:"function",optional:!0}]);if(t.error)throw t.error;var n=function(){r.cache.newVertices[e]?setTimeout(n,200):r.server.vertex.set(a.URL(),t.data,function(e){if(e){if(!t.callback)throw e;t.callback(e)}else t.callback&&t.callback(e,a)})};n()},a.commitData=function(){var t=r.inputHandling.doIt(arguments,[{name:"apply",type:"function"},{name:"callback",type:"function",optional:!0}]);if(t.error)throw t.error;var n=t.callback,o=function(i){var s,c=r["interface"].vertex(e);c.on("properties",function(e,u,f){if(c.off(),!s)if(s=!0,e)n&&n(e,a);else{try{var p=t.apply(f.properties())}catch(l){if(!n)throw e;n(e,a)}if("object"!=typeof p){if(!n)throw"The 'apply' function must return an oject.";n("The 'apply' function must return an oject.",a)}else r.server.vertex.set(a.URL(),p,function(e){if(e)if("301: Unable to update"===e.toString())o(i+1);else{if(!n)throw e;n(e,a)}else n&&n(e,a)},r.cache.timestamps[a.URL()].vertex)}})};o(1)},a.removeData=function(){var t=r.inputHandling.doIt(arguments,[{name:"propertyName",type:"pNameOrArray"},{name:"callback",type:"function",optional:!0}]);if(t.error)throw t.error;var n;n=t.propertyName instanceof Array?t.propertyName:[t.propertyName];var o=function(){r.cache.newVertices[e]?setTimeout(o,200):r.server.vertex["delete"](a.URL(),{data:n},function(e){if(e){if(!t.callback)throw e;t.callback(e)}else t.callback&&t.callback(e,a)})};o()},a.destroy=function(t){var n=r.inputHandling.doIt(arguments,[{name:"callback",type:"function",optional:!0}]);if(n.error)throw n.error;var o=function(){r.cache.newVertices[e]?setTimeout(o,200):r.server.vertex.destroy(a.URL(),function(e){if(e){if(!t)throw e;t(e)}else t&&t(e,a)})};o()},a.setEdge=function(){var t=r.inputHandling.doIt(arguments,[{name:"edgeName",type:"eName"},{name:"vRef",type:"vRef",optional:!0},{name:"priority",type:"number",optional:!0,defaultVal:null},{name:"callback",type:"function",optional:!0}]);if(t.error)throw t.error;var n={};n[t.edgeName]={path:t.vRef?t.vRef.path():(t.vRef=r["interface"].create("misc/"+r.util.uuid(),!1,!0)).path(),order:t.priority};var o=function(){r.cache.newVertices[e]||r.cache.newVertices[t.vRef.path()]?setTimeout(o,200):r.server.edges.set(a.URL(),n,function(e){if(e){if(!t.callback)throw e;t.callback(e)}else t.callback&&t.callback(e,a,t.vRef)})};o()},a.removeEdge=function(){var t=r.inputHandling.doIt(arguments,[{name:"edgeName",type:"eNameOrArray"},{name:"callback",type:"function",optional:!0}]);if(t.error)throw t.error;var n;n=t.edgeName instanceof Array?t.edgeName:[t.edgeName];var o=function(){r.cache.newVertices[e]?setTimeout(o,200):r.server.edges["delete"](a.URL(),{data:n},function(e){if(e){if(!t.callback)throw e;t.callback(e)}else t.callback&&t.callback(e,a)})};o()},t&&r["interface"].referenceModifiers.v?r["interface"].referenceModifiers.v(a):a},r["interface"].referenceModifiers={},t.exports=r["interface"]},{"./../amplify.js":59,"./../config.js":62,"./index.js":53,"./oauthio.js":56}],56:[function(e,t){var r,n=void 0!==window.OAuth;if(n){var o=window.OAuth;delete window.OAuth,e("oauth-js"),r=window.OAuth,window.OAuth=o}else e("oauth-js"),r=window.OAuth,delete window.OAuth;t.exports=r},{"oauth-js":6}],57:[function(e,t){var r=e("./../config.js"),n=e("./index.js"),o=e("./../atomic.js"),i=e("socket.io-client");n.server={realtime:{}},n.server.realtime.socket=i(r.appbaseApiServer+":"+("https"===r.protocol?443:80)),n.server.realtime.socket.on("reconnect",function(){console.log("reconnect");for(var e in n.server.ns.namespacesListening)console.log("re-emitting:",e,"ns"),n.server.realtime.socket.emit("new vertices",n.server.ns.namespacesListening[e]);for(var e in n.server.vertex.urlsListening)n.server.vertex.urlsListening[e].timestamp=void 0!==n.cache.timestamps[e]?n.cache.timestamps[e].vertex:void 0,console.log("re-emitting:",e,"properties"),n.server.realtime.socket.emit("properties",n.server.vertex.urlsListening[e]);for(var e in n.server.edges.urlsListening)n.server.edges.urlsListening[e].timestamp=void 0!==n.cache.timestamps[e]?n.cache.timestamps[e].edges:void 0,console.log("re-emitting:",e,"edges"),n.server.realtime.socket.emit("edges",n.server.vertex.urlsListening[e])}),n.server.rawSearch=function(e,t){var r={query:e};n.util.setCredsInData(r),o.post(n.server.baseURL+"/~rawsearch",r).success(function(e){"string"==typeof e?t(new Error(e)):t(null,e)}).error(t)},n.server.search=function(e,t,r){var i={query:t};n.util.setCredsInData(i),o.post(n.server.baseURL+"/"+e+"/~search",i).success(function(e){"string"==typeof e?r(new Error(e)):r(null,e)}).error(r)},n.server.ns={namespacesListening:{},listen:function(e,t,r){var o=n.util.parseURL(e);o.filters=t.filters,o.listener_id=n.util.uuid(),delete o.key,delete o.obj_path,n.util.setCredsInData(o);var i,a=JSON.stringify(o);n.server.realtime.socket.on(a,i=function(t){if("string"==typeof t){if(delete n.server.edges.urlsListening[e],"STOPPED"===t)return void n.server.realtime.socket.removeListener(a,i);try{r(new Error(t))}catch(o){console.log("Error: ",e,o)}}else{try{if(t instanceof Array){var s=n.cache.get("edges",e),c={},u={};t.forEach(function(e){var t=e.rootPath.slice(e.rootPath.indexOf("/")+1);u[t]=!0,s[t]||(c[t]=e)}),n.cache.set("edges",e,c),n.firing.prepareForNS("RETR",e,s,c);for(var f in s)if(!u[f]){n.cache.remove("edges",e,[f]);var p={pKey:!0};n.firing.prepareForNS("DESTROY",e,s,p)}}else{var l=t.vertex,f=l.rootPath?l.rootPath.slice(l.rootPath.indexOf("/")+1):void 0;if(f){var s=n.cache.get("edges",e),h={};switch(h[f]=l,t.optype){case"DESTROY":n.cache.remove("edges",e,[f]);break;case"UPDATE":n.cache.set("edges",e,h)}n.firing.prepareForNS(t.optype,e,s,h)}}}catch(o){console.log("Error: ",e,o)}try{r(null,t)}catch(o){console.log("Error: ",e,o)}}}),n.server.ns.namespacesListening[e]=o,n.server.realtime.socket.emit("new vertices",o)},unlisten:function(e){var t=n.server.ns.namespacesListening[e];delete n.server.ns.namespacesListening[e],n.cache.memStore[e]&&(n.cache.memStore[e]={}),t&&(delete t.timestamp,n.server.realtime.socket.emit("new vertices off",t))}},n.server.vertex={urlsListening:{},get:function(e,t){var r={data:[""]};n.util.setCredsInData(r),o.post(e+"/~properties",r).success(function(e){"string"==typeof e?t(new Error(e)):t(null,e)}).error(t)},set:function(e,t,r,i){var a={data:t,timestamp:i};n.util.setCredsInData(a),o.patch(e+"/~properties",a).success(function(e){"string"==typeof e?r(new Error(e)):r(null,e)}).error(r)},listen:function(e,t,r){var o=n.util.parseURL(e);o.all=t.all,o.data=t.data,o.listener_id=n.util.uuid(),n.util.setCredsInData(o);var i,a=JSON.stringify(o);n.server.realtime.socket.on(a,i=function(t){if("string"==typeof t){if(delete n.server.vertex.urlsListening[e],"STOPPED"===t)return void n.server.realtime.socket.removeListener(a,i);try{r(new Error(t))}catch(o){console.log("Error: ",e,o)}}else{var s=n.cache.get("vertex",e);switch(t.optype){case"REMOVE ALL":n.cache.remove("vertex",e);break;case"REMOVE":n.cache.remove("vertex",e,Object.keys(t.vertex));break;default:n.cache.set("vertex",e,t.vertex)}t.vertexCache=n.cache.get("vertex",e);try{n.firing.prepareForProperties(t.optype,e,s,t.vertexCache)}catch(o){try{r(o)}catch(o){console.log("Error: ",e,o)}}try{r(null,t)}catch(o){try{r(o)}catch(o){console.log("Error: ",e,o)}}}}),n.server.vertex.urlsListening[e]=o,n.server.realtime.socket.emit("properties",o)},unlisten:function(e){var t=n.server.vertex.urlsListening[e];delete n.server.vertex.urlsListening[e],n.cache.memStore[e]&&(n.cache.memStore[e].vertex={}),t&&(delete t.timestamp,n.server.realtime.socket.emit("properties off",t))},"delete":function(e,t,r){n.util.setCredsInData(t),o["delete"](e+"/~properties",t).success(function(e){"string"==typeof e?r(new Error(e)):r(null,e)}).error(r)},destroy:function(e,t){var r={all:!0};n.util.setCredsInData(r),o["delete"](e,r).success(function(e){"string"==typeof e?t(new Error(e)):t(null,e)}).error(t)}},n.server.edges={urlsListening:{},set:function(e,t,r){var i={data:t};n.util.setCredsInData(i),o.patch(e+"/~edges",i).success(function(e){"string"==typeof e?r(new Error(e)):r(null,e)}).error(r)},unlisten:function(e){var t=n.server.edges.urlsListening[e];delete n.server.edges.urlsListening[e],n.cache.memStore[e]&&(n.cache.memStore[e].edges={}),t&&(delete t.timestamp,n.server.realtime.socket.emit("edges off",t))},listen:function(e,t,r){var o=n.util.parseURL(e);e+=n.util.generateFilterString(t),o.filters=t.filters,o.listener_id=n.util.uuid(),n.util.setCredsInData(o);var i=JSON.stringify(o);o.timestamp=t.timestamp;var a;n.server.realtime.socket.on(i,a=function(t){if("string"==typeof t){if(delete n.server.edges.urlsListening[e],"STOPPED"===t)return void n.server.realtime.socket.removeListener(i,a);try{r(new Error(t))}catch(o){console.log("Error: ",e,o)}}else{var s=n.cache.get("edges",e);try{switch(t.optype){case"REMOVE ALL":n.cache.remove("edges",e),n.firing.prepareForEdges(t.optype,e,s,{});break;case"REMOVE":n.cache.remove("edges",e,Object.keys(t.edges)),n.firing.prepareForEdges(t.optype,e,s,t.edges);break;default:for(var c in t.edges)""===t.edges[c].t_id&&delete t.edges[c];n.cache.set("edges",e,t.edges),n.firing.prepareForEdges(t.optype,e,s,t.edges)}}catch(o){console.log("Error: ",e,o)}t.edgeCache=n.cache.get("edges",e);try{r(null,t)}catch(o){console.log("Error: ",e,o)}}}),n.server.edges.urlsListening[e]=o,void 0===n.cache.timestamps[e]&&(n.cache.timestamps[e]={}),n.cache.timestamps[e].edges=t.timestamp,o.timestamp=t.timestamp,n.server.realtime.socket.emit("edges",o)},"delete":function(e,t,r){n.util.setCredsInData(t),o["delete"](e+"/~edges",t).success(function(e){"string"==typeof e?r(new Error(e)):r(null,e)}).error(r)}},n.server.setBaseURL=function(e){n.server.baseURL=n.util.cutLeadingTrailingSlashes(e)},n.server.setApp=function(e){n.server.app=e},n.server.getApp=function(){return n.server.app},n.server.setAppSecret=function(e){n.server.appSecret=e},n.server.setAppbaseToken=function(e){n.server.appbaseToken=e},n.server.getAppbaseToken=function(){return n.server.appbaseToken},n.server.getAppSecret=function(){return n.server.appSecret},n.server.getBaseURL=function(){return n.server.baseURL},n.server.timestamp=function(e){o.get(r.appbaseApiServer+"/time").success(function(t){e(null,t)}).error(function(t){e(t)})},t.exports=n.server},{"./../atomic.js":60,"./../config.js":62,"./index.js":53,"socket.io-client":7}],58:[function(e,t){var r=e("./index.js"),n=e("./../config.js");r.util={setCredsInData:function(e){return r.server.getAppSecret()?e.secret=r.server.getAppSecret():e.token=r.server.getAppbaseToken(),e},createVertexSnapshot:function(e,t){return t=JSON.parse(JSON.stringify(t)),e=JSON.parse(JSON.stringify(e)),{properties:function(){return t},prevProperties:function(){return e}}},createEdgeSnapshot:function(e,t,r){return{name:function(){return r},prevPriority:function(){return e.order},priority:function(){return t.order}}},cutLeadingTrailingSlashes:function(e){for(;"/"===e.charAt(e.length-1);)e=e.slice(0,-1);for(;"/"===e.charAt(0);)e=e.slice(1);return e},pathToURL:function(e){if(r.server.baseURL)return r.server.baseURL+"/"+r.util.cutLeadingTrailingSlashes(e);throw"baseURL is not set."},URLToPath:function(e){var t;return e.slice(0,-1!==(t=e.indexOf(":",n.protocol.length+1))?t:void 0).replace(r.server.baseURL+"/","")},uuid:function(){return"xxxxxxxxxxxx4xxxyxxxxxxxxxxxxxxx".replace(/[xy]/g,function(e){var t=16*Math.random()|0,r="x"===e?t:3&t|8;return r.toString(16)})},parseURL:function(e){var t;t=e.split(/\/\/(.+)?/)[1].split(/\.(.+)?/),t=t[1].split(/\/(.+)?/)[1].split(/\/(.+)?/);var r=t[0];t=t[1].split(/\/(.+)?/);t[0];t=t[1].split(/\/(.+)?/);var n,o,i=t[0];t[1]&&(t=t[1].split(/\/(.+)?/),n=t[0],o=t[1]);var a={appname:r,namespace:i,key:n,obj_path:o};return a},generateFilterString:function(e){var t=":filters-";return e&&e.filters&&(t+=void 0!==e.filters.startAt?"startAt="+e.filters.startAt+".":"",t+=void 0!==e.filters.endAt?"endAt="+e.filters.endAt+".":"",t+=void 0!==e.filters.limit?"limit="+e.filters.limit+".":"",t+=void 0!==e.filters.skip?"skip="+e.filters.skip+".":""),t+=void 0!==e.timestamp?"timestamp="+e.timestamp+".":""}},t.exports=r.util},{"./../config.js":62,"./index.js":53}],59:[function(e,t){var r;!function(){var e=function(){return"xxxxxxxxxxxx4xxxyxxxxxxxxxxxxxxx".replace(/[xy]/g,function(e){var t=16*Math.random()|0,r="x"==e?t:3&t|8;return r.toString(16)})},t=[].slice,n={};r={publish:function(e){if("string"!=typeof e)throw new Error("You must provide a valid topic to publish.");var r,o,i,a,s=t.call(arguments,1),c=0;if(!n[e])return!0;for(r=n[e].slice(),i=r.length;i>c&&(o=r[c],a=o.callback.apply(null,s),a!==!1);c++);return a!==!1},subscriptionCount:function(e){return n[e]?n[e].length:0},subscribe:function(t,r,o){if("string"!=typeof t)throw new Error("You must provide a valid topic to create a subscription.");2===arguments.length&&(o=r,r=e());for(var i,a=0,s=t.split(/\s/),c=s.length;c>a;a++){t=s[a],i=!1,n[t]||(n[t]=[]);for(var u=n[t].length-1,f={callback:o,name:r};u>=0;u--)if(n[t][u].name==r){n[t].splice(u,1,f),i=!0;break}i||n[t].unshift(f)}return r},unsubscribe:function(e,t){var r;if("string"!=typeof e)throw new Error("You must provide a valid topic to remove a subscription.");if(n[e]){if(t)for(var o=n[e].length,i=0;o>i;i++)n[e][i].name===t&&(r=t,n[e].splice(i,1),i--,o--);else{r=[];for(var o=n[e].length,i=0;o>i;i++)r.push(n[e][i].name);n[e]=[]}return r}}}}(),t.exports=r},{}],60:[function(e,t){if("undefined"==typeof window)var r=e("xhr2");else var r=window.XMLHttpRequest;var n={};!function(){var e=function(e){var t;if(204===e.status)t="101: Resource does not exist";else try{t=JSON.parse(e.responseText)}catch(r){t=e.responseText}return[t,e]},t=function(t,n,o){var i={success:function(){},error:function(){}},a=r||ActiveXObject,s=new a("MSXML2.XMLHTTP.3.0");s.open(t,n,!0),s.setRequestHeader("Content-type","application/json"),s.onreadystatechange=function(){4===s.readyState&&(200===s.status?i.success.apply(i,e(s)):i.error.apply(i,e(s)))},s.send(JSON.stringify(o));var c={success:function(e){return i.success=e,c},error:function(e){return i.error=e,c}};return c};n.get=function(e){return t("GET",e)},n.patch=function(e,r){return t("PATCH",e,r)},n.post=function(e,r){return t("POST",e,r)},n["delete"]=function(e,r){return t("DELETE",e,r)}}(),"undefined"!=typeof t&&void 0!==t.exports&&(t.exports=n)},{xhr2:1}],61:[function(e){Appbase=e("./main.js")},{"./main.js":63}],62:[function(e,t){var r={isWindow:"undefined"!=typeof window,protocol:"undefined"!=typeof location&&"https:"===location.protocol?"https":"http",version:"2"};r.appbaseApiServer=r.protocol+"://api.appbase.io",t.exports=r},{}],63:[function(e,t){var r=e("./config.js"),n=e("./ab/"),o={};r.isWindow&&(o.getAuth=n["interface"].auth.getAuth,o.authPopup=n["interface"].auth.authPopup,o.authRedirect=n["interface"].auth.authRedirect,o.authCallback=n["interface"].auth.callback,o.unauth=n["interface"].auth.unauth),o.credentials=function(){var e=n.inputHandling.doIt(arguments,[{name:"appName",type:"app"},{name:"appSecret",type:"secret",optional:!0},{name:"callback",type:"function",optional:!0}]);if(e.error)throw e.error;n.server.setBaseURL(r.appbaseApiServer+"/"+e.appName+"/v"+r.version),n.server.setAppSecret(e.appSecret),r.isWindow&&n.auth.initOauthio(e.appName),n.server.setApp(e.appName),void 0!==e.callback&&n["interface"].isValid(n.util.pathToURL(o.uuid()+"/"+o.uuid()),function(t,r){var n=null!==t&&"021: Invalid secret key"!==t&&"022: Invalid secret key"!==t?t:null;n=n?n:r?"Unexpected result from server while checking for credentials.":null,n?e.callback(n):e.callback(null,"021: Invalid secret key"!==t&&"022: Invalid secret key"!==t)})},o.rawSearch=function(){var e=n.inputHandling.doIt(arguments,[{name:"query",type:"object"},{name:"callback",type:"function"}]);if(e.error)throw e.error;n.server.rawSearch(e.query,e.callback)},o.serverTime=function(){var e=n.inputHandling.doIt(arguments,[{name:"callback",type:"function"}]);if(e.error)throw e.error;n.server.timestamp(e.callback)},o.ns=function(){var e=n.inputHandling.doIt(arguments,[{name:"namespace",type:"ns"}]);if(e.error)throw e.error;return n["interface"].ns(e.namespace)},o.uuid=n.util.uuid,o.vRefModifier=function(e){n["interface"].referenceModifiers.v=e},o.nsRefModifier=function(e){n["interface"].referenceModifiers.ns=e},t.exports=o},{"./ab/":53,"./config.js":62}]},{},[61]);